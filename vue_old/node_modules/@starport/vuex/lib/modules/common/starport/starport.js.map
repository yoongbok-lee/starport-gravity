{"version":3,"sources":["../../../../src/modules/common/starport/starport.js"],"names":["process","env","VUE_APP_CUSTOM_URL","VUE_APP_API_COSMOS","VUE_APP_API_TENDERMINT","VUE_APP_WS_TENDERMINT","VUE_APP_ADDRESS_PREFIX","VUE_APP_STARPORT_URL","GITPOD","URL","apiNode","protocol","hostname","replace","rpcNode","addrPrefix","wsNode","starportUrl","namespaced","state","_timer","frontendUrl","backend","node_js","vue_app_custom_url","running","frontend","rpc","api","prevStates","getters","backendEnv","backendRunningStates","wasAppRestarted","status","is_consensus_engine_alive","is_my_app_backend_alive","mutations","SET_STARPORT_ENV","SET_BACKEND_RUNNING_STATES","SET_BACKEND_ENV","SET_PREV_STATES","is_my_app_frontend_alive","SET_TIMER","timer","CLEAR_TIMER","clearInterval","actions","setStatusState","commit","dispatch","rootGetters","axios","get","data","addrs","app_frontend","chainId","chain_id","sdkVersion","sdk_version","app_backend","consensus_engine","getTXApi","root","window","location","reload","SpVuexError","init","setInterval","console","error","log"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport SpVuexError from '../../../errors/SpVuexError'\r\n\r\nconst {\r\n\tVUE_APP_CUSTOM_URL,\r\n\tVUE_APP_API_COSMOS,\r\n\tVUE_APP_API_TENDERMINT,\r\n\tVUE_APP_WS_TENDERMINT,\r\n\tVUE_APP_ADDRESS_PREFIX,\r\n\tVUE_APP_STARPORT_URL,\r\n} = process.env\r\n\r\nconst GITPOD =\r\n\tprocess.env.VUE_APP_CUSTOM_URL && new URL(process.env.VUE_APP_CUSTOM_URL)\r\nconst apiNode =\r\n\t(GITPOD && `${GITPOD.protocol}//1317-${GITPOD.hostname}`) ||\r\n\t(process.env.VUE_APP_API_COSMOS &&\r\n\t\tprocess.env.VUE_APP_API_COSMOS.replace('0.0.0.0', 'localhost')) ||\r\n\t'http://localhost:1317'\r\nconst rpcNode =\r\n\t(GITPOD && `${GITPOD.protocol}//26657-${GITPOD.hostname}`) ||\r\n\t(process.env.VUE_APP_API_TENDERMINT &&\r\n\t\tprocess.env.VUE_APP_API_TENDERMINT.replace('0.0.0.0', 'localhost')) ||\r\n\t'http://localhost:26657'\r\nconst addrPrefix = process.env.VUE_APP_ADDRESS_PREFIX || 'cosmos'\r\nconst wsNode =\r\n\t(GITPOD && `wss://26657-${GITPOD.hostname}/websocket`) ||\r\n\t(process.env.VUE_APP_WS_TENDERMINT &&\r\n\t\tprocess.env.VUE_APP_WS_TENDERMINT.replace('0.0.0.0', 'localhost')) ||\r\n\t'ws://localhost:26657/websocket'\r\nconst starportUrl =\r\n\t(process.env.VUE_APP_STARPORT_URL &&\r\n\t\tprocess.env.VUE_APP_STARPORT_URL.replace('0.0.0.0', 'localhost')) ||\r\n\t'http://localhost:12345'\r\n\r\nexport default {\r\n\tnamespaced: true,\r\n\tstate() {\r\n\t\treturn {\r\n\t\t\t_timer: null,\r\n\t\t\tstarportUrl: VUE_APP_CUSTOM_URL ? '' : starportUrl,\r\n\t\t\tfrontendUrl: '',\r\n\t\t\tbackend: {\r\n\t\t\t\tenv: {\r\n\t\t\t\t\tnode_js: false,\r\n\t\t\t\t\tvue_app_custom_url: process.env.VUE_APP_CUSTOM_URL\r\n\t\t\t\t},\r\n\t\t\t\trunning: {\r\n\t\t\t\t\tfrontend: false,\r\n\t\t\t\t\trpc: false,\r\n\t\t\t\t\tapi: false\r\n\t\t\t\t},\r\n\t\t\t\tprevStates: {\r\n\t\t\t\t\tfrontend: null,\r\n\t\t\t\t\trpc: null,\r\n\t\t\t\t\tapi: null\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetters: {\r\n\t\tbackendEnv: (state) => state.backend.env,\r\n\t\tfrontendUrl: (state) => state.frontendUrl,\r\n\t\tbackendRunningStates: (state) => state.backend.running,\r\n\t\twasAppRestarted: (state) => (status) => {\r\n\t\t\treturn (\r\n\t\t\t\tstate.backend.prevStates.rpc !== null &&\r\n\t\t\t\tstate.backend.prevStates.api !== null &&\r\n\t\t\t\t!state.backend.prevStates.rpc &&\r\n\t\t\t\t!state.backend.prevStates.api &&\r\n\t\t\t\tstatus.is_consensus_engine_alive &&\r\n\t\t\t\tstatus.is_my_app_backend_alive\r\n\t\t\t)\r\n\t\t}\r\n\t},\r\n\tmutations: {\r\n\t\tSET_STARPORT_ENV(state, { starportUrl, frontendUrl }) {\r\n\t\t\tstate.starportUrl = starportUrl\r\n\t\t\tstate.frontendUrl = frontendUrl\r\n\t\t},\r\n\t\tSET_BACKEND_RUNNING_STATES(state, { frontend, rpc, api }) {\r\n\t\t\tstate.backend.running = {\r\n\t\t\t\tfrontend,\r\n\t\t\t\trpc,\r\n\t\t\t\tapi\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t *\r\n\t\t * @param {object} state\r\n\t\t * @param {object} env\r\n\t\t * @param {boolean} states.node_js\r\n\t\t * @param {string} states.vue_app_custom_url\r\n\t\t *\r\n\t\t *\r\n\t\t */\r\n\t\tSET_BACKEND_ENV(state, { node_js, vue_app_custom_url }) {\r\n\t\t\tstate.backend.env = {\r\n\t\t\t\tnode_js,\r\n\t\t\t\tvue_app_custom_url\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t *\r\n\t\t * @param {object} state\r\n\t\t * @param {object} payload\r\n\t\t * @param {object} payload.status\r\n\t\t *\r\n\t\t *\r\n\t\t */\r\n\t\tSET_PREV_STATES(state, { status }) {\r\n\t\t\tstate.backend.prevStates = {\r\n\t\t\t\tfrontend: status ? status.is_my_app_frontend_alive : false,\r\n\t\t\t\trpc: status ? status.is_consensus_engine_alive : false,\r\n\t\t\t\tapi: status ? status.is_my_app_backend_alive : false\r\n\t\t\t}\r\n\t\t},\r\n\t\tSET_TIMER(state, { timer }) {\r\n\t\t\tstate._timer = timer\r\n\t\t},\r\n\t\tCLEAR_TIMER(state) {\r\n\t\t\tclearInterval(state._timer)\r\n\t\t}\r\n\t},\r\n\tactions: {\r\n\t\tasync setStatusState({ state, getters, commit, dispatch, rootGetters }) {\r\n\t\t\ttry {\r\n\t\t\t\tif (state.starportUrl != '') {\r\n\t\t\t\t\tconst { data } = await axios.get(`${state.starportUrl}/status`)\r\n\t\t\t\t\tconst { status, env, addrs } = data\r\n\t\t\t\t\r\n\t\t\t\t\tconst GITPOD = env.vue_app_custom_url && new URL(env.vue_app_custom_url)\r\n\r\n\t\t\t\t\tconst starportUrl = state.starportUrl ||\r\n\t\t\t\t\t\t(GITPOD && `${GITPOD.protocol}//12345-${GITPOD.hostname}`) ||\r\n\t\t\t\t\t\t'http://localhost:12345'\r\n\r\n\t\t\t\t\tconst frontendUrl = addrs.app_frontend ||\r\n\t\t\t\t\t\t(GITPOD && `${GITPOD.protocol}//8080-${GITPOD.hostname}`) ||\r\n\t\t\t\t\t\t'http://localhost:8080'\r\n\r\n\t\t\t\t\tcommit('SET_STARPORT_ENV', {\r\n\t\t\t\t\t\tstarportUrl,\r\n\t\t\t\t\t\tfrontendUrl\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tconst chainId = env.chain_id\r\n\t\t\t\t\tconst sdkVersion = status.sdk_version\r\n\t\t\t\t\tconst apiNode = addrs.app_backend ||\r\n\t\t\t\t\t\t(VUE_APP_API_COSMOS &&\r\n\t\t\t\t\t\t\tVUE_APP_API_COSMOS.replace('0.0.0.0', 'localhost')) ||\r\n\t\t\t\t\t\t(GITPOD && `${GITPOD.protocol}//1317-${GITPOD.hostname}`) ||\r\n\t\t\t\t\t\t'http://localhost:1317'\r\n\r\n\t\t\t\t\tconst rpcNode = addrs.consensus_engine ||\r\n\t\t\t\t\t\t(VUE_APP_API_TENDERMINT &&\r\n\t\t\t\t\t\t\tVUE_APP_API_TENDERMINT.replace('0.0.0.0', 'localhost')) ||\r\n\t\t\t\t\t\t(GITPOD && `${GITPOD.protocol}//26657-${GITPOD.hostname}`) ||\r\n\t\t\t\t\t\t'http://localhost:26657'\r\n\r\n\t\t\t\t\tconst wsNode = addrs.consensus_engine.replace('http', 'ws') + '/websocket' ||\r\n\t\t\t\t\t\t(VUE_APP_WS_TENDERMINT &&\r\n\t\t\t\t\t\t\tVUE_APP_WS_TENDERMINT.replace('0.0.0.0', 'localhost')) ||\r\n\t\t\t\t\t\t(GITPOD && `wss://26657-${GITPOD.hostname}/websocket`) ||\r\n\t\t\t\t\t\t'ws://localhost:26657/websocket'\r\n\r\n\t\t\t\t\tconst addrPrefix = VUE_APP_ADDRESS_PREFIX || 'cosmos'\r\n\r\n\t\t\t\t\tconst getTXApi =\r\n\t\t\t\t\t\trootGetters['common/env/sdkVersion'] === 'Stargate'\r\n\t\t\t\t\t\t\t? dispatch(\r\n\t\t\t\t\t\t\t\t'common/env/setTxAPI',\r\n\t\t\t\t\t\t\t\trootGetters['common/env/apiTendermint'] + '/tx?hash=0x',\r\n\t\t\t\t\t\t\t\t{ root: true }\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t: dispatch(\r\n\t\t\t\t\t\t\t\t'common/env/setTxAPI',\r\n\t\t\t\t\t\t\t\trootGetters['common/env/apiCosmos'] + '/txs/',\r\n\t\t\t\t\t\t\t\t{ root: true }\r\n\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t'common/env/config',\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tchainId,\r\n\t\t\t\t\t\t\tsdkVersion,\r\n\t\t\t\t\t\t\tapiNode,\r\n\t\t\t\t\t\t\trpcNode,\r\n\t\t\t\t\t\t\twsNode,\r\n\t\t\t\t\t\t\taddrPrefix,\r\n\t\t\t\t\t\t\tgetTXApi\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ root: true }\r\n\t\t\t\t\t)\r\n\r\n\t\t\t\t\tcommit('SET_BACKEND_RUNNING_STATES', {\r\n\t\t\t\t\t\tfrontend: status.is_my_app_frontend_alive,\r\n\t\t\t\t\t\trpc: status.is_consensus_engine_alive,\r\n\t\t\t\t\t\tapi: status.is_my_app_backend_alive\r\n\t\t\t\t\t})\r\n\t\t\t\t\tcommit('SET_BACKEND_ENV', {\r\n\t\t\t\t\t\tnode_js: env.node_js,\r\n\t\t\t\t\t\tvue_app_custom_url: env.vue_app_custom_url\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t *\r\n\t\t\t\t\t // If backend was down, but alive now,\r\n\t\t\t\t\t // it indicates the app is restarting.\r\n\t\t\t\t\t // Forcing browser to reload in this case to reset blockchain data.\r\n\t\t\t\t\t *\r\n\t\t\t\t\t */\r\n\t\t\t\t\tif (getters.wasAppRestarted(status)) {\r\n\t\t\t\t\t\twindow.location.reload(false)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcommit('SET_PREV_STATES', { status })\r\n\t\t\t\t}else{\r\n\t\t\t\t\t\r\n\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t'common/env/config',\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tchainId:'',\r\n\t\t\t\t\t\t\tsdkVersion: 'Stargate',\r\n\t\t\t\t\t\t\tapiNode,\r\n\t\t\t\t\t\t\trpcNode,\r\n\t\t\t\t\t\t\twsNode,\r\n\t\t\t\t\t\t\taddrPrefix,\r\n\t\t\t\t\t\t\tgetTXApi: rpcNode+'/tx?hash=0x'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ root: true }\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tcommit('SET_BACKEND_RUNNING_STATES', {\r\n\t\t\t\t\tfrontend: false,\r\n\t\t\t\t\trpc: false,\r\n\t\t\t\t\tapi: false\r\n\t\t\t\t})\r\n\r\n\t\t\t\tcommit('SET_PREV_STATES', { status: null })\r\n\r\n\t\t\t\tthrow new SpVuexError(\r\n\t\t\t\t\t'Starport:Status',\r\n\t\t\t\t\t'Could not set status from starport'\r\n\t\t\t\t)\r\n\t\t\t} \r\n\t\t},\r\n\t\tasync init({ commit, dispatch }) {\r\n\t\t\t/*\r\n\t\t\t*\r\n\t\t\t// Fetch backend status regularly\r\n\t\t\t*\r\n\t\t\t*/\r\n\t\t\tcommit('SET_TIMER', {\r\n\t\t\t\ttimer: setInterval(async () => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tawait dispatch('setStatusState')\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tconsole.error(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 5000)\r\n\t\t\t})\r\n\r\n\t\t\tawait dispatch(\r\n\t\t\t\t'setStatusState')\r\n\r\n\t\t\tconsole.log('Vuex nodule: common.starport initialized!')\r\n\t\t}\r\n\t}\r\n}\r\n"],"file":"starport.js"}