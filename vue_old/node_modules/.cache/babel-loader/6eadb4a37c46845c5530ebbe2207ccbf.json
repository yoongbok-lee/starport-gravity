{"remainingRequest":"/home/ubuntu/starport-gravity/vue/node_modules/babel-loader/lib/index.js!/home/ubuntu/starport-gravity/vue/src/store/generated/cosmos/cosmos-sdk/cosmos.base.abci.v1beta1/module/types/tendermint/abci/types.js","dependencies":[{"path":"/home/ubuntu/starport-gravity/vue/src/store/generated/cosmos/cosmos-sdk/cosmos.base.abci.v1beta1/module/types/tendermint/abci/types.js","mtime":1620801165459},{"path":"/home/ubuntu/starport-gravity/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ubuntu/starport-gravity/vue/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvaG9tZS91YnVudHUvc3RhcnBvcnQtZ3Jhdml0eS92dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvaG9tZS91YnVudHUvc3RhcnBvcnQtZ3Jhdml0eS92dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL3VidW50dS9zdGFycG9ydC1ncmF2aXR5L3Z1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL3VidW50dS9zdGFycG9ydC1ncmF2aXR5L3Z1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnVpbnQ4LWFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuY29weS13aXRoaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5ldmVyeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lmxhc3QtaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UtcmlnaHQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZXZlcnNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2V0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb21lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnN1YmFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tbG9jYWxlLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLnRvLWpzb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLnRvLWpzb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLnRvLWlzby1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLm1heC1zYWZlLWludGVnZXIuanMiOwoKLyogZXNsaW50LWRpc2FibGUgKi8KaW1wb3J0IHsgUmVhZGVyLCB1dGlsLCBjb25maWd1cmUsIFdyaXRlciB9IGZyb20gInByb3RvYnVmanMvbWluaW1hbCI7CmltcG9ydCB7IFRpbWVzdGFtcCB9IGZyb20gIi4uLy4uL2dvb2dsZS9wcm90b2J1Zi90aW1lc3RhbXAiOwppbXBvcnQgKiBhcyBMb25nIGZyb20gImxvbmciOwppbXBvcnQgeyBIZWFkZXIgfSBmcm9tICIuLi8uLi90ZW5kZXJtaW50L3R5cGVzL3R5cGVzIjsKaW1wb3J0IHsgUHJvb2ZPcHMgfSBmcm9tICIuLi8uLi90ZW5kZXJtaW50L2NyeXB0by9wcm9vZiI7CmltcG9ydCB7IEV2aWRlbmNlUGFyYW1zLCBWYWxpZGF0b3JQYXJhbXMsIFZlcnNpb25QYXJhbXMgfSBmcm9tICIuLi8uLi90ZW5kZXJtaW50L3R5cGVzL3BhcmFtcyI7CmltcG9ydCB7IFB1YmxpY0tleSB9IGZyb20gIi4uLy4uL3RlbmRlcm1pbnQvY3J5cHRvL2tleXMiOwpleHBvcnQgdmFyIHByb3RvYnVmUGFja2FnZSA9ICJ0ZW5kZXJtaW50LmFiY2kiOwpleHBvcnQgdmFyIENoZWNrVHhUeXBlOwoKKGZ1bmN0aW9uIChDaGVja1R4VHlwZSkgewogIENoZWNrVHhUeXBlW0NoZWNrVHhUeXBlWyJORVciXSA9IDBdID0gIk5FVyI7CiAgQ2hlY2tUeFR5cGVbQ2hlY2tUeFR5cGVbIlJFQ0hFQ0siXSA9IDFdID0gIlJFQ0hFQ0siOwogIENoZWNrVHhUeXBlW0NoZWNrVHhUeXBlWyJVTlJFQ09HTklaRUQiXSA9IC0xXSA9ICJVTlJFQ09HTklaRUQiOwp9KShDaGVja1R4VHlwZSB8fCAoQ2hlY2tUeFR5cGUgPSB7fSkpOwoKZXhwb3J0IGZ1bmN0aW9uIGNoZWNrVHhUeXBlRnJvbUpTT04ob2JqZWN0KSB7CiAgc3dpdGNoIChvYmplY3QpIHsKICAgIGNhc2UgMDoKICAgIGNhc2UgIk5FVyI6CiAgICAgIHJldHVybiBDaGVja1R4VHlwZS5ORVc7CgogICAgY2FzZSAxOgogICAgY2FzZSAiUkVDSEVDSyI6CiAgICAgIHJldHVybiBDaGVja1R4VHlwZS5SRUNIRUNLOwoKICAgIGNhc2UgLTE6CiAgICBjYXNlICJVTlJFQ09HTklaRUQiOgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIENoZWNrVHhUeXBlLlVOUkVDT0dOSVpFRDsKICB9Cn0KZXhwb3J0IGZ1bmN0aW9uIGNoZWNrVHhUeXBlVG9KU09OKG9iamVjdCkgewogIHN3aXRjaCAob2JqZWN0KSB7CiAgICBjYXNlIENoZWNrVHhUeXBlLk5FVzoKICAgICAgcmV0dXJuICJORVciOwoKICAgIGNhc2UgQ2hlY2tUeFR5cGUuUkVDSEVDSzoKICAgICAgcmV0dXJuICJSRUNIRUNLIjsKCiAgICBkZWZhdWx0OgogICAgICByZXR1cm4gIlVOS05PV04iOwogIH0KfQpleHBvcnQgdmFyIEV2aWRlbmNlVHlwZTsKCihmdW5jdGlvbiAoRXZpZGVuY2VUeXBlKSB7CiAgRXZpZGVuY2VUeXBlW0V2aWRlbmNlVHlwZVsiVU5LTk9XTiJdID0gMF0gPSAiVU5LTk9XTiI7CiAgRXZpZGVuY2VUeXBlW0V2aWRlbmNlVHlwZVsiRFVQTElDQVRFX1ZPVEUiXSA9IDFdID0gIkRVUExJQ0FURV9WT1RFIjsKICBFdmlkZW5jZVR5cGVbRXZpZGVuY2VUeXBlWyJMSUdIVF9DTElFTlRfQVRUQUNLIl0gPSAyXSA9ICJMSUdIVF9DTElFTlRfQVRUQUNLIjsKICBFdmlkZW5jZVR5cGVbRXZpZGVuY2VUeXBlWyJVTlJFQ09HTklaRUQiXSA9IC0xXSA9ICJVTlJFQ09HTklaRUQiOwp9KShFdmlkZW5jZVR5cGUgfHwgKEV2aWRlbmNlVHlwZSA9IHt9KSk7CgpleHBvcnQgZnVuY3Rpb24gZXZpZGVuY2VUeXBlRnJvbUpTT04ob2JqZWN0KSB7CiAgc3dpdGNoIChvYmplY3QpIHsKICAgIGNhc2UgMDoKICAgIGNhc2UgIlVOS05PV04iOgogICAgICByZXR1cm4gRXZpZGVuY2VUeXBlLlVOS05PV047CgogICAgY2FzZSAxOgogICAgY2FzZSAiRFVQTElDQVRFX1ZPVEUiOgogICAgICByZXR1cm4gRXZpZGVuY2VUeXBlLkRVUExJQ0FURV9WT1RFOwoKICAgIGNhc2UgMjoKICAgIGNhc2UgIkxJR0hUX0NMSUVOVF9BVFRBQ0siOgogICAgICByZXR1cm4gRXZpZGVuY2VUeXBlLkxJR0hUX0NMSUVOVF9BVFRBQ0s7CgogICAgY2FzZSAtMToKICAgIGNhc2UgIlVOUkVDT0dOSVpFRCI6CiAgICBkZWZhdWx0OgogICAgICByZXR1cm4gRXZpZGVuY2VUeXBlLlVOUkVDT0dOSVpFRDsKICB9Cn0KZXhwb3J0IGZ1bmN0aW9uIGV2aWRlbmNlVHlwZVRvSlNPTihvYmplY3QpIHsKICBzd2l0Y2ggKG9iamVjdCkgewogICAgY2FzZSBFdmlkZW5jZVR5cGUuVU5LTk9XTjoKICAgICAgcmV0dXJuICJVTktOT1dOIjsKCiAgICBjYXNlIEV2aWRlbmNlVHlwZS5EVVBMSUNBVEVfVk9URToKICAgICAgcmV0dXJuICJEVVBMSUNBVEVfVk9URSI7CgogICAgY2FzZSBFdmlkZW5jZVR5cGUuTElHSFRfQ0xJRU5UX0FUVEFDSzoKICAgICAgcmV0dXJuICJMSUdIVF9DTElFTlRfQVRUQUNLIjsKCiAgICBkZWZhdWx0OgogICAgICByZXR1cm4gIlVOS05PV04iOwogIH0KfQpleHBvcnQgdmFyIFJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHQ7CgooZnVuY3Rpb24gKFJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHQpIHsKICAvKiogVU5LTk9XTiAtIFVua25vd24gcmVzdWx0LCBhYm9ydCBhbGwgc25hcHNob3QgcmVzdG9yYXRpb24gKi8KICBSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0W1Jlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHRbIlVOS05PV04iXSA9IDBdID0gIlVOS05PV04iOwogIC8qKiBBQ0NFUFQgLSBTbmFwc2hvdCBhY2NlcHRlZCwgYXBwbHkgY2h1bmtzICovCgogIFJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHRbUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdFsiQUNDRVBUIl0gPSAxXSA9ICJBQ0NFUFQiOwogIC8qKiBBQk9SVCAtIEFib3J0IGFsbCBzbmFwc2hvdCByZXN0b3JhdGlvbiAqLwoKICBSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0W1Jlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHRbIkFCT1JUIl0gPSAyXSA9ICJBQk9SVCI7CiAgLyoqIFJFSkVDVCAtIFJlamVjdCB0aGlzIHNwZWNpZmljIHNuYXBzaG90LCB0cnkgb3RoZXJzICovCgogIFJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHRbUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdFsiUkVKRUNUIl0gPSAzXSA9ICJSRUpFQ1QiOwogIC8qKiBSRUpFQ1RfRk9STUFUIC0gUmVqZWN0IGFsbCBzbmFwc2hvdHMgb2YgdGhpcyBmb3JtYXQsIHRyeSBvdGhlcnMgKi8KCiAgUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdFtSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0WyJSRUpFQ1RfRk9STUFUIl0gPSA0XSA9ICJSRUpFQ1RfRk9STUFUIjsKICAvKiogUkVKRUNUX1NFTkRFUiAtIFJlamVjdCBhbGwgc25hcHNob3RzIGZyb20gdGhlIHNlbmRlcihzKSwgdHJ5IG90aGVycyAqLwoKICBSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0W1Jlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHRbIlJFSkVDVF9TRU5ERVIiXSA9IDVdID0gIlJFSkVDVF9TRU5ERVIiOwogIFJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHRbUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdFsiVU5SRUNPR05JWkVEIl0gPSAtMV0gPSAiVU5SRUNPR05JWkVEIjsKfSkoUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdCB8fCAoUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdCA9IHt9KSk7CgpleHBvcnQgZnVuY3Rpb24gcmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdEZyb21KU09OKG9iamVjdCkgewogIHN3aXRjaCAob2JqZWN0KSB7CiAgICBjYXNlIDA6CiAgICBjYXNlICJVTktOT1dOIjoKICAgICAgcmV0dXJuIFJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHQuVU5LTk9XTjsKCiAgICBjYXNlIDE6CiAgICBjYXNlICJBQ0NFUFQiOgogICAgICByZXR1cm4gUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdC5BQ0NFUFQ7CgogICAgY2FzZSAyOgogICAgY2FzZSAiQUJPUlQiOgogICAgICByZXR1cm4gUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdC5BQk9SVDsKCiAgICBjYXNlIDM6CiAgICBjYXNlICJSRUpFQ1QiOgogICAgICByZXR1cm4gUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdC5SRUpFQ1Q7CgogICAgY2FzZSA0OgogICAgY2FzZSAiUkVKRUNUX0ZPUk1BVCI6CiAgICAgIHJldHVybiBSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0LlJFSkVDVF9GT1JNQVQ7CgogICAgY2FzZSA1OgogICAgY2FzZSAiUkVKRUNUX1NFTkRFUiI6CiAgICAgIHJldHVybiBSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0LlJFSkVDVF9TRU5ERVI7CgogICAgY2FzZSAtMToKICAgIGNhc2UgIlVOUkVDT0dOSVpFRCI6CiAgICBkZWZhdWx0OgogICAgICByZXR1cm4gUmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdC5VTlJFQ09HTklaRUQ7CiAgfQp9CmV4cG9ydCBmdW5jdGlvbiByZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0VG9KU09OKG9iamVjdCkgewogIHN3aXRjaCAob2JqZWN0KSB7CiAgICBjYXNlIFJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHQuVU5LTk9XTjoKICAgICAgcmV0dXJuICJVTktOT1dOIjsKCiAgICBjYXNlIFJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHQuQUNDRVBUOgogICAgICByZXR1cm4gIkFDQ0VQVCI7CgogICAgY2FzZSBSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0LkFCT1JUOgogICAgICByZXR1cm4gIkFCT1JUIjsKCiAgICBjYXNlIFJlc3BvbnNlT2ZmZXJTbmFwc2hvdF9SZXN1bHQuUkVKRUNUOgogICAgICByZXR1cm4gIlJFSkVDVCI7CgogICAgY2FzZSBSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0LlJFSkVDVF9GT1JNQVQ6CiAgICAgIHJldHVybiAiUkVKRUNUX0ZPUk1BVCI7CgogICAgY2FzZSBSZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0LlJFSkVDVF9TRU5ERVI6CiAgICAgIHJldHVybiAiUkVKRUNUX1NFTkRFUiI7CgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuICJVTktOT1dOIjsKICB9Cn0KZXhwb3J0IHZhciBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHQ7CgooZnVuY3Rpb24gKFJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdCkgewogIC8qKiBVTktOT1dOIC0gVW5rbm93biByZXN1bHQsIGFib3J0IGFsbCBzbmFwc2hvdCByZXN0b3JhdGlvbiAqLwogIFJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdFtSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHRbIlVOS05PV04iXSA9IDBdID0gIlVOS05PV04iOwogIC8qKiBBQ0NFUFQgLSBDaHVuayBzdWNjZXNzZnVsbHkgYWNjZXB0ZWQgKi8KCiAgUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0W1Jlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdFsiQUNDRVBUIl0gPSAxXSA9ICJBQ0NFUFQiOwogIC8qKiBBQk9SVCAtIEFib3J0IGFsbCBzbmFwc2hvdCByZXN0b3JhdGlvbiAqLwoKICBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHRbUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0WyJBQk9SVCJdID0gMl0gPSAiQUJPUlQiOwogIC8qKiBSRVRSWSAtIFJldHJ5IGNodW5rIChjb21iaW5lIHdpdGggcmVmZXRjaCBhbmQgcmVqZWN0KSAqLwoKICBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHRbUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0WyJSRVRSWSJdID0gM10gPSAiUkVUUlkiOwogIC8qKiBSRVRSWV9TTkFQU0hPVCAtIFJldHJ5IHNuYXBzaG90IChjb21iaW5lIHdpdGggcmVmZXRjaCBhbmQgcmVqZWN0KSAqLwoKICBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHRbUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0WyJSRVRSWV9TTkFQU0hPVCJdID0gNF0gPSAiUkVUUllfU05BUFNIT1QiOwogIC8qKiBSRUpFQ1RfU05BUFNIT1QgLSBSZWplY3QgdGhpcyBzbmFwc2hvdCwgdHJ5IG90aGVycyAqLwoKICBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHRbUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0WyJSRUpFQ1RfU05BUFNIT1QiXSA9IDVdID0gIlJFSkVDVF9TTkFQU0hPVCI7CiAgUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0W1Jlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdFsiVU5SRUNPR05JWkVEIl0gPSAtMV0gPSAiVU5SRUNPR05JWkVEIjsKfSkoUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0IHx8IChSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHQgPSB7fSkpOwoKZXhwb3J0IGZ1bmN0aW9uIHJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdEZyb21KU09OKG9iamVjdCkgewogIHN3aXRjaCAob2JqZWN0KSB7CiAgICBjYXNlIDA6CiAgICBjYXNlICJVTktOT1dOIjoKICAgICAgcmV0dXJuIFJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdC5VTktOT1dOOwoKICAgIGNhc2UgMToKICAgIGNhc2UgIkFDQ0VQVCI6CiAgICAgIHJldHVybiBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHQuQUNDRVBUOwoKICAgIGNhc2UgMjoKICAgIGNhc2UgIkFCT1JUIjoKICAgICAgcmV0dXJuIFJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdC5BQk9SVDsKCiAgICBjYXNlIDM6CiAgICBjYXNlICJSRVRSWSI6CiAgICAgIHJldHVybiBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHQuUkVUUlk7CgogICAgY2FzZSA0OgogICAgY2FzZSAiUkVUUllfU05BUFNIT1QiOgogICAgICByZXR1cm4gUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0LlJFVFJZX1NOQVBTSE9UOwoKICAgIGNhc2UgNToKICAgIGNhc2UgIlJFSkVDVF9TTkFQU0hPVCI6CiAgICAgIHJldHVybiBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHQuUkVKRUNUX1NOQVBTSE9UOwoKICAgIGNhc2UgLTE6CiAgICBjYXNlICJVTlJFQ09HTklaRUQiOgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIFJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdC5VTlJFQ09HTklaRUQ7CiAgfQp9CmV4cG9ydCBmdW5jdGlvbiByZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHRUb0pTT04ob2JqZWN0KSB7CiAgc3dpdGNoIChvYmplY3QpIHsKICAgIGNhc2UgUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0LlVOS05PV046CiAgICAgIHJldHVybiAiVU5LTk9XTiI7CgogICAgY2FzZSBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHQuQUNDRVBUOgogICAgICByZXR1cm4gIkFDQ0VQVCI7CgogICAgY2FzZSBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHQuQUJPUlQ6CiAgICAgIHJldHVybiAiQUJPUlQiOwoKICAgIGNhc2UgUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0LlJFVFJZOgogICAgICByZXR1cm4gIlJFVFJZIjsKCiAgICBjYXNlIFJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdC5SRVRSWV9TTkFQU0hPVDoKICAgICAgcmV0dXJuICJSRVRSWV9TTkFQU0hPVCI7CgogICAgY2FzZSBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVua19SZXN1bHQuUkVKRUNUX1NOQVBTSE9UOgogICAgICByZXR1cm4gIlJFSkVDVF9TTkFQU0hPVCI7CgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuICJVTktOT1dOIjsKICB9Cn0KdmFyIGJhc2VSZXF1ZXN0ID0ge307CmV4cG9ydCB2YXIgUmVxdWVzdCA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UuZWNobyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlcXVlc3RFY2hvLmVuY29kZShtZXNzYWdlLmVjaG8sIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuZmx1c2ggIT09IHVuZGVmaW5lZCkgewogICAgICBSZXF1ZXN0Rmx1c2guZW5jb2RlKG1lc3NhZ2UuZmx1c2gsIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuaW5mbyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlcXVlc3RJbmZvLmVuY29kZShtZXNzYWdlLmluZm8sIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2Uuc2V0T3B0aW9uICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVxdWVzdFNldE9wdGlvbi5lbmNvZGUobWVzc2FnZS5zZXRPcHRpb24sIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuaW5pdENoYWluICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVxdWVzdEluaXRDaGFpbi5lbmNvZGUobWVzc2FnZS5pbml0Q2hhaW4sIHdyaXRlci51aW50MzIoNDIpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UucXVlcnkgIT09IHVuZGVmaW5lZCkgewogICAgICBSZXF1ZXN0UXVlcnkuZW5jb2RlKG1lc3NhZ2UucXVlcnksIHdyaXRlci51aW50MzIoNTApLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuYmVnaW5CbG9jayAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlcXVlc3RCZWdpbkJsb2NrLmVuY29kZShtZXNzYWdlLmJlZ2luQmxvY2ssIHdyaXRlci51aW50MzIoNTgpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuY2hlY2tUeCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlcXVlc3RDaGVja1R4LmVuY29kZShtZXNzYWdlLmNoZWNrVHgsIHdyaXRlci51aW50MzIoNjYpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuZGVsaXZlclR4ICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVxdWVzdERlbGl2ZXJUeC5lbmNvZGUobWVzc2FnZS5kZWxpdmVyVHgsIHdyaXRlci51aW50MzIoNzQpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuZW5kQmxvY2sgIT09IHVuZGVmaW5lZCkgewogICAgICBSZXF1ZXN0RW5kQmxvY2suZW5jb2RlKG1lc3NhZ2UuZW5kQmxvY2ssIHdyaXRlci51aW50MzIoODIpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuY29tbWl0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVxdWVzdENvbW1pdC5lbmNvZGUobWVzc2FnZS5jb21taXQsIHdyaXRlci51aW50MzIoOTApLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UubGlzdFNuYXBzaG90cyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlcXVlc3RMaXN0U25hcHNob3RzLmVuY29kZShtZXNzYWdlLmxpc3RTbmFwc2hvdHMsIHdyaXRlci51aW50MzIoOTgpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2Uub2ZmZXJTbmFwc2hvdCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlcXVlc3RPZmZlclNuYXBzaG90LmVuY29kZShtZXNzYWdlLm9mZmVyU25hcHNob3QsIHdyaXRlci51aW50MzIoMTA2KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmxvYWRTbmFwc2hvdENodW5rICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVxdWVzdExvYWRTbmFwc2hvdENodW5rLmVuY29kZShtZXNzYWdlLmxvYWRTbmFwc2hvdENodW5rLCB3cml0ZXIudWludDMyKDExNCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5hcHBseVNuYXBzaG90Q2h1bmsgIT09IHVuZGVmaW5lZCkgewogICAgICBSZXF1ZXN0QXBwbHlTbmFwc2hvdENodW5rLmVuY29kZShtZXNzYWdlLmFwcGx5U25hcHNob3RDaHVuaywgd3JpdGVyLnVpbnQzMigxMjIpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdCk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5lY2hvID0gUmVxdWVzdEVjaG8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLmZsdXNoID0gUmVxdWVzdEZsdXNoLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5pbmZvID0gUmVxdWVzdEluZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBtZXNzYWdlLnNldE9wdGlvbiA9IFJlcXVlc3RTZXRPcHRpb24uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDU6CiAgICAgICAgICBtZXNzYWdlLmluaXRDaGFpbiA9IFJlcXVlc3RJbml0Q2hhaW4uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDY6CiAgICAgICAgICBtZXNzYWdlLnF1ZXJ5ID0gUmVxdWVzdFF1ZXJ5LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgbWVzc2FnZS5iZWdpbkJsb2NrID0gUmVxdWVzdEJlZ2luQmxvY2suZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDg6CiAgICAgICAgICBtZXNzYWdlLmNoZWNrVHggPSBSZXF1ZXN0Q2hlY2tUeC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgOToKICAgICAgICAgIG1lc3NhZ2UuZGVsaXZlclR4ID0gUmVxdWVzdERlbGl2ZXJUeC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBtZXNzYWdlLmVuZEJsb2NrID0gUmVxdWVzdEVuZEJsb2NrLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAxMToKICAgICAgICAgIG1lc3NhZ2UuY29tbWl0ID0gUmVxdWVzdENvbW1pdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMTI6CiAgICAgICAgICBtZXNzYWdlLmxpc3RTbmFwc2hvdHMgPSBSZXF1ZXN0TGlzdFNuYXBzaG90cy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMTM6CiAgICAgICAgICBtZXNzYWdlLm9mZmVyU25hcHNob3QgPSBSZXF1ZXN0T2ZmZXJTbmFwc2hvdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICBtZXNzYWdlLmxvYWRTbmFwc2hvdENodW5rID0gUmVxdWVzdExvYWRTbmFwc2hvdENodW5rLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAxNToKICAgICAgICAgIG1lc3NhZ2UuYXBwbHlTbmFwc2hvdENodW5rID0gUmVxdWVzdEFwcGx5U25hcHNob3RDaHVuay5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdCk7CgogICAgaWYgKG9iamVjdC5lY2hvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmVjaG8gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5lY2hvID0gUmVxdWVzdEVjaG8uZnJvbUpTT04ob2JqZWN0LmVjaG8pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5lY2hvID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuZmx1c2ggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZmx1c2ggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5mbHVzaCA9IFJlcXVlc3RGbHVzaC5mcm9tSlNPTihvYmplY3QuZmx1c2gpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5mbHVzaCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluZm8gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5mbyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluZm8gPSBSZXF1ZXN0SW5mby5mcm9tSlNPTihvYmplY3QuaW5mbyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluZm8gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5zZXRPcHRpb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc2V0T3B0aW9uICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2Uuc2V0T3B0aW9uID0gUmVxdWVzdFNldE9wdGlvbi5mcm9tSlNPTihvYmplY3Quc2V0T3B0aW9uKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2Uuc2V0T3B0aW9uID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuaW5pdENoYWluICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluaXRDaGFpbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluaXRDaGFpbiA9IFJlcXVlc3RJbml0Q2hhaW4uZnJvbUpTT04ob2JqZWN0LmluaXRDaGFpbik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluaXRDaGFpbiA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnF1ZXJ5ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnF1ZXJ5ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucXVlcnkgPSBSZXF1ZXN0UXVlcnkuZnJvbUpTT04ob2JqZWN0LnF1ZXJ5KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UucXVlcnkgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5iZWdpbkJsb2NrICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmJlZ2luQmxvY2sgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5iZWdpbkJsb2NrID0gUmVxdWVzdEJlZ2luQmxvY2suZnJvbUpTT04ob2JqZWN0LmJlZ2luQmxvY2spOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5iZWdpbkJsb2NrID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuY2hlY2tUeCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jaGVja1R4ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY2hlY2tUeCA9IFJlcXVlc3RDaGVja1R4LmZyb21KU09OKG9iamVjdC5jaGVja1R4KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY2hlY2tUeCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmRlbGl2ZXJUeCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kZWxpdmVyVHggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5kZWxpdmVyVHggPSBSZXF1ZXN0RGVsaXZlclR4LmZyb21KU09OKG9iamVjdC5kZWxpdmVyVHgpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5kZWxpdmVyVHggPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5lbmRCbG9jayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5lbmRCbG9jayAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmVuZEJsb2NrID0gUmVxdWVzdEVuZEJsb2NrLmZyb21KU09OKG9iamVjdC5lbmRCbG9jayk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmVuZEJsb2NrID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuY29tbWl0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNvbW1pdCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNvbW1pdCA9IFJlcXVlc3RDb21taXQuZnJvbUpTT04ob2JqZWN0LmNvbW1pdCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNvbW1pdCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0Lmxpc3RTbmFwc2hvdHMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubGlzdFNuYXBzaG90cyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmxpc3RTbmFwc2hvdHMgPSBSZXF1ZXN0TGlzdFNuYXBzaG90cy5mcm9tSlNPTihvYmplY3QubGlzdFNuYXBzaG90cyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmxpc3RTbmFwc2hvdHMgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5vZmZlclNuYXBzaG90ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm9mZmVyU25hcHNob3QgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5vZmZlclNuYXBzaG90ID0gUmVxdWVzdE9mZmVyU25hcHNob3QuZnJvbUpTT04ob2JqZWN0Lm9mZmVyU25hcHNob3QpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5vZmZlclNuYXBzaG90ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QubG9hZFNuYXBzaG90Q2h1bmsgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubG9hZFNuYXBzaG90Q2h1bmsgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5sb2FkU25hcHNob3RDaHVuayA9IFJlcXVlc3RMb2FkU25hcHNob3RDaHVuay5mcm9tSlNPTihvYmplY3QubG9hZFNuYXBzaG90Q2h1bmspOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5sb2FkU25hcHNob3RDaHVuayA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmFwcGx5U25hcHNob3RDaHVuayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hcHBseVNuYXBzaG90Q2h1bmsgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5hcHBseVNuYXBzaG90Q2h1bmsgPSBSZXF1ZXN0QXBwbHlTbmFwc2hvdENodW5rLmZyb21KU09OKG9iamVjdC5hcHBseVNuYXBzaG90Q2h1bmspOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5hcHBseVNuYXBzaG90Q2h1bmsgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmVjaG8gIT09IHVuZGVmaW5lZCAmJiAob2JqLmVjaG8gPSBtZXNzYWdlLmVjaG8gPyBSZXF1ZXN0RWNoby50b0pTT04obWVzc2FnZS5lY2hvKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmZsdXNoICE9PSB1bmRlZmluZWQgJiYgKG9iai5mbHVzaCA9IG1lc3NhZ2UuZmx1c2ggPyBSZXF1ZXN0Rmx1c2gudG9KU09OKG1lc3NhZ2UuZmx1c2gpIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UuaW5mbyAhPT0gdW5kZWZpbmVkICYmIChvYmouaW5mbyA9IG1lc3NhZ2UuaW5mbyA/IFJlcXVlc3RJbmZvLnRvSlNPTihtZXNzYWdlLmluZm8pIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2Uuc2V0T3B0aW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai5zZXRPcHRpb24gPSBtZXNzYWdlLnNldE9wdGlvbiA/IFJlcXVlc3RTZXRPcHRpb24udG9KU09OKG1lc3NhZ2Uuc2V0T3B0aW9uKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmluaXRDaGFpbiAhPT0gdW5kZWZpbmVkICYmIChvYmouaW5pdENoYWluID0gbWVzc2FnZS5pbml0Q2hhaW4gPyBSZXF1ZXN0SW5pdENoYWluLnRvSlNPTihtZXNzYWdlLmluaXRDaGFpbikgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5xdWVyeSAhPT0gdW5kZWZpbmVkICYmIChvYmoucXVlcnkgPSBtZXNzYWdlLnF1ZXJ5ID8gUmVxdWVzdFF1ZXJ5LnRvSlNPTihtZXNzYWdlLnF1ZXJ5KSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmJlZ2luQmxvY2sgIT09IHVuZGVmaW5lZCAmJiAob2JqLmJlZ2luQmxvY2sgPSBtZXNzYWdlLmJlZ2luQmxvY2sgPyBSZXF1ZXN0QmVnaW5CbG9jay50b0pTT04obWVzc2FnZS5iZWdpbkJsb2NrKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmNoZWNrVHggIT09IHVuZGVmaW5lZCAmJiAob2JqLmNoZWNrVHggPSBtZXNzYWdlLmNoZWNrVHggPyBSZXF1ZXN0Q2hlY2tUeC50b0pTT04obWVzc2FnZS5jaGVja1R4KSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmRlbGl2ZXJUeCAhPT0gdW5kZWZpbmVkICYmIChvYmouZGVsaXZlclR4ID0gbWVzc2FnZS5kZWxpdmVyVHggPyBSZXF1ZXN0RGVsaXZlclR4LnRvSlNPTihtZXNzYWdlLmRlbGl2ZXJUeCkgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5lbmRCbG9jayAhPT0gdW5kZWZpbmVkICYmIChvYmouZW5kQmxvY2sgPSBtZXNzYWdlLmVuZEJsb2NrID8gUmVxdWVzdEVuZEJsb2NrLnRvSlNPTihtZXNzYWdlLmVuZEJsb2NrKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmNvbW1pdCAhPT0gdW5kZWZpbmVkICYmIChvYmouY29tbWl0ID0gbWVzc2FnZS5jb21taXQgPyBSZXF1ZXN0Q29tbWl0LnRvSlNPTihtZXNzYWdlLmNvbW1pdCkgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5saXN0U25hcHNob3RzICE9PSB1bmRlZmluZWQgJiYgKG9iai5saXN0U25hcHNob3RzID0gbWVzc2FnZS5saXN0U25hcHNob3RzID8gUmVxdWVzdExpc3RTbmFwc2hvdHMudG9KU09OKG1lc3NhZ2UubGlzdFNuYXBzaG90cykgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5vZmZlclNuYXBzaG90ICE9PSB1bmRlZmluZWQgJiYgKG9iai5vZmZlclNuYXBzaG90ID0gbWVzc2FnZS5vZmZlclNuYXBzaG90ID8gUmVxdWVzdE9mZmVyU25hcHNob3QudG9KU09OKG1lc3NhZ2Uub2ZmZXJTbmFwc2hvdCkgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5sb2FkU25hcHNob3RDaHVuayAhPT0gdW5kZWZpbmVkICYmIChvYmoubG9hZFNuYXBzaG90Q2h1bmsgPSBtZXNzYWdlLmxvYWRTbmFwc2hvdENodW5rID8gUmVxdWVzdExvYWRTbmFwc2hvdENodW5rLnRvSlNPTihtZXNzYWdlLmxvYWRTbmFwc2hvdENodW5rKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmFwcGx5U25hcHNob3RDaHVuayAhPT0gdW5kZWZpbmVkICYmIChvYmouYXBwbHlTbmFwc2hvdENodW5rID0gbWVzc2FnZS5hcHBseVNuYXBzaG90Q2h1bmsgPyBSZXF1ZXN0QXBwbHlTbmFwc2hvdENodW5rLnRvSlNPTihtZXNzYWdlLmFwcGx5U25hcHNob3RDaHVuaykgOiB1bmRlZmluZWQpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3QpOwoKICAgIGlmIChvYmplY3QuZWNobyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5lY2hvICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZWNobyA9IFJlcXVlc3RFY2hvLmZyb21QYXJ0aWFsKG9iamVjdC5lY2hvKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZWNobyA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmZsdXNoICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmZsdXNoICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZmx1c2ggPSBSZXF1ZXN0Rmx1c2guZnJvbVBhcnRpYWwob2JqZWN0LmZsdXNoKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZmx1c2ggPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbmZvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluZm8gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbmZvID0gUmVxdWVzdEluZm8uZnJvbVBhcnRpYWwob2JqZWN0LmluZm8pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5pbmZvID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3Quc2V0T3B0aW9uICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNldE9wdGlvbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnNldE9wdGlvbiA9IFJlcXVlc3RTZXRPcHRpb24uZnJvbVBhcnRpYWwob2JqZWN0LnNldE9wdGlvbik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnNldE9wdGlvbiA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluaXRDaGFpbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbml0Q2hhaW4gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbml0Q2hhaW4gPSBSZXF1ZXN0SW5pdENoYWluLmZyb21QYXJ0aWFsKG9iamVjdC5pbml0Q2hhaW4pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5pbml0Q2hhaW4gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5xdWVyeSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5xdWVyeSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnF1ZXJ5ID0gUmVxdWVzdFF1ZXJ5LmZyb21QYXJ0aWFsKG9iamVjdC5xdWVyeSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnF1ZXJ5ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuYmVnaW5CbG9jayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5iZWdpbkJsb2NrICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYmVnaW5CbG9jayA9IFJlcXVlc3RCZWdpbkJsb2NrLmZyb21QYXJ0aWFsKG9iamVjdC5iZWdpbkJsb2NrKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYmVnaW5CbG9jayA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNoZWNrVHggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY2hlY2tUeCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNoZWNrVHggPSBSZXF1ZXN0Q2hlY2tUeC5mcm9tUGFydGlhbChvYmplY3QuY2hlY2tUeCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNoZWNrVHggPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5kZWxpdmVyVHggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZGVsaXZlclR4ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGVsaXZlclR4ID0gUmVxdWVzdERlbGl2ZXJUeC5mcm9tUGFydGlhbChvYmplY3QuZGVsaXZlclR4KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZGVsaXZlclR4ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuZW5kQmxvY2sgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZW5kQmxvY2sgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5lbmRCbG9jayA9IFJlcXVlc3RFbmRCbG9jay5mcm9tUGFydGlhbChvYmplY3QuZW5kQmxvY2spOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5lbmRCbG9jayA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNvbW1pdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb21taXQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb21taXQgPSBSZXF1ZXN0Q29tbWl0LmZyb21QYXJ0aWFsKG9iamVjdC5jb21taXQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb21taXQgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5saXN0U25hcHNob3RzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lmxpc3RTbmFwc2hvdHMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5saXN0U25hcHNob3RzID0gUmVxdWVzdExpc3RTbmFwc2hvdHMuZnJvbVBhcnRpYWwob2JqZWN0Lmxpc3RTbmFwc2hvdHMpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5saXN0U25hcHNob3RzID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3Qub2ZmZXJTbmFwc2hvdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5vZmZlclNuYXBzaG90ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2Uub2ZmZXJTbmFwc2hvdCA9IFJlcXVlc3RPZmZlclNuYXBzaG90LmZyb21QYXJ0aWFsKG9iamVjdC5vZmZlclNuYXBzaG90KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2Uub2ZmZXJTbmFwc2hvdCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmxvYWRTbmFwc2hvdENodW5rICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmxvYWRTbmFwc2hvdENodW5rICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubG9hZFNuYXBzaG90Q2h1bmsgPSBSZXF1ZXN0TG9hZFNuYXBzaG90Q2h1bmsuZnJvbVBhcnRpYWwob2JqZWN0LmxvYWRTbmFwc2hvdENodW5rKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubG9hZFNuYXBzaG90Q2h1bmsgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5hcHBseVNuYXBzaG90Q2h1bmsgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYXBwbHlTbmFwc2hvdENodW5rICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYXBwbHlTbmFwc2hvdENodW5rID0gUmVxdWVzdEFwcGx5U25hcHNob3RDaHVuay5mcm9tUGFydGlhbChvYmplY3QuYXBwbHlTbmFwc2hvdENodW5rKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYXBwbHlTbmFwc2hvdENodW5rID0gdW5kZWZpbmVkOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXF1ZXN0RWNobyA9IHsKICBtZXNzYWdlOiAiIgp9OwpleHBvcnQgdmFyIFJlcXVlc3RFY2hvID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5tZXNzYWdlICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5tZXNzYWdlKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0RWNobyk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5tZXNzYWdlID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdEVjaG8pOwoKICAgIGlmIChvYmplY3QubWVzc2FnZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5tZXNzYWdlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubWVzc2FnZSA9IFN0cmluZyhvYmplY3QubWVzc2FnZSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLm1lc3NhZ2UgPSAiIjsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UubWVzc2FnZSAhPT0gdW5kZWZpbmVkICYmIChvYmoubWVzc2FnZSA9IG1lc3NhZ2UubWVzc2FnZSk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdEVjaG8pOwoKICAgIGlmIChvYmplY3QubWVzc2FnZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5tZXNzYWdlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubWVzc2FnZSA9IG9iamVjdC5tZXNzYWdlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5tZXNzYWdlID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlcXVlc3RGbHVzaCA9IHt9OwpleHBvcnQgdmFyIFJlcXVlc3RGbHVzaCA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShfKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0Rmx1c2gpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKF8pIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RGbHVzaCk7CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihfKSB7CiAgICB2YXIgb2JqID0ge307CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKF8pIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RGbHVzaCk7CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlcXVlc3RJbmZvID0gewogIHZlcnNpb246ICIiLAogIGJsb2NrVmVyc2lvbjogMCwKICBwMnBWZXJzaW9uOiAwCn07CmV4cG9ydCB2YXIgUmVxdWVzdEluZm8gPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLnZlcnNpb24gIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLnZlcnNpb24pOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmJsb2NrVmVyc2lvbiAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDE2KS51aW50NjQobWVzc2FnZS5ibG9ja1ZlcnNpb24pOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnAycFZlcnNpb24gIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigyNCkudWludDY0KG1lc3NhZ2UucDJwVmVyc2lvbik7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdEluZm8pOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UudmVyc2lvbiA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLmJsb2NrVmVyc2lvbiA9IGxvbmdUb051bWJlcihyZWFkZXIudWludDY0KCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2UucDJwVmVyc2lvbiA9IGxvbmdUb051bWJlcihyZWFkZXIudWludDY0KCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdEluZm8pOwoKICAgIGlmIChvYmplY3QudmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52ZXJzaW9uICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudmVyc2lvbiA9IFN0cmluZyhvYmplY3QudmVyc2lvbik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnZlcnNpb24gPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LmJsb2NrVmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5ibG9ja1ZlcnNpb24gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5ibG9ja1ZlcnNpb24gPSBOdW1iZXIob2JqZWN0LmJsb2NrVmVyc2lvbik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmJsb2NrVmVyc2lvbiA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5wMnBWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnAycFZlcnNpb24gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5wMnBWZXJzaW9uID0gTnVtYmVyKG9iamVjdC5wMnBWZXJzaW9uKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UucDJwVmVyc2lvbiA9IDA7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLnZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLnZlcnNpb24gPSBtZXNzYWdlLnZlcnNpb24pOwogICAgbWVzc2FnZS5ibG9ja1ZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLmJsb2NrVmVyc2lvbiA9IG1lc3NhZ2UuYmxvY2tWZXJzaW9uKTsKICAgIG1lc3NhZ2UucDJwVmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIChvYmoucDJwVmVyc2lvbiA9IG1lc3NhZ2UucDJwVmVyc2lvbik7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdEluZm8pOwoKICAgIGlmIChvYmplY3QudmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52ZXJzaW9uICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudmVyc2lvbiA9IG9iamVjdC52ZXJzaW9uOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS52ZXJzaW9uID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5ibG9ja1ZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYmxvY2tWZXJzaW9uICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYmxvY2tWZXJzaW9uID0gb2JqZWN0LmJsb2NrVmVyc2lvbjsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYmxvY2tWZXJzaW9uID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnAycFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucDJwVmVyc2lvbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnAycFZlcnNpb24gPSBvYmplY3QucDJwVmVyc2lvbjsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UucDJwVmVyc2lvbiA9IDA7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlcXVlc3RTZXRPcHRpb24gPSB7CiAga2V5OiAiIiwKICB2YWx1ZTogIiIKfTsKZXhwb3J0IHZhciBSZXF1ZXN0U2V0T3B0aW9uID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5rZXkgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLmtleSk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UudmFsdWUgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLnZhbHVlKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0U2V0T3B0aW9uKTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmtleSA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLnZhbHVlID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdFNldE9wdGlvbik7CgogICAgaWYgKG9iamVjdC5rZXkgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Qua2V5ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2Uua2V5ID0gU3RyaW5nKG9iamVjdC5rZXkpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5rZXkgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZhbHVlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZhbHVlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudmFsdWUgPSBTdHJpbmcob2JqZWN0LnZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudmFsdWUgPSAiIjsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2Uua2V5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5rZXkgPSBtZXNzYWdlLmtleSk7CiAgICBtZXNzYWdlLnZhbHVlICE9PSB1bmRlZmluZWQgJiYgKG9iai52YWx1ZSA9IG1lc3NhZ2UudmFsdWUpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RTZXRPcHRpb24pOwoKICAgIGlmIChvYmplY3Qua2V5ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmtleSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmtleSA9IG9iamVjdC5rZXk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmtleSA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QudmFsdWUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsdWUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52YWx1ZSA9IG9iamVjdC52YWx1ZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudmFsdWUgPSAiIjsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVxdWVzdEluaXRDaGFpbiA9IHsKICBjaGFpbklkOiAiIiwKICBpbml0aWFsSGVpZ2h0OiAwCn07CmV4cG9ydCB2YXIgUmVxdWVzdEluaXRDaGFpbiA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UudGltZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFRpbWVzdGFtcC5lbmNvZGUodG9UaW1lc3RhbXAobWVzc2FnZS50aW1lKSwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5jaGFpbklkICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5jaGFpbklkKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5jb25zZW5zdXNQYXJhbXMgIT09IHVuZGVmaW5lZCkgewogICAgICBDb25zZW5zdXNQYXJhbXMuZW5jb2RlKG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1zLCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihtZXNzYWdlLnZhbGlkYXRvcnMpLAogICAgICAgIF9zdGVwOwoKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIHYgPSBfc3RlcC52YWx1ZTsKICAgICAgICBWYWxpZGF0b3JVcGRhdGUuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5hcHBTdGF0ZUJ5dGVzLmxlbmd0aCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDQyKS5ieXRlcyhtZXNzYWdlLmFwcFN0YXRlQnl0ZXMpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmluaXRpYWxIZWlnaHQgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig0OCkuaW50NjQobWVzc2FnZS5pbml0aWFsSGVpZ2h0KTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0SW5pdENoYWluKTsKCiAgICBtZXNzYWdlLnZhbGlkYXRvcnMgPSBbXTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLnRpbWUgPSBmcm9tVGltZXN0YW1wKFRpbWVzdGFtcC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLmNoYWluSWQgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5jb25zZW5zdXNQYXJhbXMgPSBDb25zZW5zdXNQYXJhbXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBtZXNzYWdlLnZhbGlkYXRvcnMucHVzaChWYWxpZGF0b3JVcGRhdGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA1OgogICAgICAgICAgbWVzc2FnZS5hcHBTdGF0ZUJ5dGVzID0gcmVhZGVyLmJ5dGVzKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA2OgogICAgICAgICAgbWVzc2FnZS5pbml0aWFsSGVpZ2h0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RJbml0Q2hhaW4pOwoKICAgIG1lc3NhZ2UudmFsaWRhdG9ycyA9IFtdOwoKICAgIGlmIChvYmplY3QudGltZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50aW1lICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudGltZSA9IGZyb21Kc29uVGltZXN0YW1wKG9iamVjdC50aW1lKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudGltZSA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNoYWluSWQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY2hhaW5JZCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNoYWluSWQgPSBTdHJpbmcob2JqZWN0LmNoYWluSWQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jaGFpbklkID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5jb25zZW5zdXNQYXJhbXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29uc2Vuc3VzUGFyYW1zICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1zID0gQ29uc2Vuc3VzUGFyYW1zLmZyb21KU09OKG9iamVjdC5jb25zZW5zdXNQYXJhbXMpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb25zZW5zdXNQYXJhbXMgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC52YWxpZGF0b3JzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZhbGlkYXRvcnMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3QudmFsaWRhdG9ycyksCiAgICAgICAgICBfc3RlcDI7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZSA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UudmFsaWRhdG9ycy5wdXNoKFZhbGlkYXRvclVwZGF0ZS5mcm9tSlNPTihlKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgfQogICAgfQoKICAgIGlmIChvYmplY3QuYXBwU3RhdGVCeXRlcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hcHBTdGF0ZUJ5dGVzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYXBwU3RhdGVCeXRlcyA9IGJ5dGVzRnJvbUJhc2U2NChvYmplY3QuYXBwU3RhdGVCeXRlcyk7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbml0aWFsSGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluaXRpYWxIZWlnaHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbml0aWFsSGVpZ2h0ID0gTnVtYmVyKG9iamVjdC5pbml0aWFsSGVpZ2h0KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5pdGlhbEhlaWdodCA9IDA7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLnRpbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnRpbWUgPSBtZXNzYWdlLnRpbWUgIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UudGltZS50b0lTT1N0cmluZygpIDogbnVsbCk7CiAgICBtZXNzYWdlLmNoYWluSWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNoYWluSWQgPSBtZXNzYWdlLmNoYWluSWQpOwogICAgbWVzc2FnZS5jb25zZW5zdXNQYXJhbXMgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNvbnNlbnN1c1BhcmFtcyA9IG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1zID8gQ29uc2Vuc3VzUGFyYW1zLnRvSlNPTihtZXNzYWdlLmNvbnNlbnN1c1BhcmFtcykgOiB1bmRlZmluZWQpOwoKICAgIGlmIChtZXNzYWdlLnZhbGlkYXRvcnMpIHsKICAgICAgb2JqLnZhbGlkYXRvcnMgPSBtZXNzYWdlLnZhbGlkYXRvcnMubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUgPyBWYWxpZGF0b3JVcGRhdGUudG9KU09OKGUpIDogdW5kZWZpbmVkOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG9iai52YWxpZGF0b3JzID0gW107CiAgICB9CgogICAgbWVzc2FnZS5hcHBTdGF0ZUJ5dGVzICE9PSB1bmRlZmluZWQgJiYgKG9iai5hcHBTdGF0ZUJ5dGVzID0gYmFzZTY0RnJvbUJ5dGVzKG1lc3NhZ2UuYXBwU3RhdGVCeXRlcyAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS5hcHBTdGF0ZUJ5dGVzIDogbmV3IFVpbnQ4QXJyYXkoKSkpOwogICAgbWVzc2FnZS5pbml0aWFsSGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5pbml0aWFsSGVpZ2h0ID0gbWVzc2FnZS5pbml0aWFsSGVpZ2h0KTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0SW5pdENoYWluKTsKCiAgICBtZXNzYWdlLnZhbGlkYXRvcnMgPSBbXTsKCiAgICBpZiAob2JqZWN0LnRpbWUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudGltZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnRpbWUgPSBvYmplY3QudGltZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudGltZSA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNoYWluSWQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY2hhaW5JZCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNoYWluSWQgPSBvYmplY3QuY2hhaW5JZDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY2hhaW5JZCA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuY29uc2Vuc3VzUGFyYW1zICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNvbnNlbnN1c1BhcmFtcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNvbnNlbnN1c1BhcmFtcyA9IENvbnNlbnN1c1BhcmFtcy5mcm9tUGFydGlhbChvYmplY3QuY29uc2Vuc3VzUGFyYW1zKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1zID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QudmFsaWRhdG9ycyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWxpZGF0b3JzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LnZhbGlkYXRvcnMpLAogICAgICAgICAgX3N0ZXAzOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGUgPSBfc3RlcDMudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLnZhbGlkYXRvcnMucHVzaChWYWxpZGF0b3JVcGRhdGUuZnJvbVBhcnRpYWwoZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMy5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMy5mKCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAob2JqZWN0LmFwcFN0YXRlQnl0ZXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYXBwU3RhdGVCeXRlcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmFwcFN0YXRlQnl0ZXMgPSBvYmplY3QuYXBwU3RhdGVCeXRlczsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYXBwU3RhdGVCeXRlcyA9IG5ldyBVaW50OEFycmF5KCk7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbml0aWFsSGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluaXRpYWxIZWlnaHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbml0aWFsSGVpZ2h0ID0gb2JqZWN0LmluaXRpYWxIZWlnaHQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluaXRpYWxIZWlnaHQgPSAwOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXF1ZXN0UXVlcnkgPSB7CiAgcGF0aDogIiIsCiAgaGVpZ2h0OiAwLAogIHByb3ZlOiBmYWxzZQp9OwpleHBvcnQgdmFyIFJlcXVlc3RRdWVyeSA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UuZGF0YS5sZW5ndGggIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigxMCkuYnl0ZXMobWVzc2FnZS5kYXRhKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5wYXRoICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5wYXRoKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5oZWlnaHQgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigyNCkuaW50NjQobWVzc2FnZS5oZWlnaHQpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnByb3ZlID09PSB0cnVlKSB7CiAgICAgIHdyaXRlci51aW50MzIoMzIpLmJvb2wobWVzc2FnZS5wcm92ZSk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdFF1ZXJ5KTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmRhdGEgPSByZWFkZXIuYnl0ZXMoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLnBhdGggPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5oZWlnaHQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIG1lc3NhZ2UucHJvdmUgPSByZWFkZXIuYm9vbCgpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdFF1ZXJ5KTsKCiAgICBpZiAob2JqZWN0LmRhdGEgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZGF0YSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmRhdGEgPSBieXRlc0Zyb21CYXNlNjQob2JqZWN0LmRhdGEpOwogICAgfQoKICAgIGlmIChvYmplY3QucGF0aCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wYXRoICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucGF0aCA9IFN0cmluZyhvYmplY3QucGF0aCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnBhdGggPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5oZWlnaHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSBOdW1iZXIob2JqZWN0LmhlaWdodCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmhlaWdodCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5wcm92ZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wcm92ZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnByb3ZlID0gQm9vbGVhbihvYmplY3QucHJvdmUpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5wcm92ZSA9IGZhbHNlOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5kYXRhICE9PSB1bmRlZmluZWQgJiYgKG9iai5kYXRhID0gYmFzZTY0RnJvbUJ5dGVzKG1lc3NhZ2UuZGF0YSAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS5kYXRhIDogbmV3IFVpbnQ4QXJyYXkoKSkpOwogICAgbWVzc2FnZS5wYXRoICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYXRoID0gbWVzc2FnZS5wYXRoKTsKICAgIG1lc3NhZ2UuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5oZWlnaHQgPSBtZXNzYWdlLmhlaWdodCk7CiAgICBtZXNzYWdlLnByb3ZlICE9PSB1bmRlZmluZWQgJiYgKG9iai5wcm92ZSA9IG1lc3NhZ2UucHJvdmUpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RRdWVyeSk7CgogICAgaWYgKG9iamVjdC5kYXRhICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmRhdGEgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5kYXRhID0gb2JqZWN0LmRhdGE7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmRhdGEgPSBuZXcgVWludDhBcnJheSgpOwogICAgfQoKICAgIGlmIChvYmplY3QucGF0aCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wYXRoICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucGF0aCA9IG9iamVjdC5wYXRoOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5wYXRoID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gb2JqZWN0LmhlaWdodDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnByb3ZlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnByb3ZlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucHJvdmUgPSBvYmplY3QucHJvdmU7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnByb3ZlID0gZmFsc2U7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlcXVlc3RCZWdpbkJsb2NrID0ge307CmV4cG9ydCB2YXIgUmVxdWVzdEJlZ2luQmxvY2sgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmhhc2gubGVuZ3RoICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTApLmJ5dGVzKG1lc3NhZ2UuaGFzaCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuaGVhZGVyICE9PSB1bmRlZmluZWQpIHsKICAgICAgSGVhZGVyLmVuY29kZShtZXNzYWdlLmhlYWRlciwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5sYXN0Q29tbWl0SW5mbyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIExhc3RDb21taXRJbmZvLmVuY29kZShtZXNzYWdlLmxhc3RDb21taXRJbmZvLCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIHZhciBfaXRlcmF0b3I0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobWVzc2FnZS5ieXphbnRpbmVWYWxpZGF0b3JzKSwKICAgICAgICBfc3RlcDQ7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3I0LnMoKTsgIShfc3RlcDQgPSBfaXRlcmF0b3I0Lm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgdiA9IF9zdGVwNC52YWx1ZTsKICAgICAgICBFdmlkZW5jZS5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIF9pdGVyYXRvcjQuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yNC5mKCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdEJlZ2luQmxvY2spOwoKICAgIG1lc3NhZ2UuYnl6YW50aW5lVmFsaWRhdG9ycyA9IFtdOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UuaGFzaCA9IHJlYWRlci5ieXRlcygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIG1lc3NhZ2UuaGVhZGVyID0gSGVhZGVyLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5sYXN0Q29tbWl0SW5mbyA9IExhc3RDb21taXRJbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA0OgogICAgICAgICAgbWVzc2FnZS5ieXphbnRpbmVWYWxpZGF0b3JzLnB1c2goRXZpZGVuY2UuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0QmVnaW5CbG9jayk7CgogICAgbWVzc2FnZS5ieXphbnRpbmVWYWxpZGF0b3JzID0gW107CgogICAgaWYgKG9iamVjdC5oYXNoICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lmhhc2ggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5oYXNoID0gYnl0ZXNGcm9tQmFzZTY0KG9iamVjdC5oYXNoKTsKICAgIH0KCiAgICBpZiAob2JqZWN0LmhlYWRlciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5oZWFkZXIgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5oZWFkZXIgPSBIZWFkZXIuZnJvbUpTT04ob2JqZWN0LmhlYWRlcik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmhlYWRlciA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0Lmxhc3RDb21taXRJbmZvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lmxhc3RDb21taXRJbmZvICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubGFzdENvbW1pdEluZm8gPSBMYXN0Q29tbWl0SW5mby5mcm9tSlNPTihvYmplY3QubGFzdENvbW1pdEluZm8pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5sYXN0Q29tbWl0SW5mbyA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmJ5emFudGluZVZhbGlkYXRvcnMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYnl6YW50aW5lVmFsaWRhdG9ycyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yNSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC5ieXphbnRpbmVWYWxpZGF0b3JzKSwKICAgICAgICAgIF9zdGVwNTsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I1LnMoKTsgIShfc3RlcDUgPSBfaXRlcmF0b3I1Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXA1LnZhbHVlOwogICAgICAgICAgbWVzc2FnZS5ieXphbnRpbmVWYWxpZGF0b3JzLnB1c2goRXZpZGVuY2UuZnJvbUpTT04oZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yNS5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yNS5mKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UuaGFzaCAhPT0gdW5kZWZpbmVkICYmIChvYmouaGFzaCA9IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLmhhc2ggIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UuaGFzaCA6IG5ldyBVaW50OEFycmF5KCkpKTsKICAgIG1lc3NhZ2UuaGVhZGVyICE9PSB1bmRlZmluZWQgJiYgKG9iai5oZWFkZXIgPSBtZXNzYWdlLmhlYWRlciA/IEhlYWRlci50b0pTT04obWVzc2FnZS5oZWFkZXIpIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UubGFzdENvbW1pdEluZm8gIT09IHVuZGVmaW5lZCAmJiAob2JqLmxhc3RDb21taXRJbmZvID0gbWVzc2FnZS5sYXN0Q29tbWl0SW5mbyA/IExhc3RDb21taXRJbmZvLnRvSlNPTihtZXNzYWdlLmxhc3RDb21taXRJbmZvKSA6IHVuZGVmaW5lZCk7CgogICAgaWYgKG1lc3NhZ2UuYnl6YW50aW5lVmFsaWRhdG9ycykgewogICAgICBvYmouYnl6YW50aW5lVmFsaWRhdG9ycyA9IG1lc3NhZ2UuYnl6YW50aW5lVmFsaWRhdG9ycy5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZSA/IEV2aWRlbmNlLnRvSlNPTihlKSA6IHVuZGVmaW5lZDsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBvYmouYnl6YW50aW5lVmFsaWRhdG9ycyA9IFtdOwogICAgfQoKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0QmVnaW5CbG9jayk7CgogICAgbWVzc2FnZS5ieXphbnRpbmVWYWxpZGF0b3JzID0gW107CgogICAgaWYgKG9iamVjdC5oYXNoICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lmhhc2ggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5oYXNoID0gb2JqZWN0Lmhhc2g7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmhhc2ggPSBuZXcgVWludDhBcnJheSgpOwogICAgfQoKICAgIGlmIChvYmplY3QuaGVhZGVyICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmhlYWRlciAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmhlYWRlciA9IEhlYWRlci5mcm9tUGFydGlhbChvYmplY3QuaGVhZGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaGVhZGVyID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QubGFzdENvbW1pdEluZm8gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubGFzdENvbW1pdEluZm8gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5sYXN0Q29tbWl0SW5mbyA9IExhc3RDb21taXRJbmZvLmZyb21QYXJ0aWFsKG9iamVjdC5sYXN0Q29tbWl0SW5mbyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmxhc3RDb21taXRJbmZvID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuYnl6YW50aW5lVmFsaWRhdG9ycyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5ieXphbnRpbmVWYWxpZGF0b3JzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3I2ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LmJ5emFudGluZVZhbGlkYXRvcnMpLAogICAgICAgICAgX3N0ZXA2OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjYucygpOyAhKF9zdGVwNiA9IF9pdGVyYXRvcjYubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGUgPSBfc3RlcDYudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLmJ5emFudGluZVZhbGlkYXRvcnMucHVzaChFdmlkZW5jZS5mcm9tUGFydGlhbChlKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3I2LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3I2LmYoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXF1ZXN0Q2hlY2tUeCA9IHsKICB0eXBlOiAwCn07CmV4cG9ydCB2YXIgUmVxdWVzdENoZWNrVHggPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLnR4Lmxlbmd0aCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDEwKS5ieXRlcyhtZXNzYWdlLnR4KTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS50eXBlICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTYpLmludDMyKG1lc3NhZ2UudHlwZSk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdENoZWNrVHgpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UudHggPSByZWFkZXIuYnl0ZXMoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLnR5cGUgPSByZWFkZXIuaW50MzIoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RDaGVja1R4KTsKCiAgICBpZiAob2JqZWN0LnR4ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnR4ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudHggPSBieXRlc0Zyb21CYXNlNjQob2JqZWN0LnR4KTsKICAgIH0KCiAgICBpZiAob2JqZWN0LnR5cGUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudHlwZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnR5cGUgPSBjaGVja1R4VHlwZUZyb21KU09OKG9iamVjdC50eXBlKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudHlwZSA9IDA7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLnR4ICE9PSB1bmRlZmluZWQgJiYgKG9iai50eCA9IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLnR4ICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlLnR4IDogbmV3IFVpbnQ4QXJyYXkoKSkpOwogICAgbWVzc2FnZS50eXBlICE9PSB1bmRlZmluZWQgJiYgKG9iai50eXBlID0gY2hlY2tUeFR5cGVUb0pTT04obWVzc2FnZS50eXBlKSk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdENoZWNrVHgpOwoKICAgIGlmIChvYmplY3QudHggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudHggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS50eCA9IG9iamVjdC50eDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudHggPSBuZXcgVWludDhBcnJheSgpOwogICAgfQoKICAgIGlmIChvYmplY3QudHlwZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50eXBlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudHlwZSA9IG9iamVjdC50eXBlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS50eXBlID0gMDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVxdWVzdERlbGl2ZXJUeCA9IHt9OwpleHBvcnQgdmFyIFJlcXVlc3REZWxpdmVyVHggPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLnR4Lmxlbmd0aCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDEwKS5ieXRlcyhtZXNzYWdlLnR4KTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0RGVsaXZlclR4KTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLnR4ID0gcmVhZGVyLmJ5dGVzKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0RGVsaXZlclR4KTsKCiAgICBpZiAob2JqZWN0LnR4ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnR4ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudHggPSBieXRlc0Zyb21CYXNlNjQob2JqZWN0LnR4KTsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UudHggIT09IHVuZGVmaW5lZCAmJiAob2JqLnR4ID0gYmFzZTY0RnJvbUJ5dGVzKG1lc3NhZ2UudHggIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UudHggOiBuZXcgVWludDhBcnJheSgpKSk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdERlbGl2ZXJUeCk7CgogICAgaWYgKG9iamVjdC50eCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50eCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnR4ID0gb2JqZWN0LnR4OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS50eCA9IG5ldyBVaW50OEFycmF5KCk7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlcXVlc3RFbmRCbG9jayA9IHsKICBoZWlnaHQ6IDAKfTsKZXhwb3J0IHZhciBSZXF1ZXN0RW5kQmxvY2sgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmhlaWdodCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDgpLmludDY0KG1lc3NhZ2UuaGVpZ2h0KTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0RW5kQmxvY2spOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RFbmRCbG9jayk7CgogICAgaWYgKG9iamVjdC5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gTnVtYmVyKG9iamVjdC5oZWlnaHQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSAwOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmhlaWdodCA9IG1lc3NhZ2UuaGVpZ2h0KTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0RW5kQmxvY2spOwoKICAgIGlmIChvYmplY3QuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmhlaWdodCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmhlaWdodCA9IG9iamVjdC5oZWlnaHQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmhlaWdodCA9IDA7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlcXVlc3RDb21taXQgPSB7fTsKZXhwb3J0IHZhciBSZXF1ZXN0Q29tbWl0ID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKF8pIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RDb21taXQpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKF8pIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RDb21taXQpOwoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04oXykgewogICAgdmFyIG9iaiA9IHt9OwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChfKSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0Q29tbWl0KTsKCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVxdWVzdExpc3RTbmFwc2hvdHMgPSB7fTsKZXhwb3J0IHZhciBSZXF1ZXN0TGlzdFNuYXBzaG90cyA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShfKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0TGlzdFNuYXBzaG90cyk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04oXykgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdExpc3RTbmFwc2hvdHMpOwoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04oXykgewogICAgdmFyIG9iaiA9IHt9OwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChfKSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0TGlzdFNuYXBzaG90cyk7CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlcXVlc3RPZmZlclNuYXBzaG90ID0ge307CmV4cG9ydCB2YXIgUmVxdWVzdE9mZmVyU25hcHNob3QgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLnNuYXBzaG90ICE9PSB1bmRlZmluZWQpIHsKICAgICAgU25hcHNob3QuZW5jb2RlKG1lc3NhZ2Uuc25hcHNob3QsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuYXBwSGFzaC5sZW5ndGggIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigxOCkuYnl0ZXMobWVzc2FnZS5hcHBIYXNoKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0T2ZmZXJTbmFwc2hvdCk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5zbmFwc2hvdCA9IFNuYXBzaG90LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5hcHBIYXNoID0gcmVhZGVyLmJ5dGVzKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0T2ZmZXJTbmFwc2hvdCk7CgogICAgaWYgKG9iamVjdC5zbmFwc2hvdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zbmFwc2hvdCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnNuYXBzaG90ID0gU25hcHNob3QuZnJvbUpTT04ob2JqZWN0LnNuYXBzaG90KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2Uuc25hcHNob3QgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5hcHBIYXNoICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmFwcEhhc2ggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5hcHBIYXNoID0gYnl0ZXNGcm9tQmFzZTY0KG9iamVjdC5hcHBIYXNoKTsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2Uuc25hcHNob3QgIT09IHVuZGVmaW5lZCAmJiAob2JqLnNuYXBzaG90ID0gbWVzc2FnZS5zbmFwc2hvdCA/IFNuYXBzaG90LnRvSlNPTihtZXNzYWdlLnNuYXBzaG90KSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmFwcEhhc2ggIT09IHVuZGVmaW5lZCAmJiAob2JqLmFwcEhhc2ggPSBiYXNlNjRGcm9tQnl0ZXMobWVzc2FnZS5hcHBIYXNoICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlLmFwcEhhc2ggOiBuZXcgVWludDhBcnJheSgpKSk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdE9mZmVyU25hcHNob3QpOwoKICAgIGlmIChvYmplY3Quc25hcHNob3QgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc25hcHNob3QgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5zbmFwc2hvdCA9IFNuYXBzaG90LmZyb21QYXJ0aWFsKG9iamVjdC5zbmFwc2hvdCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnNuYXBzaG90ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuYXBwSGFzaCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hcHBIYXNoICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYXBwSGFzaCA9IG9iamVjdC5hcHBIYXNoOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5hcHBIYXNoID0gbmV3IFVpbnQ4QXJyYXkoKTsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVxdWVzdExvYWRTbmFwc2hvdENodW5rID0gewogIGhlaWdodDogMCwKICBmb3JtYXQ6IDAsCiAgY2h1bms6IDAKfTsKZXhwb3J0IHZhciBSZXF1ZXN0TG9hZFNuYXBzaG90Q2h1bmsgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmhlaWdodCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDgpLnVpbnQ2NChtZXNzYWdlLmhlaWdodCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuZm9ybWF0ICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTYpLnVpbnQzMihtZXNzYWdlLmZvcm1hdCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuY2h1bmsgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigyNCkudWludDMyKG1lc3NhZ2UuY2h1bmspOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlcXVlc3RMb2FkU25hcHNob3RDaHVuayk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5oZWlnaHQgPSBsb25nVG9OdW1iZXIocmVhZGVyLnVpbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLmZvcm1hdCA9IHJlYWRlci51aW50MzIoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBtZXNzYWdlLmNodW5rID0gcmVhZGVyLnVpbnQzMigpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdExvYWRTbmFwc2hvdENodW5rKTsKCiAgICBpZiAob2JqZWN0LmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5oZWlnaHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSBOdW1iZXIob2JqZWN0LmhlaWdodCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmhlaWdodCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5mb3JtYXQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZm9ybWF0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZm9ybWF0ID0gTnVtYmVyKG9iamVjdC5mb3JtYXQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5mb3JtYXQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuY2h1bmsgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY2h1bmsgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jaHVuayA9IE51bWJlcihvYmplY3QuY2h1bmspOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jaHVuayA9IDA7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIChvYmouaGVpZ2h0ID0gbWVzc2FnZS5oZWlnaHQpOwogICAgbWVzc2FnZS5mb3JtYXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmZvcm1hdCA9IG1lc3NhZ2UuZm9ybWF0KTsKICAgIG1lc3NhZ2UuY2h1bmsgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNodW5rID0gbWVzc2FnZS5jaHVuayk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdExvYWRTbmFwc2hvdENodW5rKTsKCiAgICBpZiAob2JqZWN0LmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5oZWlnaHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSBvYmplY3QuaGVpZ2h0OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuZm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmZvcm1hdCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmZvcm1hdCA9IG9iamVjdC5mb3JtYXQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmZvcm1hdCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5jaHVuayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jaHVuayAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNodW5rID0gb2JqZWN0LmNodW5rOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jaHVuayA9IDA7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlcXVlc3RBcHBseVNuYXBzaG90Q2h1bmsgPSB7CiAgaW5kZXg6IDAsCiAgc2VuZGVyOiAiIgp9OwpleHBvcnQgdmFyIFJlcXVlc3RBcHBseVNuYXBzaG90Q2h1bmsgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmluZGV4ICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoOCkudWludDMyKG1lc3NhZ2UuaW5kZXgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmNodW5rLmxlbmd0aCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDE4KS5ieXRlcyhtZXNzYWdlLmNodW5rKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5zZW5kZXIgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLnNlbmRlcik7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdEFwcGx5U25hcHNob3RDaHVuayk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5pbmRleCA9IHJlYWRlci51aW50MzIoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLmNodW5rID0gcmVhZGVyLmJ5dGVzKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5zZW5kZXIgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXF1ZXN0QXBwbHlTbmFwc2hvdENodW5rKTsKCiAgICBpZiAob2JqZWN0LmluZGV4ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluZGV4ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaW5kZXggPSBOdW1iZXIob2JqZWN0LmluZGV4KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5kZXggPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuY2h1bmsgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY2h1bmsgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jaHVuayA9IGJ5dGVzRnJvbUJhc2U2NChvYmplY3QuY2h1bmspOwogICAgfQoKICAgIGlmIChvYmplY3Quc2VuZGVyICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNlbmRlciAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnNlbmRlciA9IFN0cmluZyhvYmplY3Quc2VuZGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2Uuc2VuZGVyID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmluZGV4ICE9PSB1bmRlZmluZWQgJiYgKG9iai5pbmRleCA9IG1lc3NhZ2UuaW5kZXgpOwogICAgbWVzc2FnZS5jaHVuayAhPT0gdW5kZWZpbmVkICYmIChvYmouY2h1bmsgPSBiYXNlNjRGcm9tQnl0ZXMobWVzc2FnZS5jaHVuayAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS5jaHVuayA6IG5ldyBVaW50OEFycmF5KCkpKTsKICAgIG1lc3NhZ2Uuc2VuZGVyICE9PSB1bmRlZmluZWQgJiYgKG9iai5zZW5kZXIgPSBtZXNzYWdlLnNlbmRlcik7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVxdWVzdEFwcGx5U25hcHNob3RDaHVuayk7CgogICAgaWYgKG9iamVjdC5pbmRleCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbmRleCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluZGV4ID0gb2JqZWN0LmluZGV4OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5pbmRleCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5jaHVuayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jaHVuayAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNodW5rID0gb2JqZWN0LmNodW5rOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jaHVuayA9IG5ldyBVaW50OEFycmF5KCk7CiAgICB9CgogICAgaWYgKG9iamVjdC5zZW5kZXIgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc2VuZGVyICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2Uuc2VuZGVyID0gb2JqZWN0LnNlbmRlcjsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2Uuc2VuZGVyID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlc3BvbnNlID0ge307CmV4cG9ydCB2YXIgUmVzcG9uc2UgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmV4Y2VwdGlvbiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlc3BvbnNlRXhjZXB0aW9uLmVuY29kZShtZXNzYWdlLmV4Y2VwdGlvbiwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5lY2hvICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVzcG9uc2VFY2hvLmVuY29kZShtZXNzYWdlLmVjaG8sIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuZmx1c2ggIT09IHVuZGVmaW5lZCkgewogICAgICBSZXNwb25zZUZsdXNoLmVuY29kZShtZXNzYWdlLmZsdXNoLCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmluZm8gIT09IHVuZGVmaW5lZCkgewogICAgICBSZXNwb25zZUluZm8uZW5jb2RlKG1lc3NhZ2UuaW5mbywgd3JpdGVyLnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5zZXRPcHRpb24gIT09IHVuZGVmaW5lZCkgewogICAgICBSZXNwb25zZVNldE9wdGlvbi5lbmNvZGUobWVzc2FnZS5zZXRPcHRpb24sIHdyaXRlci51aW50MzIoNDIpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuaW5pdENoYWluICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVzcG9uc2VJbml0Q2hhaW4uZW5jb2RlKG1lc3NhZ2UuaW5pdENoYWluLCB3cml0ZXIudWludDMyKDUwKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnF1ZXJ5ICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVzcG9uc2VRdWVyeS5lbmNvZGUobWVzc2FnZS5xdWVyeSwgd3JpdGVyLnVpbnQzMig1OCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5iZWdpbkJsb2NrICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVzcG9uc2VCZWdpbkJsb2NrLmVuY29kZShtZXNzYWdlLmJlZ2luQmxvY2ssIHdyaXRlci51aW50MzIoNjYpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuY2hlY2tUeCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlc3BvbnNlQ2hlY2tUeC5lbmNvZGUobWVzc2FnZS5jaGVja1R4LCB3cml0ZXIudWludDMyKDc0KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmRlbGl2ZXJUeCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlc3BvbnNlRGVsaXZlclR4LmVuY29kZShtZXNzYWdlLmRlbGl2ZXJUeCwgd3JpdGVyLnVpbnQzMig4MikuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5lbmRCbG9jayAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlc3BvbnNlRW5kQmxvY2suZW5jb2RlKG1lc3NhZ2UuZW5kQmxvY2ssIHdyaXRlci51aW50MzIoOTApLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuY29tbWl0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVzcG9uc2VDb21taXQuZW5jb2RlKG1lc3NhZ2UuY29tbWl0LCB3cml0ZXIudWludDMyKDk4KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmxpc3RTbmFwc2hvdHMgIT09IHVuZGVmaW5lZCkgewogICAgICBSZXNwb25zZUxpc3RTbmFwc2hvdHMuZW5jb2RlKG1lc3NhZ2UubGlzdFNuYXBzaG90cywgd3JpdGVyLnVpbnQzMigxMDYpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2Uub2ZmZXJTbmFwc2hvdCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlc3BvbnNlT2ZmZXJTbmFwc2hvdC5lbmNvZGUobWVzc2FnZS5vZmZlclNuYXBzaG90LCB3cml0ZXIudWludDMyKDExNCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5sb2FkU25hcHNob3RDaHVuayAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlc3BvbnNlTG9hZFNuYXBzaG90Q2h1bmsuZW5jb2RlKG1lc3NhZ2UubG9hZFNuYXBzaG90Q2h1bmssIHdyaXRlci51aW50MzIoMTIyKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmFwcGx5U25hcHNob3RDaHVuayAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rLmVuY29kZShtZXNzYWdlLmFwcGx5U25hcHNob3RDaHVuaywgd3JpdGVyLnVpbnQzMigxMzApLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2UpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UuZXhjZXB0aW9uID0gUmVzcG9uc2VFeGNlcHRpb24uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLmVjaG8gPSBSZXNwb25zZUVjaG8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBtZXNzYWdlLmZsdXNoID0gUmVzcG9uc2VGbHVzaC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIG1lc3NhZ2UuaW5mbyA9IFJlc3BvbnNlSW5mby5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNToKICAgICAgICAgIG1lc3NhZ2Uuc2V0T3B0aW9uID0gUmVzcG9uc2VTZXRPcHRpb24uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDY6CiAgICAgICAgICBtZXNzYWdlLmluaXRDaGFpbiA9IFJlc3BvbnNlSW5pdENoYWluLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgbWVzc2FnZS5xdWVyeSA9IFJlc3BvbnNlUXVlcnkuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDg6CiAgICAgICAgICBtZXNzYWdlLmJlZ2luQmxvY2sgPSBSZXNwb25zZUJlZ2luQmxvY2suZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDk6CiAgICAgICAgICBtZXNzYWdlLmNoZWNrVHggPSBSZXNwb25zZUNoZWNrVHguZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgICAgbWVzc2FnZS5kZWxpdmVyVHggPSBSZXNwb25zZURlbGl2ZXJUeC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMTE6CiAgICAgICAgICBtZXNzYWdlLmVuZEJsb2NrID0gUmVzcG9uc2VFbmRCbG9jay5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMTI6CiAgICAgICAgICBtZXNzYWdlLmNvbW1pdCA9IFJlc3BvbnNlQ29tbWl0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAxMzoKICAgICAgICAgIG1lc3NhZ2UubGlzdFNuYXBzaG90cyA9IFJlc3BvbnNlTGlzdFNuYXBzaG90cy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICBtZXNzYWdlLm9mZmVyU25hcHNob3QgPSBSZXNwb25zZU9mZmVyU25hcHNob3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDE1OgogICAgICAgICAgbWVzc2FnZS5sb2FkU25hcHNob3RDaHVuayA9IFJlc3BvbnNlTG9hZFNuYXBzaG90Q2h1bmsuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDE2OgogICAgICAgICAgbWVzc2FnZS5hcHBseVNuYXBzaG90Q2h1bmsgPSBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVuay5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2UpOwoKICAgIGlmIChvYmplY3QuZXhjZXB0aW9uICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmV4Y2VwdGlvbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmV4Y2VwdGlvbiA9IFJlc3BvbnNlRXhjZXB0aW9uLmZyb21KU09OKG9iamVjdC5leGNlcHRpb24pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5leGNlcHRpb24gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5lY2hvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmVjaG8gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5lY2hvID0gUmVzcG9uc2VFY2hvLmZyb21KU09OKG9iamVjdC5lY2hvKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZWNobyA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmZsdXNoICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmZsdXNoICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZmx1c2ggPSBSZXNwb25zZUZsdXNoLmZyb21KU09OKG9iamVjdC5mbHVzaCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmZsdXNoID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuaW5mbyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbmZvICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaW5mbyA9IFJlc3BvbnNlSW5mby5mcm9tSlNPTihvYmplY3QuaW5mbyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluZm8gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5zZXRPcHRpb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc2V0T3B0aW9uICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2Uuc2V0T3B0aW9uID0gUmVzcG9uc2VTZXRPcHRpb24uZnJvbUpTT04ob2JqZWN0LnNldE9wdGlvbik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnNldE9wdGlvbiA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluaXRDaGFpbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbml0Q2hhaW4gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbml0Q2hhaW4gPSBSZXNwb25zZUluaXRDaGFpbi5mcm9tSlNPTihvYmplY3QuaW5pdENoYWluKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5pdENoYWluID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QucXVlcnkgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucXVlcnkgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5xdWVyeSA9IFJlc3BvbnNlUXVlcnkuZnJvbUpTT04ob2JqZWN0LnF1ZXJ5KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UucXVlcnkgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5iZWdpbkJsb2NrICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmJlZ2luQmxvY2sgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5iZWdpbkJsb2NrID0gUmVzcG9uc2VCZWdpbkJsb2NrLmZyb21KU09OKG9iamVjdC5iZWdpbkJsb2NrKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYmVnaW5CbG9jayA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNoZWNrVHggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY2hlY2tUeCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNoZWNrVHggPSBSZXNwb25zZUNoZWNrVHguZnJvbUpTT04ob2JqZWN0LmNoZWNrVHgpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jaGVja1R4ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuZGVsaXZlclR4ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmRlbGl2ZXJUeCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmRlbGl2ZXJUeCA9IFJlc3BvbnNlRGVsaXZlclR4LmZyb21KU09OKG9iamVjdC5kZWxpdmVyVHgpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5kZWxpdmVyVHggPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5lbmRCbG9jayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5lbmRCbG9jayAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmVuZEJsb2NrID0gUmVzcG9uc2VFbmRCbG9jay5mcm9tSlNPTihvYmplY3QuZW5kQmxvY2spOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5lbmRCbG9jayA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNvbW1pdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb21taXQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb21taXQgPSBSZXNwb25zZUNvbW1pdC5mcm9tSlNPTihvYmplY3QuY29tbWl0KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29tbWl0ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QubGlzdFNuYXBzaG90cyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5saXN0U25hcHNob3RzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubGlzdFNuYXBzaG90cyA9IFJlc3BvbnNlTGlzdFNuYXBzaG90cy5mcm9tSlNPTihvYmplY3QubGlzdFNuYXBzaG90cyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmxpc3RTbmFwc2hvdHMgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5vZmZlclNuYXBzaG90ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm9mZmVyU25hcHNob3QgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5vZmZlclNuYXBzaG90ID0gUmVzcG9uc2VPZmZlclNuYXBzaG90LmZyb21KU09OKG9iamVjdC5vZmZlclNuYXBzaG90KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2Uub2ZmZXJTbmFwc2hvdCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmxvYWRTbmFwc2hvdENodW5rICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmxvYWRTbmFwc2hvdENodW5rICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubG9hZFNuYXBzaG90Q2h1bmsgPSBSZXNwb25zZUxvYWRTbmFwc2hvdENodW5rLmZyb21KU09OKG9iamVjdC5sb2FkU25hcHNob3RDaHVuayk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmxvYWRTbmFwc2hvdENodW5rID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuYXBwbHlTbmFwc2hvdENodW5rICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmFwcGx5U25hcHNob3RDaHVuayAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmFwcGx5U25hcHNob3RDaHVuayA9IFJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rLmZyb21KU09OKG9iamVjdC5hcHBseVNuYXBzaG90Q2h1bmspOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5hcHBseVNuYXBzaG90Q2h1bmsgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmV4Y2VwdGlvbiAhPT0gdW5kZWZpbmVkICYmIChvYmouZXhjZXB0aW9uID0gbWVzc2FnZS5leGNlcHRpb24gPyBSZXNwb25zZUV4Y2VwdGlvbi50b0pTT04obWVzc2FnZS5leGNlcHRpb24pIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UuZWNobyAhPT0gdW5kZWZpbmVkICYmIChvYmouZWNobyA9IG1lc3NhZ2UuZWNobyA/IFJlc3BvbnNlRWNoby50b0pTT04obWVzc2FnZS5lY2hvKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmZsdXNoICE9PSB1bmRlZmluZWQgJiYgKG9iai5mbHVzaCA9IG1lc3NhZ2UuZmx1c2ggPyBSZXNwb25zZUZsdXNoLnRvSlNPTihtZXNzYWdlLmZsdXNoKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmluZm8gIT09IHVuZGVmaW5lZCAmJiAob2JqLmluZm8gPSBtZXNzYWdlLmluZm8gPyBSZXNwb25zZUluZm8udG9KU09OKG1lc3NhZ2UuaW5mbykgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5zZXRPcHRpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLnNldE9wdGlvbiA9IG1lc3NhZ2Uuc2V0T3B0aW9uID8gUmVzcG9uc2VTZXRPcHRpb24udG9KU09OKG1lc3NhZ2Uuc2V0T3B0aW9uKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmluaXRDaGFpbiAhPT0gdW5kZWZpbmVkICYmIChvYmouaW5pdENoYWluID0gbWVzc2FnZS5pbml0Q2hhaW4gPyBSZXNwb25zZUluaXRDaGFpbi50b0pTT04obWVzc2FnZS5pbml0Q2hhaW4pIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UucXVlcnkgIT09IHVuZGVmaW5lZCAmJiAob2JqLnF1ZXJ5ID0gbWVzc2FnZS5xdWVyeSA/IFJlc3BvbnNlUXVlcnkudG9KU09OKG1lc3NhZ2UucXVlcnkpIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UuYmVnaW5CbG9jayAhPT0gdW5kZWZpbmVkICYmIChvYmouYmVnaW5CbG9jayA9IG1lc3NhZ2UuYmVnaW5CbG9jayA/IFJlc3BvbnNlQmVnaW5CbG9jay50b0pTT04obWVzc2FnZS5iZWdpbkJsb2NrKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmNoZWNrVHggIT09IHVuZGVmaW5lZCAmJiAob2JqLmNoZWNrVHggPSBtZXNzYWdlLmNoZWNrVHggPyBSZXNwb25zZUNoZWNrVHgudG9KU09OKG1lc3NhZ2UuY2hlY2tUeCkgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5kZWxpdmVyVHggIT09IHVuZGVmaW5lZCAmJiAob2JqLmRlbGl2ZXJUeCA9IG1lc3NhZ2UuZGVsaXZlclR4ID8gUmVzcG9uc2VEZWxpdmVyVHgudG9KU09OKG1lc3NhZ2UuZGVsaXZlclR4KSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmVuZEJsb2NrICE9PSB1bmRlZmluZWQgJiYgKG9iai5lbmRCbG9jayA9IG1lc3NhZ2UuZW5kQmxvY2sgPyBSZXNwb25zZUVuZEJsb2NrLnRvSlNPTihtZXNzYWdlLmVuZEJsb2NrKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmNvbW1pdCAhPT0gdW5kZWZpbmVkICYmIChvYmouY29tbWl0ID0gbWVzc2FnZS5jb21taXQgPyBSZXNwb25zZUNvbW1pdC50b0pTT04obWVzc2FnZS5jb21taXQpIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UubGlzdFNuYXBzaG90cyAhPT0gdW5kZWZpbmVkICYmIChvYmoubGlzdFNuYXBzaG90cyA9IG1lc3NhZ2UubGlzdFNuYXBzaG90cyA/IFJlc3BvbnNlTGlzdFNuYXBzaG90cy50b0pTT04obWVzc2FnZS5saXN0U25hcHNob3RzKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLm9mZmVyU25hcHNob3QgIT09IHVuZGVmaW5lZCAmJiAob2JqLm9mZmVyU25hcHNob3QgPSBtZXNzYWdlLm9mZmVyU25hcHNob3QgPyBSZXNwb25zZU9mZmVyU25hcHNob3QudG9KU09OKG1lc3NhZ2Uub2ZmZXJTbmFwc2hvdCkgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5sb2FkU25hcHNob3RDaHVuayAhPT0gdW5kZWZpbmVkICYmIChvYmoubG9hZFNuYXBzaG90Q2h1bmsgPSBtZXNzYWdlLmxvYWRTbmFwc2hvdENodW5rID8gUmVzcG9uc2VMb2FkU25hcHNob3RDaHVuay50b0pTT04obWVzc2FnZS5sb2FkU25hcHNob3RDaHVuaykgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5hcHBseVNuYXBzaG90Q2h1bmsgIT09IHVuZGVmaW5lZCAmJiAob2JqLmFwcGx5U25hcHNob3RDaHVuayA9IG1lc3NhZ2UuYXBwbHlTbmFwc2hvdENodW5rID8gUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmsudG9KU09OKG1lc3NhZ2UuYXBwbHlTbmFwc2hvdENodW5rKSA6IHVuZGVmaW5lZCk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2UpOwoKICAgIGlmIChvYmplY3QuZXhjZXB0aW9uICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmV4Y2VwdGlvbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmV4Y2VwdGlvbiA9IFJlc3BvbnNlRXhjZXB0aW9uLmZyb21QYXJ0aWFsKG9iamVjdC5leGNlcHRpb24pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5leGNlcHRpb24gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5lY2hvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmVjaG8gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5lY2hvID0gUmVzcG9uc2VFY2hvLmZyb21QYXJ0aWFsKG9iamVjdC5lY2hvKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZWNobyA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmZsdXNoICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmZsdXNoICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZmx1c2ggPSBSZXNwb25zZUZsdXNoLmZyb21QYXJ0aWFsKG9iamVjdC5mbHVzaCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmZsdXNoID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuaW5mbyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbmZvICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaW5mbyA9IFJlc3BvbnNlSW5mby5mcm9tUGFydGlhbChvYmplY3QuaW5mbyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluZm8gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5zZXRPcHRpb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc2V0T3B0aW9uICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2Uuc2V0T3B0aW9uID0gUmVzcG9uc2VTZXRPcHRpb24uZnJvbVBhcnRpYWwob2JqZWN0LnNldE9wdGlvbik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnNldE9wdGlvbiA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluaXRDaGFpbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbml0Q2hhaW4gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbml0Q2hhaW4gPSBSZXNwb25zZUluaXRDaGFpbi5mcm9tUGFydGlhbChvYmplY3QuaW5pdENoYWluKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5pdENoYWluID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QucXVlcnkgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucXVlcnkgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5xdWVyeSA9IFJlc3BvbnNlUXVlcnkuZnJvbVBhcnRpYWwob2JqZWN0LnF1ZXJ5KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UucXVlcnkgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5iZWdpbkJsb2NrICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmJlZ2luQmxvY2sgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5iZWdpbkJsb2NrID0gUmVzcG9uc2VCZWdpbkJsb2NrLmZyb21QYXJ0aWFsKG9iamVjdC5iZWdpbkJsb2NrKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYmVnaW5CbG9jayA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNoZWNrVHggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY2hlY2tUeCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNoZWNrVHggPSBSZXNwb25zZUNoZWNrVHguZnJvbVBhcnRpYWwob2JqZWN0LmNoZWNrVHgpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jaGVja1R4ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuZGVsaXZlclR4ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmRlbGl2ZXJUeCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmRlbGl2ZXJUeCA9IFJlc3BvbnNlRGVsaXZlclR4LmZyb21QYXJ0aWFsKG9iamVjdC5kZWxpdmVyVHgpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5kZWxpdmVyVHggPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5lbmRCbG9jayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5lbmRCbG9jayAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmVuZEJsb2NrID0gUmVzcG9uc2VFbmRCbG9jay5mcm9tUGFydGlhbChvYmplY3QuZW5kQmxvY2spOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5lbmRCbG9jayA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNvbW1pdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb21taXQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb21taXQgPSBSZXNwb25zZUNvbW1pdC5mcm9tUGFydGlhbChvYmplY3QuY29tbWl0KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29tbWl0ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QubGlzdFNuYXBzaG90cyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5saXN0U25hcHNob3RzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubGlzdFNuYXBzaG90cyA9IFJlc3BvbnNlTGlzdFNuYXBzaG90cy5mcm9tUGFydGlhbChvYmplY3QubGlzdFNuYXBzaG90cyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmxpc3RTbmFwc2hvdHMgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5vZmZlclNuYXBzaG90ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm9mZmVyU25hcHNob3QgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5vZmZlclNuYXBzaG90ID0gUmVzcG9uc2VPZmZlclNuYXBzaG90LmZyb21QYXJ0aWFsKG9iamVjdC5vZmZlclNuYXBzaG90KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2Uub2ZmZXJTbmFwc2hvdCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmxvYWRTbmFwc2hvdENodW5rICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmxvYWRTbmFwc2hvdENodW5rICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubG9hZFNuYXBzaG90Q2h1bmsgPSBSZXNwb25zZUxvYWRTbmFwc2hvdENodW5rLmZyb21QYXJ0aWFsKG9iamVjdC5sb2FkU25hcHNob3RDaHVuayk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmxvYWRTbmFwc2hvdENodW5rID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuYXBwbHlTbmFwc2hvdENodW5rICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmFwcGx5U25hcHNob3RDaHVuayAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmFwcGx5U25hcHNob3RDaHVuayA9IFJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rLmZyb21QYXJ0aWFsKG9iamVjdC5hcHBseVNuYXBzaG90Q2h1bmspOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5hcHBseVNuYXBzaG90Q2h1bmsgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlc3BvbnNlRXhjZXB0aW9uID0gewogIGVycm9yOiAiIgp9OwpleHBvcnQgdmFyIFJlc3BvbnNlRXhjZXB0aW9uID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5lcnJvciAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuZXJyb3IpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlRXhjZXB0aW9uKTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmVycm9yID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VFeGNlcHRpb24pOwoKICAgIGlmIChvYmplY3QuZXJyb3IgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZXJyb3IgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5lcnJvciA9IFN0cmluZyhvYmplY3QuZXJyb3IpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5lcnJvciA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5lcnJvciAhPT0gdW5kZWZpbmVkICYmIChvYmouZXJyb3IgPSBtZXNzYWdlLmVycm9yKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUV4Y2VwdGlvbik7CgogICAgaWYgKG9iamVjdC5lcnJvciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5lcnJvciAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmVycm9yID0gb2JqZWN0LmVycm9yOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5lcnJvciA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXNwb25zZUVjaG8gPSB7CiAgbWVzc2FnZTogIiIKfTsKZXhwb3J0IHZhciBSZXNwb25zZUVjaG8gPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLm1lc3NhZ2UgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLm1lc3NhZ2UpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlRWNobyk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5tZXNzYWdlID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VFY2hvKTsKCiAgICBpZiAob2JqZWN0Lm1lc3NhZ2UgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubWVzc2FnZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLm1lc3NhZ2UgPSBTdHJpbmcob2JqZWN0Lm1lc3NhZ2UpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5tZXNzYWdlID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1lc3NhZ2UgPSBtZXNzYWdlLm1lc3NhZ2UpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlRWNobyk7CgogICAgaWYgKG9iamVjdC5tZXNzYWdlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm1lc3NhZ2UgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5tZXNzYWdlID0gb2JqZWN0Lm1lc3NhZ2U7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLm1lc3NhZ2UgPSAiIjsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVzcG9uc2VGbHVzaCA9IHt9OwpleHBvcnQgdmFyIFJlc3BvbnNlRmx1c2ggPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUoXykgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VGbHVzaCk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04oXykgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VGbHVzaCk7CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihfKSB7CiAgICB2YXIgb2JqID0ge307CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKF8pIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlRmx1c2gpOwoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXNwb25zZUluZm8gPSB7CiAgZGF0YTogIiIsCiAgdmVyc2lvbjogIiIsCiAgYXBwVmVyc2lvbjogMCwKICBsYXN0QmxvY2tIZWlnaHQ6IDAKfTsKZXhwb3J0IHZhciBSZXNwb25zZUluZm8gPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmRhdGEgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLmRhdGEpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnZlcnNpb24gIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLnZlcnNpb24pOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmFwcFZlcnNpb24gIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigyNCkudWludDY0KG1lc3NhZ2UuYXBwVmVyc2lvbik7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UubGFzdEJsb2NrSGVpZ2h0ICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMzIpLmludDY0KG1lc3NhZ2UubGFzdEJsb2NrSGVpZ2h0KTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5sYXN0QmxvY2tBcHBIYXNoLmxlbmd0aCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDQyKS5ieXRlcyhtZXNzYWdlLmxhc3RCbG9ja0FwcEhhc2gpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlSW5mbyk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5kYXRhID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIG1lc3NhZ2UudmVyc2lvbiA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBtZXNzYWdlLmFwcFZlcnNpb24gPSBsb25nVG9OdW1iZXIocmVhZGVyLnVpbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBtZXNzYWdlLmxhc3RCbG9ja0hlaWdodCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA1OgogICAgICAgICAgbWVzc2FnZS5sYXN0QmxvY2tBcHBIYXNoID0gcmVhZGVyLmJ5dGVzKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUluZm8pOwoKICAgIGlmIChvYmplY3QuZGF0YSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kYXRhICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGF0YSA9IFN0cmluZyhvYmplY3QuZGF0YSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmRhdGEgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmVyc2lvbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnZlcnNpb24gPSBTdHJpbmcob2JqZWN0LnZlcnNpb24pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS52ZXJzaW9uID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5hcHBWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmFwcFZlcnNpb24gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5hcHBWZXJzaW9uID0gTnVtYmVyKG9iamVjdC5hcHBWZXJzaW9uKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYXBwVmVyc2lvbiA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5sYXN0QmxvY2tIZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubGFzdEJsb2NrSGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubGFzdEJsb2NrSGVpZ2h0ID0gTnVtYmVyKG9iamVjdC5sYXN0QmxvY2tIZWlnaHQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5sYXN0QmxvY2tIZWlnaHQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QubGFzdEJsb2NrQXBwSGFzaCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5sYXN0QmxvY2tBcHBIYXNoICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubGFzdEJsb2NrQXBwSGFzaCA9IGJ5dGVzRnJvbUJhc2U2NChvYmplY3QubGFzdEJsb2NrQXBwSGFzaCk7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmRhdGEgIT09IHVuZGVmaW5lZCAmJiAob2JqLmRhdGEgPSBtZXNzYWdlLmRhdGEpOwogICAgbWVzc2FnZS52ZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai52ZXJzaW9uID0gbWVzc2FnZS52ZXJzaW9uKTsKICAgIG1lc3NhZ2UuYXBwVmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIChvYmouYXBwVmVyc2lvbiA9IG1lc3NhZ2UuYXBwVmVyc2lvbik7CiAgICBtZXNzYWdlLmxhc3RCbG9ja0hlaWdodCAhPT0gdW5kZWZpbmVkICYmIChvYmoubGFzdEJsb2NrSGVpZ2h0ID0gbWVzc2FnZS5sYXN0QmxvY2tIZWlnaHQpOwogICAgbWVzc2FnZS5sYXN0QmxvY2tBcHBIYXNoICE9PSB1bmRlZmluZWQgJiYgKG9iai5sYXN0QmxvY2tBcHBIYXNoID0gYmFzZTY0RnJvbUJ5dGVzKG1lc3NhZ2UubGFzdEJsb2NrQXBwSGFzaCAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS5sYXN0QmxvY2tBcHBIYXNoIDogbmV3IFVpbnQ4QXJyYXkoKSkpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlSW5mbyk7CgogICAgaWYgKG9iamVjdC5kYXRhICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmRhdGEgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5kYXRhID0gb2JqZWN0LmRhdGE7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmRhdGEgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmVyc2lvbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnZlcnNpb24gPSBvYmplY3QudmVyc2lvbjsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudmVyc2lvbiA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuYXBwVmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hcHBWZXJzaW9uICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYXBwVmVyc2lvbiA9IG9iamVjdC5hcHBWZXJzaW9uOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5hcHBWZXJzaW9uID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0Lmxhc3RCbG9ja0hlaWdodCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5sYXN0QmxvY2tIZWlnaHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5sYXN0QmxvY2tIZWlnaHQgPSBvYmplY3QubGFzdEJsb2NrSGVpZ2h0OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5sYXN0QmxvY2tIZWlnaHQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QubGFzdEJsb2NrQXBwSGFzaCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5sYXN0QmxvY2tBcHBIYXNoICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubGFzdEJsb2NrQXBwSGFzaCA9IG9iamVjdC5sYXN0QmxvY2tBcHBIYXNoOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5sYXN0QmxvY2tBcHBIYXNoID0gbmV3IFVpbnQ4QXJyYXkoKTsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVzcG9uc2VTZXRPcHRpb24gPSB7CiAgY29kZTogMCwKICBsb2c6ICIiLAogIGluZm86ICIiCn07CmV4cG9ydCB2YXIgUmVzcG9uc2VTZXRPcHRpb24gPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmNvZGUgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig4KS51aW50MzIobWVzc2FnZS5jb2RlKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5sb2cgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLmxvZyk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuaW5mbyAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMigzNCkuc3RyaW5nKG1lc3NhZ2UuaW5mbyk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VTZXRPcHRpb24pOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UuY29kZSA9IHJlYWRlci51aW50MzIoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBtZXNzYWdlLmxvZyA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBtZXNzYWdlLmluZm8gPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZVNldE9wdGlvbik7CgogICAgaWYgKG9iamVjdC5jb2RlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNvZGUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb2RlID0gTnVtYmVyKG9iamVjdC5jb2RlKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29kZSA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5sb2cgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubG9nICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubG9nID0gU3RyaW5nKG9iamVjdC5sb2cpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5sb2cgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluZm8gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5mbyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluZm8gPSBTdHJpbmcob2JqZWN0LmluZm8pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5pbmZvID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmNvZGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNvZGUgPSBtZXNzYWdlLmNvZGUpOwogICAgbWVzc2FnZS5sb2cgIT09IHVuZGVmaW5lZCAmJiAob2JqLmxvZyA9IG1lc3NhZ2UubG9nKTsKICAgIG1lc3NhZ2UuaW5mbyAhPT0gdW5kZWZpbmVkICYmIChvYmouaW5mbyA9IG1lc3NhZ2UuaW5mbyk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VTZXRPcHRpb24pOwoKICAgIGlmIChvYmplY3QuY29kZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb2RlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29kZSA9IG9iamVjdC5jb2RlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb2RlID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmxvZyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5sb2cgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5sb2cgPSBvYmplY3QubG9nOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5sb2cgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluZm8gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5mbyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluZm8gPSBvYmplY3QuaW5mbzsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5mbyA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXNwb25zZUluaXRDaGFpbiA9IHt9OwpleHBvcnQgdmFyIFJlc3BvbnNlSW5pdENoYWluID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5jb25zZW5zdXNQYXJhbXMgIT09IHVuZGVmaW5lZCkgewogICAgICBDb25zZW5zdXNQYXJhbXMuZW5jb2RlKG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1zLCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIHZhciBfaXRlcmF0b3I3ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobWVzc2FnZS52YWxpZGF0b3JzKSwKICAgICAgICBfc3RlcDc7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3I3LnMoKTsgIShfc3RlcDcgPSBfaXRlcmF0b3I3Lm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgdiA9IF9zdGVwNy52YWx1ZTsKICAgICAgICBWYWxpZGF0b3JVcGRhdGUuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3I3LmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvcjcuZigpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmFwcEhhc2gubGVuZ3RoICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMjYpLmJ5dGVzKG1lc3NhZ2UuYXBwSGFzaCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VJbml0Q2hhaW4pOwoKICAgIG1lc3NhZ2UudmFsaWRhdG9ycyA9IFtdOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1zID0gQ29uc2Vuc3VzUGFyYW1zLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS52YWxpZGF0b3JzLnB1c2goVmFsaWRhdG9yVXBkYXRlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2UuYXBwSGFzaCA9IHJlYWRlci5ieXRlcygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VJbml0Q2hhaW4pOwoKICAgIG1lc3NhZ2UudmFsaWRhdG9ycyA9IFtdOwoKICAgIGlmIChvYmplY3QuY29uc2Vuc3VzUGFyYW1zICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNvbnNlbnN1c1BhcmFtcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNvbnNlbnN1c1BhcmFtcyA9IENvbnNlbnN1c1BhcmFtcy5mcm9tSlNPTihvYmplY3QuY29uc2Vuc3VzUGFyYW1zKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1zID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QudmFsaWRhdG9ycyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWxpZGF0b3JzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3I4ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LnZhbGlkYXRvcnMpLAogICAgICAgICAgX3N0ZXA4OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjgucygpOyAhKF9zdGVwOCA9IF9pdGVyYXRvcjgubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGUgPSBfc3RlcDgudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLnZhbGlkYXRvcnMucHVzaChWYWxpZGF0b3JVcGRhdGUuZnJvbUpTT04oZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yOC5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yOC5mKCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAob2JqZWN0LmFwcEhhc2ggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYXBwSGFzaCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmFwcEhhc2ggPSBieXRlc0Zyb21CYXNlNjQob2JqZWN0LmFwcEhhc2gpOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5jb25zZW5zdXNQYXJhbXMgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNvbnNlbnN1c1BhcmFtcyA9IG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1zID8gQ29uc2Vuc3VzUGFyYW1zLnRvSlNPTihtZXNzYWdlLmNvbnNlbnN1c1BhcmFtcykgOiB1bmRlZmluZWQpOwoKICAgIGlmIChtZXNzYWdlLnZhbGlkYXRvcnMpIHsKICAgICAgb2JqLnZhbGlkYXRvcnMgPSBtZXNzYWdlLnZhbGlkYXRvcnMubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUgPyBWYWxpZGF0b3JVcGRhdGUudG9KU09OKGUpIDogdW5kZWZpbmVkOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG9iai52YWxpZGF0b3JzID0gW107CiAgICB9CgogICAgbWVzc2FnZS5hcHBIYXNoICE9PSB1bmRlZmluZWQgJiYgKG9iai5hcHBIYXNoID0gYmFzZTY0RnJvbUJ5dGVzKG1lc3NhZ2UuYXBwSGFzaCAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS5hcHBIYXNoIDogbmV3IFVpbnQ4QXJyYXkoKSkpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlSW5pdENoYWluKTsKCiAgICBtZXNzYWdlLnZhbGlkYXRvcnMgPSBbXTsKCiAgICBpZiAob2JqZWN0LmNvbnNlbnN1c1BhcmFtcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb25zZW5zdXNQYXJhbXMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb25zZW5zdXNQYXJhbXMgPSBDb25zZW5zdXNQYXJhbXMuZnJvbVBhcnRpYWwob2JqZWN0LmNvbnNlbnN1c1BhcmFtcyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNvbnNlbnN1c1BhcmFtcyA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZhbGlkYXRvcnMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsaWRhdG9ycyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yOSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC52YWxpZGF0b3JzKSwKICAgICAgICAgIF9zdGVwOTsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I5LnMoKTsgIShfc3RlcDkgPSBfaXRlcmF0b3I5Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXA5LnZhbHVlOwogICAgICAgICAgbWVzc2FnZS52YWxpZGF0b3JzLnB1c2goVmFsaWRhdG9yVXBkYXRlLmZyb21QYXJ0aWFsKGUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjkuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjkuZigpOwogICAgICB9CiAgICB9CgogICAgaWYgKG9iamVjdC5hcHBIYXNoICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmFwcEhhc2ggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5hcHBIYXNoID0gb2JqZWN0LmFwcEhhc2g7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmFwcEhhc2ggPSBuZXcgVWludDhBcnJheSgpOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXNwb25zZVF1ZXJ5ID0gewogIGNvZGU6IDAsCiAgbG9nOiAiIiwKICBpbmZvOiAiIiwKICBpbmRleDogMCwKICBoZWlnaHQ6IDAsCiAgY29kZXNwYWNlOiAiIgp9OwpleHBvcnQgdmFyIFJlc3BvbnNlUXVlcnkgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmNvZGUgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig4KS51aW50MzIobWVzc2FnZS5jb2RlKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5sb2cgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLmxvZyk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuaW5mbyAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMigzNCkuc3RyaW5nKG1lc3NhZ2UuaW5mbyk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuaW5kZXggIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig0MCkuaW50NjQobWVzc2FnZS5pbmRleCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2Uua2V5Lmxlbmd0aCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDUwKS5ieXRlcyhtZXNzYWdlLmtleSk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UudmFsdWUubGVuZ3RoICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoNTgpLmJ5dGVzKG1lc3NhZ2UudmFsdWUpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnByb29mT3BzICE9PSB1bmRlZmluZWQpIHsKICAgICAgUHJvb2ZPcHMuZW5jb2RlKG1lc3NhZ2UucHJvb2ZPcHMsIHdyaXRlci51aW50MzIoNjYpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuaGVpZ2h0ICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoNzIpLmludDY0KG1lc3NhZ2UuaGVpZ2h0KTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5jb2Rlc3BhY2UgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoODIpLnN0cmluZyhtZXNzYWdlLmNvZGVzcGFjZSk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VRdWVyeSk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5jb2RlID0gcmVhZGVyLnVpbnQzMigpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2UubG9nID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIG1lc3NhZ2UuaW5mbyA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDU6CiAgICAgICAgICBtZXNzYWdlLmluZGV4ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDY6CiAgICAgICAgICBtZXNzYWdlLmtleSA9IHJlYWRlci5ieXRlcygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIG1lc3NhZ2UudmFsdWUgPSByZWFkZXIuYnl0ZXMoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDg6CiAgICAgICAgICBtZXNzYWdlLnByb29mT3BzID0gUHJvb2ZPcHMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDk6CiAgICAgICAgICBtZXNzYWdlLmhlaWdodCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICAgIG1lc3NhZ2UuY29kZXNwYWNlID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VRdWVyeSk7CgogICAgaWYgKG9iamVjdC5jb2RlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNvZGUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb2RlID0gTnVtYmVyKG9iamVjdC5jb2RlKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29kZSA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5sb2cgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubG9nICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubG9nID0gU3RyaW5nKG9iamVjdC5sb2cpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5sb2cgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluZm8gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5mbyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluZm8gPSBTdHJpbmcob2JqZWN0LmluZm8pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5pbmZvID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbmRleCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbmRleCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluZGV4ID0gTnVtYmVyKG9iamVjdC5pbmRleCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluZGV4ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmtleSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5rZXkgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5rZXkgPSBieXRlc0Zyb21CYXNlNjQob2JqZWN0LmtleSk7CiAgICB9CgogICAgaWYgKG9iamVjdC52YWx1ZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWx1ZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnZhbHVlID0gYnl0ZXNGcm9tQmFzZTY0KG9iamVjdC52YWx1ZSk7CiAgICB9CgogICAgaWYgKG9iamVjdC5wcm9vZk9wcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wcm9vZk9wcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnByb29mT3BzID0gUHJvb2ZPcHMuZnJvbUpTT04ob2JqZWN0LnByb29mT3BzKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UucHJvb2ZPcHMgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gTnVtYmVyKG9iamVjdC5oZWlnaHQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuY29kZXNwYWNlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNvZGVzcGFjZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNvZGVzcGFjZSA9IFN0cmluZyhvYmplY3QuY29kZXNwYWNlKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29kZXNwYWNlID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmNvZGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNvZGUgPSBtZXNzYWdlLmNvZGUpOwogICAgbWVzc2FnZS5sb2cgIT09IHVuZGVmaW5lZCAmJiAob2JqLmxvZyA9IG1lc3NhZ2UubG9nKTsKICAgIG1lc3NhZ2UuaW5mbyAhPT0gdW5kZWZpbmVkICYmIChvYmouaW5mbyA9IG1lc3NhZ2UuaW5mbyk7CiAgICBtZXNzYWdlLmluZGV4ICE9PSB1bmRlZmluZWQgJiYgKG9iai5pbmRleCA9IG1lc3NhZ2UuaW5kZXgpOwogICAgbWVzc2FnZS5rZXkgIT09IHVuZGVmaW5lZCAmJiAob2JqLmtleSA9IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLmtleSAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS5rZXkgOiBuZXcgVWludDhBcnJheSgpKSk7CiAgICBtZXNzYWdlLnZhbHVlICE9PSB1bmRlZmluZWQgJiYgKG9iai52YWx1ZSA9IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLnZhbHVlICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlLnZhbHVlIDogbmV3IFVpbnQ4QXJyYXkoKSkpOwogICAgbWVzc2FnZS5wcm9vZk9wcyAhPT0gdW5kZWZpbmVkICYmIChvYmoucHJvb2ZPcHMgPSBtZXNzYWdlLnByb29mT3BzID8gUHJvb2ZPcHMudG9KU09OKG1lc3NhZ2UucHJvb2ZPcHMpIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5oZWlnaHQgPSBtZXNzYWdlLmhlaWdodCk7CiAgICBtZXNzYWdlLmNvZGVzcGFjZSAhPT0gdW5kZWZpbmVkICYmIChvYmouY29kZXNwYWNlID0gbWVzc2FnZS5jb2Rlc3BhY2UpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlUXVlcnkpOwoKICAgIGlmIChvYmplY3QuY29kZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb2RlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29kZSA9IG9iamVjdC5jb2RlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb2RlID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmxvZyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5sb2cgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5sb2cgPSBvYmplY3QubG9nOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5sb2cgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluZm8gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5mbyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluZm8gPSBvYmplY3QuaW5mbzsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5mbyA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuaW5kZXggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5kZXggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbmRleCA9IG9iamVjdC5pbmRleDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5kZXggPSAwOwogICAgfQoKICAgIGlmIChvYmplY3Qua2V5ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmtleSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmtleSA9IG9iamVjdC5rZXk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmtleSA9IG5ldyBVaW50OEFycmF5KCk7CiAgICB9CgogICAgaWYgKG9iamVjdC52YWx1ZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWx1ZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnZhbHVlID0gb2JqZWN0LnZhbHVlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS52YWx1ZSA9IG5ldyBVaW50OEFycmF5KCk7CiAgICB9CgogICAgaWYgKG9iamVjdC5wcm9vZk9wcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wcm9vZk9wcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnByb29mT3BzID0gUHJvb2ZPcHMuZnJvbVBhcnRpYWwob2JqZWN0LnByb29mT3BzKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UucHJvb2ZPcHMgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gb2JqZWN0LmhlaWdodDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNvZGVzcGFjZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb2Rlc3BhY2UgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb2Rlc3BhY2UgPSBvYmplY3QuY29kZXNwYWNlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb2Rlc3BhY2UgPSAiIjsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVzcG9uc2VCZWdpbkJsb2NrID0ge307CmV4cG9ydCB2YXIgUmVzcG9uc2VCZWdpbkJsb2NrID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICB2YXIgX2l0ZXJhdG9yMTAgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihtZXNzYWdlLmV2ZW50cyksCiAgICAgICAgX3N0ZXAxMDsKCiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvcjEwLnMoKTsgIShfc3RlcDEwID0gX2l0ZXJhdG9yMTAubigpKS5kb25lOykgewogICAgICAgIHZhciB2ID0gX3N0ZXAxMC52YWx1ZTsKICAgICAgICBFdmVudC5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIF9pdGVyYXRvcjEwLmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvcjEwLmYoKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUJlZ2luQmxvY2spOwoKICAgIG1lc3NhZ2UuZXZlbnRzID0gW107CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5ldmVudHMucHVzaChFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlQmVnaW5CbG9jayk7CgogICAgbWVzc2FnZS5ldmVudHMgPSBbXTsKCiAgICBpZiAob2JqZWN0LmV2ZW50cyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5ldmVudHMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjExID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LmV2ZW50cyksCiAgICAgICAgICBfc3RlcDExOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjExLnMoKTsgIShfc3RlcDExID0gX2l0ZXJhdG9yMTEubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGUgPSBfc3RlcDExLnZhbHVlOwogICAgICAgICAgbWVzc2FnZS5ldmVudHMucHVzaChFdmVudC5mcm9tSlNPTihlKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IxMS5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMTEuZigpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CgogICAgaWYgKG1lc3NhZ2UuZXZlbnRzKSB7CiAgICAgIG9iai5ldmVudHMgPSBtZXNzYWdlLmV2ZW50cy5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZSA/IEV2ZW50LnRvSlNPTihlKSA6IHVuZGVmaW5lZDsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBvYmouZXZlbnRzID0gW107CiAgICB9CgogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlQmVnaW5CbG9jayk7CgogICAgbWVzc2FnZS5ldmVudHMgPSBbXTsKCiAgICBpZiAob2JqZWN0LmV2ZW50cyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5ldmVudHMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjEyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LmV2ZW50cyksCiAgICAgICAgICBfc3RlcDEyOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjEyLnMoKTsgIShfc3RlcDEyID0gX2l0ZXJhdG9yMTIubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGUgPSBfc3RlcDEyLnZhbHVlOwogICAgICAgICAgbWVzc2FnZS5ldmVudHMucHVzaChFdmVudC5mcm9tUGFydGlhbChlKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IxMi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMTIuZigpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlc3BvbnNlQ2hlY2tUeCA9IHsKICBjb2RlOiAwLAogIGxvZzogIiIsCiAgaW5mbzogIiIsCiAgZ2FzV2FudGVkOiAwLAogIGdhc1VzZWQ6IDAsCiAgY29kZXNwYWNlOiAiIgp9OwpleHBvcnQgdmFyIFJlc3BvbnNlQ2hlY2tUeCA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UuY29kZSAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDgpLnVpbnQzMihtZXNzYWdlLmNvZGUpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmRhdGEubGVuZ3RoICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTgpLmJ5dGVzKG1lc3NhZ2UuZGF0YSk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UubG9nICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5sb2cpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmluZm8gIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMzQpLnN0cmluZyhtZXNzYWdlLmluZm8pOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmdhc1dhbnRlZCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDQwKS5pbnQ2NChtZXNzYWdlLmdhc1dhbnRlZCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuZ2FzVXNlZCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDQ4KS5pbnQ2NChtZXNzYWdlLmdhc1VzZWQpOwogICAgfQoKICAgIHZhciBfaXRlcmF0b3IxMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG1lc3NhZ2UuZXZlbnRzKSwKICAgICAgICBfc3RlcDEzOwoKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yMTMucygpOyAhKF9zdGVwMTMgPSBfaXRlcmF0b3IxMy5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIHYgPSBfc3RlcDEzLnZhbHVlOwogICAgICAgIEV2ZW50LmVuY29kZSh2LCB3cml0ZXIudWludDMyKDU4KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yMTMuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yMTMuZigpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmNvZGVzcGFjZSAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMig2Nikuc3RyaW5nKG1lc3NhZ2UuY29kZXNwYWNlKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUNoZWNrVHgpOwoKICAgIG1lc3NhZ2UuZXZlbnRzID0gW107CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5jb2RlID0gcmVhZGVyLnVpbnQzMigpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIG1lc3NhZ2UuZGF0YSA9IHJlYWRlci5ieXRlcygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2UubG9nID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIG1lc3NhZ2UuaW5mbyA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDU6CiAgICAgICAgICBtZXNzYWdlLmdhc1dhbnRlZCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA2OgogICAgICAgICAgbWVzc2FnZS5nYXNVc2VkID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBtZXNzYWdlLmV2ZW50cy5wdXNoKEV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgODoKICAgICAgICAgIG1lc3NhZ2UuY29kZXNwYWNlID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VDaGVja1R4KTsKCiAgICBtZXNzYWdlLmV2ZW50cyA9IFtdOwoKICAgIGlmIChvYmplY3QuY29kZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb2RlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29kZSA9IE51bWJlcihvYmplY3QuY29kZSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNvZGUgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuZGF0YSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kYXRhICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGF0YSA9IGJ5dGVzRnJvbUJhc2U2NChvYmplY3QuZGF0YSk7CiAgICB9CgogICAgaWYgKG9iamVjdC5sb2cgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubG9nICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubG9nID0gU3RyaW5nKG9iamVjdC5sb2cpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5sb2cgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluZm8gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5mbyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluZm8gPSBTdHJpbmcob2JqZWN0LmluZm8pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5pbmZvID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5nYXNXYW50ZWQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZ2FzV2FudGVkICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZ2FzV2FudGVkID0gTnVtYmVyKG9iamVjdC5nYXNXYW50ZWQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5nYXNXYW50ZWQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuZ2FzVXNlZCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5nYXNVc2VkICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZ2FzVXNlZCA9IE51bWJlcihvYmplY3QuZ2FzVXNlZCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmdhc1VzZWQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuZXZlbnRzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmV2ZW50cyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yMTQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3QuZXZlbnRzKSwKICAgICAgICAgIF9zdGVwMTQ7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMTQucygpOyAhKF9zdGVwMTQgPSBfaXRlcmF0b3IxNC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZSA9IF9zdGVwMTQudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLmV2ZW50cy5wdXNoKEV2ZW50LmZyb21KU09OKGUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjE0LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IxNC5mKCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAob2JqZWN0LmNvZGVzcGFjZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb2Rlc3BhY2UgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb2Rlc3BhY2UgPSBTdHJpbmcob2JqZWN0LmNvZGVzcGFjZSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNvZGVzcGFjZSA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5jb2RlICE9PSB1bmRlZmluZWQgJiYgKG9iai5jb2RlID0gbWVzc2FnZS5jb2RlKTsKICAgIG1lc3NhZ2UuZGF0YSAhPT0gdW5kZWZpbmVkICYmIChvYmouZGF0YSA9IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLmRhdGEgIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UuZGF0YSA6IG5ldyBVaW50OEFycmF5KCkpKTsKICAgIG1lc3NhZ2UubG9nICE9PSB1bmRlZmluZWQgJiYgKG9iai5sb2cgPSBtZXNzYWdlLmxvZyk7CiAgICBtZXNzYWdlLmluZm8gIT09IHVuZGVmaW5lZCAmJiAob2JqLmluZm8gPSBtZXNzYWdlLmluZm8pOwogICAgbWVzc2FnZS5nYXNXYW50ZWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmdhc1dhbnRlZCA9IG1lc3NhZ2UuZ2FzV2FudGVkKTsKICAgIG1lc3NhZ2UuZ2FzVXNlZCAhPT0gdW5kZWZpbmVkICYmIChvYmouZ2FzVXNlZCA9IG1lc3NhZ2UuZ2FzVXNlZCk7CgogICAgaWYgKG1lc3NhZ2UuZXZlbnRzKSB7CiAgICAgIG9iai5ldmVudHMgPSBtZXNzYWdlLmV2ZW50cy5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZSA/IEV2ZW50LnRvSlNPTihlKSA6IHVuZGVmaW5lZDsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBvYmouZXZlbnRzID0gW107CiAgICB9CgogICAgbWVzc2FnZS5jb2Rlc3BhY2UgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNvZGVzcGFjZSA9IG1lc3NhZ2UuY29kZXNwYWNlKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUNoZWNrVHgpOwoKICAgIG1lc3NhZ2UuZXZlbnRzID0gW107CgogICAgaWYgKG9iamVjdC5jb2RlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNvZGUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb2RlID0gb2JqZWN0LmNvZGU7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNvZGUgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuZGF0YSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kYXRhICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGF0YSA9IG9iamVjdC5kYXRhOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5kYXRhID0gbmV3IFVpbnQ4QXJyYXkoKTsKICAgIH0KCiAgICBpZiAob2JqZWN0LmxvZyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5sb2cgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5sb2cgPSBvYmplY3QubG9nOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5sb2cgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluZm8gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5mbyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluZm8gPSBvYmplY3QuaW5mbzsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5mbyA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuZ2FzV2FudGVkICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lmdhc1dhbnRlZCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmdhc1dhbnRlZCA9IG9iamVjdC5nYXNXYW50ZWQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmdhc1dhbnRlZCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5nYXNVc2VkICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lmdhc1VzZWQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5nYXNVc2VkID0gb2JqZWN0Lmdhc1VzZWQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmdhc1VzZWQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuZXZlbnRzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmV2ZW50cyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yMTUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3QuZXZlbnRzKSwKICAgICAgICAgIF9zdGVwMTU7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMTUucygpOyAhKF9zdGVwMTUgPSBfaXRlcmF0b3IxNS5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZSA9IF9zdGVwMTUudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLmV2ZW50cy5wdXNoKEV2ZW50LmZyb21QYXJ0aWFsKGUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjE1LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IxNS5mKCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAob2JqZWN0LmNvZGVzcGFjZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb2Rlc3BhY2UgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb2Rlc3BhY2UgPSBvYmplY3QuY29kZXNwYWNlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb2Rlc3BhY2UgPSAiIjsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVzcG9uc2VEZWxpdmVyVHggPSB7CiAgY29kZTogMCwKICBsb2c6ICIiLAogIGluZm86ICIiLAogIGdhc1dhbnRlZDogMCwKICBnYXNVc2VkOiAwLAogIGNvZGVzcGFjZTogIiIKfTsKZXhwb3J0IHZhciBSZXNwb25zZURlbGl2ZXJUeCA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UuY29kZSAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDgpLnVpbnQzMihtZXNzYWdlLmNvZGUpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmRhdGEubGVuZ3RoICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTgpLmJ5dGVzKG1lc3NhZ2UuZGF0YSk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UubG9nICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5sb2cpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmluZm8gIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMzQpLnN0cmluZyhtZXNzYWdlLmluZm8pOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmdhc1dhbnRlZCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDQwKS5pbnQ2NChtZXNzYWdlLmdhc1dhbnRlZCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuZ2FzVXNlZCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDQ4KS5pbnQ2NChtZXNzYWdlLmdhc1VzZWQpOwogICAgfQoKICAgIHZhciBfaXRlcmF0b3IxNiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG1lc3NhZ2UuZXZlbnRzKSwKICAgICAgICBfc3RlcDE2OwoKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yMTYucygpOyAhKF9zdGVwMTYgPSBfaXRlcmF0b3IxNi5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIHYgPSBfc3RlcDE2LnZhbHVlOwogICAgICAgIEV2ZW50LmVuY29kZSh2LCB3cml0ZXIudWludDMyKDU4KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yMTYuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yMTYuZigpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmNvZGVzcGFjZSAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMig2Nikuc3RyaW5nKG1lc3NhZ2UuY29kZXNwYWNlKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZURlbGl2ZXJUeCk7CgogICAgbWVzc2FnZS5ldmVudHMgPSBbXTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmNvZGUgPSByZWFkZXIudWludDMyKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5kYXRhID0gcmVhZGVyLmJ5dGVzKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5sb2cgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA0OgogICAgICAgICAgbWVzc2FnZS5pbmZvID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNToKICAgICAgICAgIG1lc3NhZ2UuZ2FzV2FudGVkID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDY6CiAgICAgICAgICBtZXNzYWdlLmdhc1VzZWQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIG1lc3NhZ2UuZXZlbnRzLnB1c2goRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA4OgogICAgICAgICAgbWVzc2FnZS5jb2Rlc3BhY2UgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZURlbGl2ZXJUeCk7CgogICAgbWVzc2FnZS5ldmVudHMgPSBbXTsKCiAgICBpZiAob2JqZWN0LmNvZGUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29kZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNvZGUgPSBOdW1iZXIob2JqZWN0LmNvZGUpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb2RlID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmRhdGEgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZGF0YSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmRhdGEgPSBieXRlc0Zyb21CYXNlNjQob2JqZWN0LmRhdGEpOwogICAgfQoKICAgIGlmIChvYmplY3QubG9nICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmxvZyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmxvZyA9IFN0cmluZyhvYmplY3QubG9nKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubG9nID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbmZvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluZm8gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbmZvID0gU3RyaW5nKG9iamVjdC5pbmZvKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5mbyA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuZ2FzV2FudGVkICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lmdhc1dhbnRlZCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmdhc1dhbnRlZCA9IE51bWJlcihvYmplY3QuZ2FzV2FudGVkKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZ2FzV2FudGVkID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0Lmdhc1VzZWQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZ2FzVXNlZCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmdhc1VzZWQgPSBOdW1iZXIob2JqZWN0Lmdhc1VzZWQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5nYXNVc2VkID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmV2ZW50cyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5ldmVudHMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjE3ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LmV2ZW50cyksCiAgICAgICAgICBfc3RlcDE3OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjE3LnMoKTsgIShfc3RlcDE3ID0gX2l0ZXJhdG9yMTcubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGUgPSBfc3RlcDE3LnZhbHVlOwogICAgICAgICAgbWVzc2FnZS5ldmVudHMucHVzaChFdmVudC5mcm9tSlNPTihlKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IxNy5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMTcuZigpOwogICAgICB9CiAgICB9CgogICAgaWYgKG9iamVjdC5jb2Rlc3BhY2UgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29kZXNwYWNlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29kZXNwYWNlID0gU3RyaW5nKG9iamVjdC5jb2Rlc3BhY2UpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb2Rlc3BhY2UgPSAiIjsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UuY29kZSAhPT0gdW5kZWZpbmVkICYmIChvYmouY29kZSA9IG1lc3NhZ2UuY29kZSk7CiAgICBtZXNzYWdlLmRhdGEgIT09IHVuZGVmaW5lZCAmJiAob2JqLmRhdGEgPSBiYXNlNjRGcm9tQnl0ZXMobWVzc2FnZS5kYXRhICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlLmRhdGEgOiBuZXcgVWludDhBcnJheSgpKSk7CiAgICBtZXNzYWdlLmxvZyAhPT0gdW5kZWZpbmVkICYmIChvYmoubG9nID0gbWVzc2FnZS5sb2cpOwogICAgbWVzc2FnZS5pbmZvICE9PSB1bmRlZmluZWQgJiYgKG9iai5pbmZvID0gbWVzc2FnZS5pbmZvKTsKICAgIG1lc3NhZ2UuZ2FzV2FudGVkICE9PSB1bmRlZmluZWQgJiYgKG9iai5nYXNXYW50ZWQgPSBtZXNzYWdlLmdhc1dhbnRlZCk7CiAgICBtZXNzYWdlLmdhc1VzZWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmdhc1VzZWQgPSBtZXNzYWdlLmdhc1VzZWQpOwoKICAgIGlmIChtZXNzYWdlLmV2ZW50cykgewogICAgICBvYmouZXZlbnRzID0gbWVzc2FnZS5ldmVudHMubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUgPyBFdmVudC50b0pTT04oZSkgOiB1bmRlZmluZWQ7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgb2JqLmV2ZW50cyA9IFtdOwogICAgfQoKICAgIG1lc3NhZ2UuY29kZXNwYWNlICE9PSB1bmRlZmluZWQgJiYgKG9iai5jb2Rlc3BhY2UgPSBtZXNzYWdlLmNvZGVzcGFjZSk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VEZWxpdmVyVHgpOwoKICAgIG1lc3NhZ2UuZXZlbnRzID0gW107CgogICAgaWYgKG9iamVjdC5jb2RlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNvZGUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb2RlID0gb2JqZWN0LmNvZGU7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNvZGUgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuZGF0YSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kYXRhICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGF0YSA9IG9iamVjdC5kYXRhOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5kYXRhID0gbmV3IFVpbnQ4QXJyYXkoKTsKICAgIH0KCiAgICBpZiAob2JqZWN0LmxvZyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5sb2cgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5sb2cgPSBvYmplY3QubG9nOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5sb2cgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluZm8gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5mbyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluZm8gPSBvYmplY3QuaW5mbzsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5mbyA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuZ2FzV2FudGVkICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lmdhc1dhbnRlZCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmdhc1dhbnRlZCA9IG9iamVjdC5nYXNXYW50ZWQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmdhc1dhbnRlZCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5nYXNVc2VkICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lmdhc1VzZWQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5nYXNVc2VkID0gb2JqZWN0Lmdhc1VzZWQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmdhc1VzZWQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuZXZlbnRzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmV2ZW50cyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yMTggPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3QuZXZlbnRzKSwKICAgICAgICAgIF9zdGVwMTg7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMTgucygpOyAhKF9zdGVwMTggPSBfaXRlcmF0b3IxOC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZSA9IF9zdGVwMTgudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLmV2ZW50cy5wdXNoKEV2ZW50LmZyb21QYXJ0aWFsKGUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjE4LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IxOC5mKCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAob2JqZWN0LmNvZGVzcGFjZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb2Rlc3BhY2UgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb2Rlc3BhY2UgPSBvYmplY3QuY29kZXNwYWNlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb2Rlc3BhY2UgPSAiIjsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVzcG9uc2VFbmRCbG9jayA9IHt9OwpleHBvcnQgdmFyIFJlc3BvbnNlRW5kQmxvY2sgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIHZhciBfaXRlcmF0b3IxOSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG1lc3NhZ2UudmFsaWRhdG9yVXBkYXRlcyksCiAgICAgICAgX3N0ZXAxOTsKCiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvcjE5LnMoKTsgIShfc3RlcDE5ID0gX2l0ZXJhdG9yMTkubigpKS5kb25lOykgewogICAgICAgIHZhciB2ID0gX3N0ZXAxOS52YWx1ZTsKICAgICAgICBWYWxpZGF0b3JVcGRhdGUuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IxOS5lKGVycik7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXRlcmF0b3IxOS5mKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1VcGRhdGVzICE9PSB1bmRlZmluZWQpIHsKICAgICAgQ29uc2Vuc3VzUGFyYW1zLmVuY29kZShtZXNzYWdlLmNvbnNlbnN1c1BhcmFtVXBkYXRlcywgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICB2YXIgX2l0ZXJhdG9yMjAgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihtZXNzYWdlLmV2ZW50cyksCiAgICAgICAgX3N0ZXAyMDsKCiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvcjIwLnMoKTsgIShfc3RlcDIwID0gX2l0ZXJhdG9yMjAubigpKS5kb25lOykgewogICAgICAgIHZhciBfdiA9IF9zdGVwMjAudmFsdWU7CiAgICAgICAgRXZlbnQuZW5jb2RlKF92LCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yMjAuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yMjAuZigpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlRW5kQmxvY2spOwoKICAgIG1lc3NhZ2UudmFsaWRhdG9yVXBkYXRlcyA9IFtdOwogICAgbWVzc2FnZS5ldmVudHMgPSBbXTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLnZhbGlkYXRvclVwZGF0ZXMucHVzaChWYWxpZGF0b3JVcGRhdGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5jb25zZW5zdXNQYXJhbVVwZGF0ZXMgPSBDb25zZW5zdXNQYXJhbXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBtZXNzYWdlLmV2ZW50cy5wdXNoKEV2ZW50LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VFbmRCbG9jayk7CgogICAgbWVzc2FnZS52YWxpZGF0b3JVcGRhdGVzID0gW107CiAgICBtZXNzYWdlLmV2ZW50cyA9IFtdOwoKICAgIGlmIChvYmplY3QudmFsaWRhdG9yVXBkYXRlcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWxpZGF0b3JVcGRhdGVzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3IyMSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC52YWxpZGF0b3JVcGRhdGVzKSwKICAgICAgICAgIF9zdGVwMjE7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMjEucygpOyAhKF9zdGVwMjEgPSBfaXRlcmF0b3IyMS5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZSA9IF9zdGVwMjEudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLnZhbGlkYXRvclVwZGF0ZXMucHVzaChWYWxpZGF0b3JVcGRhdGUuZnJvbUpTT04oZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMjEuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjIxLmYoKTsKICAgICAgfQogICAgfQoKICAgIGlmIChvYmplY3QuY29uc2Vuc3VzUGFyYW1VcGRhdGVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNvbnNlbnN1c1BhcmFtVXBkYXRlcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNvbnNlbnN1c1BhcmFtVXBkYXRlcyA9IENvbnNlbnN1c1BhcmFtcy5mcm9tSlNPTihvYmplY3QuY29uc2Vuc3VzUGFyYW1VcGRhdGVzKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1VcGRhdGVzID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuZXZlbnRzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmV2ZW50cyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yMjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3QuZXZlbnRzKSwKICAgICAgICAgIF9zdGVwMjI7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMjIucygpOyAhKF9zdGVwMjIgPSBfaXRlcmF0b3IyMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgX2UgPSBfc3RlcDIyLnZhbHVlOwogICAgICAgICAgbWVzc2FnZS5ldmVudHMucHVzaChFdmVudC5mcm9tSlNPTihfZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMjIuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjIyLmYoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwoKICAgIGlmIChtZXNzYWdlLnZhbGlkYXRvclVwZGF0ZXMpIHsKICAgICAgb2JqLnZhbGlkYXRvclVwZGF0ZXMgPSBtZXNzYWdlLnZhbGlkYXRvclVwZGF0ZXMubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUgPyBWYWxpZGF0b3JVcGRhdGUudG9KU09OKGUpIDogdW5kZWZpbmVkOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG9iai52YWxpZGF0b3JVcGRhdGVzID0gW107CiAgICB9CgogICAgbWVzc2FnZS5jb25zZW5zdXNQYXJhbVVwZGF0ZXMgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNvbnNlbnN1c1BhcmFtVXBkYXRlcyA9IG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1VcGRhdGVzID8gQ29uc2Vuc3VzUGFyYW1zLnRvSlNPTihtZXNzYWdlLmNvbnNlbnN1c1BhcmFtVXBkYXRlcykgOiB1bmRlZmluZWQpOwoKICAgIGlmIChtZXNzYWdlLmV2ZW50cykgewogICAgICBvYmouZXZlbnRzID0gbWVzc2FnZS5ldmVudHMubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUgPyBFdmVudC50b0pTT04oZSkgOiB1bmRlZmluZWQ7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgb2JqLmV2ZW50cyA9IFtdOwogICAgfQoKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUVuZEJsb2NrKTsKCiAgICBtZXNzYWdlLnZhbGlkYXRvclVwZGF0ZXMgPSBbXTsKICAgIG1lc3NhZ2UuZXZlbnRzID0gW107CgogICAgaWYgKG9iamVjdC52YWxpZGF0b3JVcGRhdGVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZhbGlkYXRvclVwZGF0ZXMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjIzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LnZhbGlkYXRvclVwZGF0ZXMpLAogICAgICAgICAgX3N0ZXAyMzsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IyMy5zKCk7ICEoX3N0ZXAyMyA9IF9pdGVyYXRvcjIzLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAyMy52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UudmFsaWRhdG9yVXBkYXRlcy5wdXNoKFZhbGlkYXRvclVwZGF0ZS5mcm9tUGFydGlhbChlKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IyMy5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMjMuZigpOwogICAgICB9CiAgICB9CgogICAgaWYgKG9iamVjdC5jb25zZW5zdXNQYXJhbVVwZGF0ZXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29uc2Vuc3VzUGFyYW1VcGRhdGVzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29uc2Vuc3VzUGFyYW1VcGRhdGVzID0gQ29uc2Vuc3VzUGFyYW1zLmZyb21QYXJ0aWFsKG9iamVjdC5jb25zZW5zdXNQYXJhbVVwZGF0ZXMpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb25zZW5zdXNQYXJhbVVwZGF0ZXMgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5ldmVudHMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZXZlbnRzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3IyNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC5ldmVudHMpLAogICAgICAgICAgX3N0ZXAyNDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IyNC5zKCk7ICEoX3N0ZXAyNCA9IF9pdGVyYXRvcjI0Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBfZTIgPSBfc3RlcDI0LnZhbHVlOwogICAgICAgICAgbWVzc2FnZS5ldmVudHMucHVzaChFdmVudC5mcm9tUGFydGlhbChfZTIpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjI0LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IyNC5mKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVzcG9uc2VDb21taXQgPSB7CiAgcmV0YWluSGVpZ2h0OiAwCn07CmV4cG9ydCB2YXIgUmVzcG9uc2VDb21taXQgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmRhdGEubGVuZ3RoICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTgpLmJ5dGVzKG1lc3NhZ2UuZGF0YSk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UucmV0YWluSGVpZ2h0ICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMjQpLmludDY0KG1lc3NhZ2UucmV0YWluSGVpZ2h0KTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUNvbW1pdCk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5kYXRhID0gcmVhZGVyLmJ5dGVzKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5yZXRhaW5IZWlnaHQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VDb21taXQpOwoKICAgIGlmIChvYmplY3QuZGF0YSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kYXRhICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGF0YSA9IGJ5dGVzRnJvbUJhc2U2NChvYmplY3QuZGF0YSk7CiAgICB9CgogICAgaWYgKG9iamVjdC5yZXRhaW5IZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucmV0YWluSGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucmV0YWluSGVpZ2h0ID0gTnVtYmVyKG9iamVjdC5yZXRhaW5IZWlnaHQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5yZXRhaW5IZWlnaHQgPSAwOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5kYXRhICE9PSB1bmRlZmluZWQgJiYgKG9iai5kYXRhID0gYmFzZTY0RnJvbUJ5dGVzKG1lc3NhZ2UuZGF0YSAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS5kYXRhIDogbmV3IFVpbnQ4QXJyYXkoKSkpOwogICAgbWVzc2FnZS5yZXRhaW5IZWlnaHQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnJldGFpbkhlaWdodCA9IG1lc3NhZ2UucmV0YWluSGVpZ2h0KTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUNvbW1pdCk7CgogICAgaWYgKG9iamVjdC5kYXRhICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmRhdGEgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5kYXRhID0gb2JqZWN0LmRhdGE7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmRhdGEgPSBuZXcgVWludDhBcnJheSgpOwogICAgfQoKICAgIGlmIChvYmplY3QucmV0YWluSGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnJldGFpbkhlaWdodCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnJldGFpbkhlaWdodCA9IG9iamVjdC5yZXRhaW5IZWlnaHQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnJldGFpbkhlaWdodCA9IDA7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlc3BvbnNlTGlzdFNuYXBzaG90cyA9IHt9OwpleHBvcnQgdmFyIFJlc3BvbnNlTGlzdFNuYXBzaG90cyA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgdmFyIF9pdGVyYXRvcjI1ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobWVzc2FnZS5zbmFwc2hvdHMpLAogICAgICAgIF9zdGVwMjU7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IyNS5zKCk7ICEoX3N0ZXAyNSA9IF9pdGVyYXRvcjI1Lm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgdiA9IF9zdGVwMjUudmFsdWU7CiAgICAgICAgU25hcHNob3QuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IyNS5lKGVycik7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXRlcmF0b3IyNS5mKCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VMaXN0U25hcHNob3RzKTsKCiAgICBtZXNzYWdlLnNuYXBzaG90cyA9IFtdOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2Uuc25hcHNob3RzLnB1c2goU25hcHNob3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUxpc3RTbmFwc2hvdHMpOwoKICAgIG1lc3NhZ2Uuc25hcHNob3RzID0gW107CgogICAgaWYgKG9iamVjdC5zbmFwc2hvdHMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc25hcHNob3RzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3IyNiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC5zbmFwc2hvdHMpLAogICAgICAgICAgX3N0ZXAyNjsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IyNi5zKCk7ICEoX3N0ZXAyNiA9IF9pdGVyYXRvcjI2Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAyNi52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2Uuc25hcHNob3RzLnB1c2goU25hcHNob3QuZnJvbUpTT04oZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMjYuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjI2LmYoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwoKICAgIGlmIChtZXNzYWdlLnNuYXBzaG90cykgewogICAgICBvYmouc25hcHNob3RzID0gbWVzc2FnZS5zbmFwc2hvdHMubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUgPyBTbmFwc2hvdC50b0pTT04oZSkgOiB1bmRlZmluZWQ7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgb2JqLnNuYXBzaG90cyA9IFtdOwogICAgfQoKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUxpc3RTbmFwc2hvdHMpOwoKICAgIG1lc3NhZ2Uuc25hcHNob3RzID0gW107CgogICAgaWYgKG9iamVjdC5zbmFwc2hvdHMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc25hcHNob3RzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3IyNyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC5zbmFwc2hvdHMpLAogICAgICAgICAgX3N0ZXAyNzsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IyNy5zKCk7ICEoX3N0ZXAyNyA9IF9pdGVyYXRvcjI3Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAyNy52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2Uuc25hcHNob3RzLnB1c2goU25hcHNob3QuZnJvbVBhcnRpYWwoZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMjcuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjI3LmYoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZXNwb25zZU9mZmVyU25hcHNob3QgPSB7CiAgcmVzdWx0OiAwCn07CmV4cG9ydCB2YXIgUmVzcG9uc2VPZmZlclNuYXBzaG90ID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5yZXN1bHQgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMig4KS5pbnQzMihtZXNzYWdlLnJlc3VsdCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VPZmZlclNuYXBzaG90KTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLnJlc3VsdCA9IHJlYWRlci5pbnQzMigpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VPZmZlclNuYXBzaG90KTsKCiAgICBpZiAob2JqZWN0LnJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5yZXN1bHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5yZXN1bHQgPSByZXNwb25zZU9mZmVyU25hcHNob3RfUmVzdWx0RnJvbUpTT04ob2JqZWN0LnJlc3VsdCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnJlc3VsdCA9IDA7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLnJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIChvYmoucmVzdWx0ID0gcmVzcG9uc2VPZmZlclNuYXBzaG90X1Jlc3VsdFRvSlNPTihtZXNzYWdlLnJlc3VsdCkpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlT2ZmZXJTbmFwc2hvdCk7CgogICAgaWYgKG9iamVjdC5yZXN1bHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucmVzdWx0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucmVzdWx0ID0gb2JqZWN0LnJlc3VsdDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UucmVzdWx0ID0gMDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVzcG9uc2VMb2FkU25hcHNob3RDaHVuayA9IHt9OwpleHBvcnQgdmFyIFJlc3BvbnNlTG9hZFNuYXBzaG90Q2h1bmsgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmNodW5rLmxlbmd0aCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDEwKS5ieXRlcyhtZXNzYWdlLmNodW5rKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUxvYWRTbmFwc2hvdENodW5rKTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmNodW5rID0gcmVhZGVyLmJ5dGVzKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZXNwb25zZUxvYWRTbmFwc2hvdENodW5rKTsKCiAgICBpZiAob2JqZWN0LmNodW5rICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNodW5rICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY2h1bmsgPSBieXRlc0Zyb21CYXNlNjQob2JqZWN0LmNodW5rKTsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UuY2h1bmsgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNodW5rID0gYmFzZTY0RnJvbUJ5dGVzKG1lc3NhZ2UuY2h1bmsgIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UuY2h1bmsgOiBuZXcgVWludDhBcnJheSgpKSk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VMb2FkU25hcHNob3RDaHVuayk7CgogICAgaWYgKG9iamVjdC5jaHVuayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jaHVuayAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNodW5rID0gb2JqZWN0LmNodW5rOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jaHVuayA9IG5ldyBVaW50OEFycmF5KCk7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rID0gewogIHJlc3VsdDogMCwKICByZWZldGNoQ2h1bmtzOiAwLAogIHJlamVjdFNlbmRlcnM6ICIiCn07CmV4cG9ydCB2YXIgUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmsgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLnJlc3VsdCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDgpLmludDMyKG1lc3NhZ2UucmVzdWx0KTsKICAgIH0KCiAgICB3cml0ZXIudWludDMyKDE4KS5mb3JrKCk7CgogICAgdmFyIF9pdGVyYXRvcjI4ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobWVzc2FnZS5yZWZldGNoQ2h1bmtzKSwKICAgICAgICBfc3RlcDI4OwoKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yMjgucygpOyAhKF9zdGVwMjggPSBfaXRlcmF0b3IyOC5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIHYgPSBfc3RlcDI4LnZhbHVlOwogICAgICAgIHdyaXRlci51aW50MzIodik7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IyOC5lKGVycik7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXRlcmF0b3IyOC5mKCk7CiAgICB9CgogICAgd3JpdGVyLmxkZWxpbSgpOwoKICAgIHZhciBfaXRlcmF0b3IyOSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG1lc3NhZ2UucmVqZWN0U2VuZGVycyksCiAgICAgICAgX3N0ZXAyOTsKCiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvcjI5LnMoKTsgIShfc3RlcDI5ID0gX2l0ZXJhdG9yMjkubigpKS5kb25lOykgewogICAgICAgIHZhciBfdjIgPSBfc3RlcDI5LnZhbHVlOwogICAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhfdjIpOwogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yMjkuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yMjkuZigpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rKTsKCiAgICBtZXNzYWdlLnJlZmV0Y2hDaHVua3MgPSBbXTsKICAgIG1lc3NhZ2UucmVqZWN0U2VuZGVycyA9IFtdOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UucmVzdWx0ID0gcmVhZGVyLmludDMyKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gMikgewogICAgICAgICAgICB2YXIgZW5kMiA9IHJlYWRlci51aW50MzIoKSArIHJlYWRlci5wb3M7CgogICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZDIpIHsKICAgICAgICAgICAgICBtZXNzYWdlLnJlZmV0Y2hDaHVua3MucHVzaChyZWFkZXIudWludDMyKCkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtZXNzYWdlLnJlZmV0Y2hDaHVua3MucHVzaChyZWFkZXIudWludDMyKCkpOwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBtZXNzYWdlLnJlamVjdFNlbmRlcnMucHVzaChyZWFkZXIuc3RyaW5nKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmspOwoKICAgIG1lc3NhZ2UucmVmZXRjaENodW5rcyA9IFtdOwogICAgbWVzc2FnZS5yZWplY3RTZW5kZXJzID0gW107CgogICAgaWYgKG9iamVjdC5yZXN1bHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucmVzdWx0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucmVzdWx0ID0gcmVzcG9uc2VBcHBseVNuYXBzaG90Q2h1bmtfUmVzdWx0RnJvbUpTT04ob2JqZWN0LnJlc3VsdCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnJlc3VsdCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5yZWZldGNoQ2h1bmtzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnJlZmV0Y2hDaHVua3MgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjMwID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LnJlZmV0Y2hDaHVua3MpLAogICAgICAgICAgX3N0ZXAzMDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IzMC5zKCk7ICEoX3N0ZXAzMCA9IF9pdGVyYXRvcjMwLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAzMC52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UucmVmZXRjaENodW5rcy5wdXNoKE51bWJlcihlKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IzMC5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMzAuZigpOwogICAgICB9CiAgICB9CgogICAgaWYgKG9iamVjdC5yZWplY3RTZW5kZXJzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnJlamVjdFNlbmRlcnMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjMxID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LnJlamVjdFNlbmRlcnMpLAogICAgICAgICAgX3N0ZXAzMTsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IzMS5zKCk7ICEoX3N0ZXAzMSA9IF9pdGVyYXRvcjMxLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBfZTMgPSBfc3RlcDMxLnZhbHVlOwogICAgICAgICAgbWVzc2FnZS5yZWplY3RTZW5kZXJzLnB1c2goU3RyaW5nKF9lMykpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMzEuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjMxLmYoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5yZXN1bHQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnJlc3VsdCA9IHJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rX1Jlc3VsdFRvSlNPTihtZXNzYWdlLnJlc3VsdCkpOwoKICAgIGlmIChtZXNzYWdlLnJlZmV0Y2hDaHVua3MpIHsKICAgICAgb2JqLnJlZmV0Y2hDaHVua3MgPSBtZXNzYWdlLnJlZmV0Y2hDaHVua3MubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGU7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgb2JqLnJlZmV0Y2hDaHVua3MgPSBbXTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5yZWplY3RTZW5kZXJzKSB7CiAgICAgIG9iai5yZWplY3RTZW5kZXJzID0gbWVzc2FnZS5yZWplY3RTZW5kZXJzLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG9iai5yZWplY3RTZW5kZXJzID0gW107CiAgICB9CgogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlc3BvbnNlQXBwbHlTbmFwc2hvdENodW5rKTsKCiAgICBtZXNzYWdlLnJlZmV0Y2hDaHVua3MgPSBbXTsKICAgIG1lc3NhZ2UucmVqZWN0U2VuZGVycyA9IFtdOwoKICAgIGlmIChvYmplY3QucmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnJlc3VsdCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnJlc3VsdCA9IG9iamVjdC5yZXN1bHQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnJlc3VsdCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5yZWZldGNoQ2h1bmtzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnJlZmV0Y2hDaHVua3MgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjMyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LnJlZmV0Y2hDaHVua3MpLAogICAgICAgICAgX3N0ZXAzMjsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IzMi5zKCk7ICEoX3N0ZXAzMiA9IF9pdGVyYXRvcjMyLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAzMi52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UucmVmZXRjaENodW5rcy5wdXNoKGUpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMzIuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjMyLmYoKTsKICAgICAgfQogICAgfQoKICAgIGlmIChvYmplY3QucmVqZWN0U2VuZGVycyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5yZWplY3RTZW5kZXJzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3IzMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC5yZWplY3RTZW5kZXJzKSwKICAgICAgICAgIF9zdGVwMzM7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMzMucygpOyAhKF9zdGVwMzMgPSBfaXRlcmF0b3IzMy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgX2U0ID0gX3N0ZXAzMy52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UucmVqZWN0U2VuZGVycy5wdXNoKF9lNCk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IzMy5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMzMuZigpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZUNvbnNlbnN1c1BhcmFtcyA9IHt9OwpleHBvcnQgdmFyIENvbnNlbnN1c1BhcmFtcyA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UuYmxvY2sgIT09IHVuZGVmaW5lZCkgewogICAgICBCbG9ja1BhcmFtcy5lbmNvZGUobWVzc2FnZS5ibG9jaywgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5ldmlkZW5jZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIEV2aWRlbmNlUGFyYW1zLmVuY29kZShtZXNzYWdlLmV2aWRlbmNlLCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnZhbGlkYXRvciAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFZhbGlkYXRvclBhcmFtcy5lbmNvZGUobWVzc2FnZS52YWxpZGF0b3IsIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UudmVyc2lvbiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFZlcnNpb25QYXJhbXMuZW5jb2RlKG1lc3NhZ2UudmVyc2lvbiwgd3JpdGVyLnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VDb25zZW5zdXNQYXJhbXMpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UuYmxvY2sgPSBCbG9ja1BhcmFtcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIG1lc3NhZ2UuZXZpZGVuY2UgPSBFdmlkZW5jZVBhcmFtcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2UudmFsaWRhdG9yID0gVmFsaWRhdG9yUGFyYW1zLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA0OgogICAgICAgICAgbWVzc2FnZS52ZXJzaW9uID0gVmVyc2lvblBhcmFtcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlQ29uc2Vuc3VzUGFyYW1zKTsKCiAgICBpZiAob2JqZWN0LmJsb2NrICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmJsb2NrICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYmxvY2sgPSBCbG9ja1BhcmFtcy5mcm9tSlNPTihvYmplY3QuYmxvY2spOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5ibG9jayA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmV2aWRlbmNlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmV2aWRlbmNlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZXZpZGVuY2UgPSBFdmlkZW5jZVBhcmFtcy5mcm9tSlNPTihvYmplY3QuZXZpZGVuY2UpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5ldmlkZW5jZSA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZhbGlkYXRvciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWxpZGF0b3IgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3IgPSBWYWxpZGF0b3JQYXJhbXMuZnJvbUpTT04ob2JqZWN0LnZhbGlkYXRvcik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnZhbGlkYXRvciA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmVyc2lvbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnZlcnNpb24gPSBWZXJzaW9uUGFyYW1zLmZyb21KU09OKG9iamVjdC52ZXJzaW9uKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudmVyc2lvbiA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UuYmxvY2sgIT09IHVuZGVmaW5lZCAmJiAob2JqLmJsb2NrID0gbWVzc2FnZS5ibG9jayA/IEJsb2NrUGFyYW1zLnRvSlNPTihtZXNzYWdlLmJsb2NrKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmV2aWRlbmNlICE9PSB1bmRlZmluZWQgJiYgKG9iai5ldmlkZW5jZSA9IG1lc3NhZ2UuZXZpZGVuY2UgPyBFdmlkZW5jZVBhcmFtcy50b0pTT04obWVzc2FnZS5ldmlkZW5jZSkgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS52YWxpZGF0b3IgIT09IHVuZGVmaW5lZCAmJiAob2JqLnZhbGlkYXRvciA9IG1lc3NhZ2UudmFsaWRhdG9yID8gVmFsaWRhdG9yUGFyYW1zLnRvSlNPTihtZXNzYWdlLnZhbGlkYXRvcikgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS52ZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai52ZXJzaW9uID0gbWVzc2FnZS52ZXJzaW9uID8gVmVyc2lvblBhcmFtcy50b0pTT04obWVzc2FnZS52ZXJzaW9uKSA6IHVuZGVmaW5lZCk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlQ29uc2Vuc3VzUGFyYW1zKTsKCiAgICBpZiAob2JqZWN0LmJsb2NrICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmJsb2NrICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYmxvY2sgPSBCbG9ja1BhcmFtcy5mcm9tUGFydGlhbChvYmplY3QuYmxvY2spOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5ibG9jayA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmV2aWRlbmNlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmV2aWRlbmNlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZXZpZGVuY2UgPSBFdmlkZW5jZVBhcmFtcy5mcm9tUGFydGlhbChvYmplY3QuZXZpZGVuY2UpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5ldmlkZW5jZSA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZhbGlkYXRvciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWxpZGF0b3IgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3IgPSBWYWxpZGF0b3JQYXJhbXMuZnJvbVBhcnRpYWwob2JqZWN0LnZhbGlkYXRvcik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnZhbGlkYXRvciA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmVyc2lvbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnZlcnNpb24gPSBWZXJzaW9uUGFyYW1zLmZyb21QYXJ0aWFsKG9iamVjdC52ZXJzaW9uKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudmVyc2lvbiA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlQmxvY2tQYXJhbXMgPSB7CiAgbWF4Qnl0ZXM6IDAsCiAgbWF4R2FzOiAwCn07CmV4cG9ydCB2YXIgQmxvY2tQYXJhbXMgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLm1heEJ5dGVzICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoOCkuaW50NjQobWVzc2FnZS5tYXhCeXRlcyk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UubWF4R2FzICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTYpLmludDY0KG1lc3NhZ2UubWF4R2FzKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VCbG9ja1BhcmFtcyk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5tYXhCeXRlcyA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5tYXhHYXMgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlQmxvY2tQYXJhbXMpOwoKICAgIGlmIChvYmplY3QubWF4Qnl0ZXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubWF4Qnl0ZXMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5tYXhCeXRlcyA9IE51bWJlcihvYmplY3QubWF4Qnl0ZXMpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5tYXhCeXRlcyA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5tYXhHYXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubWF4R2FzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubWF4R2FzID0gTnVtYmVyKG9iamVjdC5tYXhHYXMpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5tYXhHYXMgPSAwOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5tYXhCeXRlcyAhPT0gdW5kZWZpbmVkICYmIChvYmoubWF4Qnl0ZXMgPSBtZXNzYWdlLm1heEJ5dGVzKTsKICAgIG1lc3NhZ2UubWF4R2FzICE9PSB1bmRlZmluZWQgJiYgKG9iai5tYXhHYXMgPSBtZXNzYWdlLm1heEdhcyk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlQmxvY2tQYXJhbXMpOwoKICAgIGlmIChvYmplY3QubWF4Qnl0ZXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubWF4Qnl0ZXMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5tYXhCeXRlcyA9IG9iamVjdC5tYXhCeXRlczsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubWF4Qnl0ZXMgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QubWF4R2FzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm1heEdhcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLm1heEdhcyA9IG9iamVjdC5tYXhHYXM7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLm1heEdhcyA9IDA7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZUxhc3RDb21taXRJbmZvID0gewogIHJvdW5kOiAwCn07CmV4cG9ydCB2YXIgTGFzdENvbW1pdEluZm8gPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLnJvdW5kICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS5yb3VuZCk7CiAgICB9CgogICAgdmFyIF9pdGVyYXRvcjM0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobWVzc2FnZS52b3RlcyksCiAgICAgICAgX3N0ZXAzNDsKCiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvcjM0LnMoKTsgIShfc3RlcDM0ID0gX2l0ZXJhdG9yMzQubigpKS5kb25lOykgewogICAgICAgIHZhciB2ID0gX3N0ZXAzNC52YWx1ZTsKICAgICAgICBWb3RlSW5mby5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIF9pdGVyYXRvcjM0LmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvcjM0LmYoKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VMYXN0Q29tbWl0SW5mbyk7CgogICAgbWVzc2FnZS52b3RlcyA9IFtdOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2Uucm91bmQgPSByZWFkZXIuaW50MzIoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLnZvdGVzLnB1c2goVm90ZUluZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VMYXN0Q29tbWl0SW5mbyk7CgogICAgbWVzc2FnZS52b3RlcyA9IFtdOwoKICAgIGlmIChvYmplY3Qucm91bmQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Qucm91bmQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5yb3VuZCA9IE51bWJlcihvYmplY3Qucm91bmQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5yb3VuZCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC52b3RlcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52b3RlcyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yMzUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3Qudm90ZXMpLAogICAgICAgICAgX3N0ZXAzNTsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IzNS5zKCk7ICEoX3N0ZXAzNSA9IF9pdGVyYXRvcjM1Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAzNS52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2Uudm90ZXMucHVzaChWb3RlSW5mby5mcm9tSlNPTihlKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IzNS5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMzUuZigpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLnJvdW5kICE9PSB1bmRlZmluZWQgJiYgKG9iai5yb3VuZCA9IG1lc3NhZ2Uucm91bmQpOwoKICAgIGlmIChtZXNzYWdlLnZvdGVzKSB7CiAgICAgIG9iai52b3RlcyA9IG1lc3NhZ2Uudm90ZXMubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUgPyBWb3RlSW5mby50b0pTT04oZSkgOiB1bmRlZmluZWQ7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgb2JqLnZvdGVzID0gW107CiAgICB9CgogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZUxhc3RDb21taXRJbmZvKTsKCiAgICBtZXNzYWdlLnZvdGVzID0gW107CgogICAgaWYgKG9iamVjdC5yb3VuZCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5yb3VuZCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnJvdW5kID0gb2JqZWN0LnJvdW5kOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5yb3VuZCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC52b3RlcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52b3RlcyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yMzYgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3Qudm90ZXMpLAogICAgICAgICAgX3N0ZXAzNjsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IzNi5zKCk7ICEoX3N0ZXAzNiA9IF9pdGVyYXRvcjM2Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAzNi52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2Uudm90ZXMucHVzaChWb3RlSW5mby5mcm9tUGFydGlhbChlKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IzNi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMzYuZigpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZUV2ZW50ID0gewogIHR5cGU6ICIiCn07CmV4cG9ydCB2YXIgRXZlbnQgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLnR5cGUgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLnR5cGUpOwogICAgfQoKICAgIHZhciBfaXRlcmF0b3IzNyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG1lc3NhZ2UuYXR0cmlidXRlcyksCiAgICAgICAgX3N0ZXAzNzsKCiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvcjM3LnMoKTsgIShfc3RlcDM3ID0gX2l0ZXJhdG9yMzcubigpKS5kb25lOykgewogICAgICAgIHZhciB2ID0gX3N0ZXAzNy52YWx1ZTsKICAgICAgICBFdmVudEF0dHJpYnV0ZS5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIF9pdGVyYXRvcjM3LmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvcjM3LmYoKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VFdmVudCk7CgogICAgbWVzc2FnZS5hdHRyaWJ1dGVzID0gW107CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS50eXBlID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIG1lc3NhZ2UuYXR0cmlidXRlcy5wdXNoKEV2ZW50QXR0cmlidXRlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlRXZlbnQpOwoKICAgIG1lc3NhZ2UuYXR0cmlidXRlcyA9IFtdOwoKICAgIGlmIChvYmplY3QudHlwZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50eXBlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudHlwZSA9IFN0cmluZyhvYmplY3QudHlwZSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnR5cGUgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LmF0dHJpYnV0ZXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYXR0cmlidXRlcyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yMzggPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3QuYXR0cmlidXRlcyksCiAgICAgICAgICBfc3RlcDM4OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjM4LnMoKTsgIShfc3RlcDM4ID0gX2l0ZXJhdG9yMzgubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGUgPSBfc3RlcDM4LnZhbHVlOwogICAgICAgICAgbWVzc2FnZS5hdHRyaWJ1dGVzLnB1c2goRXZlbnRBdHRyaWJ1dGUuZnJvbUpTT04oZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMzguZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjM4LmYoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS50eXBlICE9PSB1bmRlZmluZWQgJiYgKG9iai50eXBlID0gbWVzc2FnZS50eXBlKTsKCiAgICBpZiAobWVzc2FnZS5hdHRyaWJ1dGVzKSB7CiAgICAgIG9iai5hdHRyaWJ1dGVzID0gbWVzc2FnZS5hdHRyaWJ1dGVzLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlID8gRXZlbnRBdHRyaWJ1dGUudG9KU09OKGUpIDogdW5kZWZpbmVkOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG9iai5hdHRyaWJ1dGVzID0gW107CiAgICB9CgogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZUV2ZW50KTsKCiAgICBtZXNzYWdlLmF0dHJpYnV0ZXMgPSBbXTsKCiAgICBpZiAob2JqZWN0LnR5cGUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudHlwZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnR5cGUgPSBvYmplY3QudHlwZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudHlwZSA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuYXR0cmlidXRlcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hdHRyaWJ1dGVzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3IzOSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC5hdHRyaWJ1dGVzKSwKICAgICAgICAgIF9zdGVwMzk7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMzkucygpOyAhKF9zdGVwMzkgPSBfaXRlcmF0b3IzOS5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZSA9IF9zdGVwMzkudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLmF0dHJpYnV0ZXMucHVzaChFdmVudEF0dHJpYnV0ZS5mcm9tUGFydGlhbChlKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IzOS5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMzkuZigpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZUV2ZW50QXR0cmlidXRlID0gewogIGluZGV4OiBmYWxzZQp9OwpleHBvcnQgdmFyIEV2ZW50QXR0cmlidXRlID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5rZXkubGVuZ3RoICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTApLmJ5dGVzKG1lc3NhZ2Uua2V5KTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS52YWx1ZS5sZW5ndGggIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigxOCkuYnl0ZXMobWVzc2FnZS52YWx1ZSk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuaW5kZXggPT09IHRydWUpIHsKICAgICAgd3JpdGVyLnVpbnQzMigyNCkuYm9vbChtZXNzYWdlLmluZGV4KTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VFdmVudEF0dHJpYnV0ZSk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5rZXkgPSByZWFkZXIuYnl0ZXMoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLnZhbHVlID0gcmVhZGVyLmJ5dGVzKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5pbmRleCA9IHJlYWRlci5ib29sKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VFdmVudEF0dHJpYnV0ZSk7CgogICAgaWYgKG9iamVjdC5rZXkgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Qua2V5ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2Uua2V5ID0gYnl0ZXNGcm9tQmFzZTY0KG9iamVjdC5rZXkpOwogICAgfQoKICAgIGlmIChvYmplY3QudmFsdWUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsdWUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52YWx1ZSA9IGJ5dGVzRnJvbUJhc2U2NChvYmplY3QudmFsdWUpOwogICAgfQoKICAgIGlmIChvYmplY3QuaW5kZXggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5kZXggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbmRleCA9IEJvb2xlYW4ob2JqZWN0LmluZGV4KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5kZXggPSBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2Uua2V5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5rZXkgPSBiYXNlNjRGcm9tQnl0ZXMobWVzc2FnZS5rZXkgIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2Uua2V5IDogbmV3IFVpbnQ4QXJyYXkoKSkpOwogICAgbWVzc2FnZS52YWx1ZSAhPT0gdW5kZWZpbmVkICYmIChvYmoudmFsdWUgPSBiYXNlNjRGcm9tQnl0ZXMobWVzc2FnZS52YWx1ZSAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS52YWx1ZSA6IG5ldyBVaW50OEFycmF5KCkpKTsKICAgIG1lc3NhZ2UuaW5kZXggIT09IHVuZGVmaW5lZCAmJiAob2JqLmluZGV4ID0gbWVzc2FnZS5pbmRleCk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlRXZlbnRBdHRyaWJ1dGUpOwoKICAgIGlmIChvYmplY3Qua2V5ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmtleSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmtleSA9IG9iamVjdC5rZXk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmtleSA9IG5ldyBVaW50OEFycmF5KCk7CiAgICB9CgogICAgaWYgKG9iamVjdC52YWx1ZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWx1ZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnZhbHVlID0gb2JqZWN0LnZhbHVlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS52YWx1ZSA9IG5ldyBVaW50OEFycmF5KCk7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbmRleCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbmRleCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluZGV4ID0gb2JqZWN0LmluZGV4OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5pbmRleCA9IGZhbHNlOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VUeFJlc3VsdCA9IHsKICBoZWlnaHQ6IDAsCiAgaW5kZXg6IDAKfTsKZXhwb3J0IHZhciBUeFJlc3VsdCA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UuaGVpZ2h0ICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoOCkuaW50NjQobWVzc2FnZS5oZWlnaHQpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmluZGV4ICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTYpLnVpbnQzMihtZXNzYWdlLmluZGV4KTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS50eC5sZW5ndGggIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigyNikuYnl0ZXMobWVzc2FnZS50eCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UucmVzdWx0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgUmVzcG9uc2VEZWxpdmVyVHguZW5jb2RlKG1lc3NhZ2UucmVzdWx0LCB3cml0ZXIudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVR4UmVzdWx0KTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmhlaWdodCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5pbmRleCA9IHJlYWRlci51aW50MzIoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBtZXNzYWdlLnR4ID0gcmVhZGVyLmJ5dGVzKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA0OgogICAgICAgICAgbWVzc2FnZS5yZXN1bHQgPSBSZXNwb25zZURlbGl2ZXJUeC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlVHhSZXN1bHQpOwoKICAgIGlmIChvYmplY3QuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmhlaWdodCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmhlaWdodCA9IE51bWJlcihvYmplY3QuaGVpZ2h0KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluZGV4ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluZGV4ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaW5kZXggPSBOdW1iZXIob2JqZWN0LmluZGV4KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5kZXggPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QudHggIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudHggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS50eCA9IGJ5dGVzRnJvbUJhc2U2NChvYmplY3QudHgpOwogICAgfQoKICAgIGlmIChvYmplY3QucmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnJlc3VsdCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnJlc3VsdCA9IFJlc3BvbnNlRGVsaXZlclR4LmZyb21KU09OKG9iamVjdC5yZXN1bHQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5yZXN1bHQgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIChvYmouaGVpZ2h0ID0gbWVzc2FnZS5oZWlnaHQpOwogICAgbWVzc2FnZS5pbmRleCAhPT0gdW5kZWZpbmVkICYmIChvYmouaW5kZXggPSBtZXNzYWdlLmluZGV4KTsKICAgIG1lc3NhZ2UudHggIT09IHVuZGVmaW5lZCAmJiAob2JqLnR4ID0gYmFzZTY0RnJvbUJ5dGVzKG1lc3NhZ2UudHggIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UudHggOiBuZXcgVWludDhBcnJheSgpKSk7CiAgICBtZXNzYWdlLnJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIChvYmoucmVzdWx0ID0gbWVzc2FnZS5yZXN1bHQgPyBSZXNwb25zZURlbGl2ZXJUeC50b0pTT04obWVzc2FnZS5yZXN1bHQpIDogdW5kZWZpbmVkKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VUeFJlc3VsdCk7CgogICAgaWYgKG9iamVjdC5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gb2JqZWN0LmhlaWdodDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmluZGV4ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmluZGV4ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaW5kZXggPSBvYmplY3QuaW5kZXg7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluZGV4ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnR4ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnR4ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudHggPSBvYmplY3QudHg7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnR4ID0gbmV3IFVpbnQ4QXJyYXkoKTsKICAgIH0KCiAgICBpZiAob2JqZWN0LnJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5yZXN1bHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5yZXN1bHQgPSBSZXNwb25zZURlbGl2ZXJUeC5mcm9tUGFydGlhbChvYmplY3QucmVzdWx0KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UucmVzdWx0ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VWYWxpZGF0b3IgPSB7CiAgcG93ZXI6IDAKfTsKZXhwb3J0IHZhciBWYWxpZGF0b3IgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmFkZHJlc3MubGVuZ3RoICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTApLmJ5dGVzKG1lc3NhZ2UuYWRkcmVzcyk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UucG93ZXIgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigyNCkuaW50NjQobWVzc2FnZS5wb3dlcik7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlVmFsaWRhdG9yKTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmFkZHJlc3MgPSByZWFkZXIuYnl0ZXMoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBtZXNzYWdlLnBvd2VyID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVZhbGlkYXRvcik7CgogICAgaWYgKG9iamVjdC5hZGRyZXNzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmFkZHJlc3MgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5hZGRyZXNzID0gYnl0ZXNGcm9tQmFzZTY0KG9iamVjdC5hZGRyZXNzKTsKICAgIH0KCiAgICBpZiAob2JqZWN0LnBvd2VyICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnBvd2VyICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucG93ZXIgPSBOdW1iZXIob2JqZWN0LnBvd2VyKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UucG93ZXIgPSAwOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5hZGRyZXNzICE9PSB1bmRlZmluZWQgJiYgKG9iai5hZGRyZXNzID0gYmFzZTY0RnJvbUJ5dGVzKG1lc3NhZ2UuYWRkcmVzcyAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS5hZGRyZXNzIDogbmV3IFVpbnQ4QXJyYXkoKSkpOwogICAgbWVzc2FnZS5wb3dlciAhPT0gdW5kZWZpbmVkICYmIChvYmoucG93ZXIgPSBtZXNzYWdlLnBvd2VyKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VWYWxpZGF0b3IpOwoKICAgIGlmIChvYmplY3QuYWRkcmVzcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hZGRyZXNzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYWRkcmVzcyA9IG9iamVjdC5hZGRyZXNzOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5hZGRyZXNzID0gbmV3IFVpbnQ4QXJyYXkoKTsKICAgIH0KCiAgICBpZiAob2JqZWN0LnBvd2VyICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnBvd2VyICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucG93ZXIgPSBvYmplY3QucG93ZXI7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnBvd2VyID0gMDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlVmFsaWRhdG9yVXBkYXRlID0gewogIHBvd2VyOiAwCn07CmV4cG9ydCB2YXIgVmFsaWRhdG9yVXBkYXRlID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5wdWJLZXkgIT09IHVuZGVmaW5lZCkgewogICAgICBQdWJsaWNLZXkuZW5jb2RlKG1lc3NhZ2UucHViS2V5LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnBvd2VyICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTYpLmludDY0KG1lc3NhZ2UucG93ZXIpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVZhbGlkYXRvclVwZGF0ZSk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5wdWJLZXkgPSBQdWJsaWNLZXkuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLnBvd2VyID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVZhbGlkYXRvclVwZGF0ZSk7CgogICAgaWYgKG9iamVjdC5wdWJLZXkgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucHViS2V5ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucHViS2V5ID0gUHVibGljS2V5LmZyb21KU09OKG9iamVjdC5wdWJLZXkpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5wdWJLZXkgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5wb3dlciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wb3dlciAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnBvd2VyID0gTnVtYmVyKG9iamVjdC5wb3dlcik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnBvd2VyID0gMDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UucHViS2V5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5wdWJLZXkgPSBtZXNzYWdlLnB1YktleSA/IFB1YmxpY0tleS50b0pTT04obWVzc2FnZS5wdWJLZXkpIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UucG93ZXIgIT09IHVuZGVmaW5lZCAmJiAob2JqLnBvd2VyID0gbWVzc2FnZS5wb3dlcik7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlVmFsaWRhdG9yVXBkYXRlKTsKCiAgICBpZiAob2JqZWN0LnB1YktleSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wdWJLZXkgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5wdWJLZXkgPSBQdWJsaWNLZXkuZnJvbVBhcnRpYWwob2JqZWN0LnB1YktleSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnB1YktleSA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnBvd2VyICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnBvd2VyICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucG93ZXIgPSBvYmplY3QucG93ZXI7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnBvd2VyID0gMDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlVm90ZUluZm8gPSB7CiAgc2lnbmVkTGFzdEJsb2NrOiBmYWxzZQp9OwpleHBvcnQgdmFyIFZvdGVJbmZvID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS52YWxpZGF0b3IgIT09IHVuZGVmaW5lZCkgewogICAgICBWYWxpZGF0b3IuZW5jb2RlKG1lc3NhZ2UudmFsaWRhdG9yLCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnNpZ25lZExhc3RCbG9jayA9PT0gdHJ1ZSkgewogICAgICB3cml0ZXIudWludDMyKDE2KS5ib29sKG1lc3NhZ2Uuc2lnbmVkTGFzdEJsb2NrKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VWb3RlSW5mbyk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS52YWxpZGF0b3IgPSBWYWxpZGF0b3IuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLnNpZ25lZExhc3RCbG9jayA9IHJlYWRlci5ib29sKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VWb3RlSW5mbyk7CgogICAgaWYgKG9iamVjdC52YWxpZGF0b3IgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsaWRhdG9yICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudmFsaWRhdG9yID0gVmFsaWRhdG9yLmZyb21KU09OKG9iamVjdC52YWxpZGF0b3IpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3IgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5zaWduZWRMYXN0QmxvY2sgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc2lnbmVkTGFzdEJsb2NrICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2Uuc2lnbmVkTGFzdEJsb2NrID0gQm9vbGVhbihvYmplY3Quc2lnbmVkTGFzdEJsb2NrKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2Uuc2lnbmVkTGFzdEJsb2NrID0gZmFsc2U7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLnZhbGlkYXRvciAhPT0gdW5kZWZpbmVkICYmIChvYmoudmFsaWRhdG9yID0gbWVzc2FnZS52YWxpZGF0b3IgPyBWYWxpZGF0b3IudG9KU09OKG1lc3NhZ2UudmFsaWRhdG9yKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLnNpZ25lZExhc3RCbG9jayAhPT0gdW5kZWZpbmVkICYmIChvYmouc2lnbmVkTGFzdEJsb2NrID0gbWVzc2FnZS5zaWduZWRMYXN0QmxvY2spOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVZvdGVJbmZvKTsKCiAgICBpZiAob2JqZWN0LnZhbGlkYXRvciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWxpZGF0b3IgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3IgPSBWYWxpZGF0b3IuZnJvbVBhcnRpYWwob2JqZWN0LnZhbGlkYXRvcik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnZhbGlkYXRvciA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnNpZ25lZExhc3RCbG9jayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zaWduZWRMYXN0QmxvY2sgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5zaWduZWRMYXN0QmxvY2sgPSBvYmplY3Quc2lnbmVkTGFzdEJsb2NrOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5zaWduZWRMYXN0QmxvY2sgPSBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlRXZpZGVuY2UgPSB7CiAgdHlwZTogMCwKICBoZWlnaHQ6IDAsCiAgdG90YWxWb3RpbmdQb3dlcjogMAp9OwpleHBvcnQgdmFyIEV2aWRlbmNlID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS50eXBlICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS50eXBlKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS52YWxpZGF0b3IgIT09IHVuZGVmaW5lZCkgewogICAgICBWYWxpZGF0b3IuZW5jb2RlKG1lc3NhZ2UudmFsaWRhdG9yLCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmhlaWdodCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDI0KS5pbnQ2NChtZXNzYWdlLmhlaWdodCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UudGltZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIFRpbWVzdGFtcC5lbmNvZGUodG9UaW1lc3RhbXAobWVzc2FnZS50aW1lKSwgd3JpdGVyLnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS50b3RhbFZvdGluZ1Bvd2VyICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoNDApLmludDY0KG1lc3NhZ2UudG90YWxWb3RpbmdQb3dlcik7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlRXZpZGVuY2UpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UudHlwZSA9IHJlYWRlci5pbnQzMigpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIG1lc3NhZ2UudmFsaWRhdG9yID0gVmFsaWRhdG9yLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5oZWlnaHQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIG1lc3NhZ2UudGltZSA9IGZyb21UaW1lc3RhbXAoVGltZXN0YW1wLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNToKICAgICAgICAgIG1lc3NhZ2UudG90YWxWb3RpbmdQb3dlciA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VFdmlkZW5jZSk7CgogICAgaWYgKG9iamVjdC50eXBlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnR5cGUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS50eXBlID0gZXZpZGVuY2VUeXBlRnJvbUpTT04ob2JqZWN0LnR5cGUpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS50eXBlID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZhbGlkYXRvciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWxpZGF0b3IgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3IgPSBWYWxpZGF0b3IuZnJvbUpTT04ob2JqZWN0LnZhbGlkYXRvcik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnZhbGlkYXRvciA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5oZWlnaHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSBOdW1iZXIob2JqZWN0LmhlaWdodCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmhlaWdodCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC50aW1lICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnRpbWUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS50aW1lID0gZnJvbUpzb25UaW1lc3RhbXAob2JqZWN0LnRpbWUpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS50aW1lID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QudG90YWxWb3RpbmdQb3dlciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50b3RhbFZvdGluZ1Bvd2VyICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudG90YWxWb3RpbmdQb3dlciA9IE51bWJlcihvYmplY3QudG90YWxWb3RpbmdQb3dlcik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnRvdGFsVm90aW5nUG93ZXIgPSAwOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS50eXBlICE9PSB1bmRlZmluZWQgJiYgKG9iai50eXBlID0gZXZpZGVuY2VUeXBlVG9KU09OKG1lc3NhZ2UudHlwZSkpOwogICAgbWVzc2FnZS52YWxpZGF0b3IgIT09IHVuZGVmaW5lZCAmJiAob2JqLnZhbGlkYXRvciA9IG1lc3NhZ2UudmFsaWRhdG9yID8gVmFsaWRhdG9yLnRvSlNPTihtZXNzYWdlLnZhbGlkYXRvcikgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmhlaWdodCA9IG1lc3NhZ2UuaGVpZ2h0KTsKICAgIG1lc3NhZ2UudGltZSAhPT0gdW5kZWZpbmVkICYmIChvYmoudGltZSA9IG1lc3NhZ2UudGltZSAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS50aW1lLnRvSVNPU3RyaW5nKCkgOiBudWxsKTsKICAgIG1lc3NhZ2UudG90YWxWb3RpbmdQb3dlciAhPT0gdW5kZWZpbmVkICYmIChvYmoudG90YWxWb3RpbmdQb3dlciA9IG1lc3NhZ2UudG90YWxWb3RpbmdQb3dlcik7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlRXZpZGVuY2UpOwoKICAgIGlmIChvYmplY3QudHlwZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50eXBlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudHlwZSA9IG9iamVjdC50eXBlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS50eXBlID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZhbGlkYXRvciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWxpZGF0b3IgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3IgPSBWYWxpZGF0b3IuZnJvbVBhcnRpYWwob2JqZWN0LnZhbGlkYXRvcik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnZhbGlkYXRvciA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5oZWlnaHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSBvYmplY3QuaGVpZ2h0OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QudGltZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50aW1lICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudGltZSA9IG9iamVjdC50aW1lOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS50aW1lID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QudG90YWxWb3RpbmdQb3dlciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50b3RhbFZvdGluZ1Bvd2VyICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudG90YWxWb3RpbmdQb3dlciA9IG9iamVjdC50b3RhbFZvdGluZ1Bvd2VyOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS50b3RhbFZvdGluZ1Bvd2VyID0gMDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlU25hcHNob3QgPSB7CiAgaGVpZ2h0OiAwLAogIGZvcm1hdDogMCwKICBjaHVua3M6IDAKfTsKZXhwb3J0IHZhciBTbmFwc2hvdCA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UuaGVpZ2h0ICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoOCkudWludDY0KG1lc3NhZ2UuaGVpZ2h0KTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5mb3JtYXQgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigxNikudWludDMyKG1lc3NhZ2UuZm9ybWF0KTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5jaHVua3MgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigyNCkudWludDMyKG1lc3NhZ2UuY2h1bmtzKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5oYXNoLmxlbmd0aCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDM0KS5ieXRlcyhtZXNzYWdlLmhhc2gpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLm1ldGFkYXRhLmxlbmd0aCAhPT0gMCkgewogICAgICB3cml0ZXIudWludDMyKDQyKS5ieXRlcyhtZXNzYWdlLm1ldGFkYXRhKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VTbmFwc2hvdCk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5oZWlnaHQgPSBsb25nVG9OdW1iZXIocmVhZGVyLnVpbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLmZvcm1hdCA9IHJlYWRlci51aW50MzIoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBtZXNzYWdlLmNodW5rcyA9IHJlYWRlci51aW50MzIoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBtZXNzYWdlLmhhc2ggPSByZWFkZXIuYnl0ZXMoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDU6CiAgICAgICAgICBtZXNzYWdlLm1ldGFkYXRhID0gcmVhZGVyLmJ5dGVzKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VTbmFwc2hvdCk7CgogICAgaWYgKG9iamVjdC5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gTnVtYmVyKG9iamVjdC5oZWlnaHQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5oZWlnaHQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuZm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmZvcm1hdCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmZvcm1hdCA9IE51bWJlcihvYmplY3QuZm9ybWF0KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZm9ybWF0ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNodW5rcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jaHVua3MgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jaHVua3MgPSBOdW1iZXIob2JqZWN0LmNodW5rcyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNodW5rcyA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5oYXNoICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lmhhc2ggIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5oYXNoID0gYnl0ZXNGcm9tQmFzZTY0KG9iamVjdC5oYXNoKTsKICAgIH0KCiAgICBpZiAob2JqZWN0Lm1ldGFkYXRhICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm1ldGFkYXRhICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubWV0YWRhdGEgPSBieXRlc0Zyb21CYXNlNjQob2JqZWN0Lm1ldGFkYXRhKTsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5oZWlnaHQgPSBtZXNzYWdlLmhlaWdodCk7CiAgICBtZXNzYWdlLmZvcm1hdCAhPT0gdW5kZWZpbmVkICYmIChvYmouZm9ybWF0ID0gbWVzc2FnZS5mb3JtYXQpOwogICAgbWVzc2FnZS5jaHVua3MgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNodW5rcyA9IG1lc3NhZ2UuY2h1bmtzKTsKICAgIG1lc3NhZ2UuaGFzaCAhPT0gdW5kZWZpbmVkICYmIChvYmouaGFzaCA9IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLmhhc2ggIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UuaGFzaCA6IG5ldyBVaW50OEFycmF5KCkpKTsKICAgIG1lc3NhZ2UubWV0YWRhdGEgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1ldGFkYXRhID0gYmFzZTY0RnJvbUJ5dGVzKG1lc3NhZ2UubWV0YWRhdGEgIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UubWV0YWRhdGEgOiBuZXcgVWludDhBcnJheSgpKSk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlU25hcHNob3QpOwoKICAgIGlmIChvYmplY3QuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmhlaWdodCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmhlaWdodCA9IG9iamVjdC5oZWlnaHQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmhlaWdodCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5mb3JtYXQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZm9ybWF0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZm9ybWF0ID0gb2JqZWN0LmZvcm1hdDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZm9ybWF0ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNodW5rcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jaHVua3MgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jaHVua3MgPSBvYmplY3QuY2h1bmtzOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jaHVua3MgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuaGFzaCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5oYXNoICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuaGFzaCA9IG9iamVjdC5oYXNoOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5oYXNoID0gbmV3IFVpbnQ4QXJyYXkoKTsKICAgIH0KCiAgICBpZiAob2JqZWN0Lm1ldGFkYXRhICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm1ldGFkYXRhICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubWV0YWRhdGEgPSBvYmplY3QubWV0YWRhdGE7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLm1ldGFkYXRhID0gbmV3IFVpbnQ4QXJyYXkoKTsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CmV4cG9ydCB2YXIgQUJDSUFwcGxpY2F0aW9uQ2xpZW50SW1wbCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQUJDSUFwcGxpY2F0aW9uQ2xpZW50SW1wbChycGMpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBQkNJQXBwbGljYXRpb25DbGllbnRJbXBsKTsKCiAgICB0aGlzLnJwYyA9IHJwYzsKICB9CgogIF9jcmVhdGVDbGFzcyhBQkNJQXBwbGljYXRpb25DbGllbnRJbXBsLCBbewogICAga2V5OiAiRWNobyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gRWNobyhyZXF1ZXN0KSB7CiAgICAgIHZhciBkYXRhID0gUmVxdWVzdEVjaG8uZW5jb2RlKHJlcXVlc3QpLmZpbmlzaCgpOwogICAgICB2YXIgcHJvbWlzZSA9IHRoaXMucnBjLnJlcXVlc3QoInRlbmRlcm1pbnQuYWJjaS5BQkNJQXBwbGljYXRpb24iLCAiRWNobyIsIGRhdGEpOwogICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIFJlc3BvbnNlRWNoby5kZWNvZGUobmV3IFJlYWRlcihkYXRhKSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIkZsdXNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBGbHVzaChyZXF1ZXN0KSB7CiAgICAgIHZhciBkYXRhID0gUmVxdWVzdEZsdXNoLmVuY29kZShyZXF1ZXN0KS5maW5pc2goKTsKICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnJwYy5yZXF1ZXN0KCJ0ZW5kZXJtaW50LmFiY2kuQUJDSUFwcGxpY2F0aW9uIiwgIkZsdXNoIiwgZGF0YSk7CiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gUmVzcG9uc2VGbHVzaC5kZWNvZGUobmV3IFJlYWRlcihkYXRhKSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIkluZm8iLAogICAgdmFsdWU6IGZ1bmN0aW9uIEluZm8ocmVxdWVzdCkgewogICAgICB2YXIgZGF0YSA9IFJlcXVlc3RJbmZvLmVuY29kZShyZXF1ZXN0KS5maW5pc2goKTsKICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnJwYy5yZXF1ZXN0KCJ0ZW5kZXJtaW50LmFiY2kuQUJDSUFwcGxpY2F0aW9uIiwgIkluZm8iLCBkYXRhKTsKICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBSZXNwb25zZUluZm8uZGVjb2RlKG5ldyBSZWFkZXIoZGF0YSkpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJTZXRPcHRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIFNldE9wdGlvbihyZXF1ZXN0KSB7CiAgICAgIHZhciBkYXRhID0gUmVxdWVzdFNldE9wdGlvbi5lbmNvZGUocmVxdWVzdCkuZmluaXNoKCk7CiAgICAgIHZhciBwcm9taXNlID0gdGhpcy5ycGMucmVxdWVzdCgidGVuZGVybWludC5hYmNpLkFCQ0lBcHBsaWNhdGlvbiIsICJTZXRPcHRpb24iLCBkYXRhKTsKICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBSZXNwb25zZVNldE9wdGlvbi5kZWNvZGUobmV3IFJlYWRlcihkYXRhKSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIkRlbGl2ZXJUeCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gRGVsaXZlclR4KHJlcXVlc3QpIHsKICAgICAgdmFyIGRhdGEgPSBSZXF1ZXN0RGVsaXZlclR4LmVuY29kZShyZXF1ZXN0KS5maW5pc2goKTsKICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnJwYy5yZXF1ZXN0KCJ0ZW5kZXJtaW50LmFiY2kuQUJDSUFwcGxpY2F0aW9uIiwgIkRlbGl2ZXJUeCIsIGRhdGEpOwogICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIFJlc3BvbnNlRGVsaXZlclR4LmRlY29kZShuZXcgUmVhZGVyKGRhdGEpKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiQ2hlY2tUeCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gQ2hlY2tUeChyZXF1ZXN0KSB7CiAgICAgIHZhciBkYXRhID0gUmVxdWVzdENoZWNrVHguZW5jb2RlKHJlcXVlc3QpLmZpbmlzaCgpOwogICAgICB2YXIgcHJvbWlzZSA9IHRoaXMucnBjLnJlcXVlc3QoInRlbmRlcm1pbnQuYWJjaS5BQkNJQXBwbGljYXRpb24iLCAiQ2hlY2tUeCIsIGRhdGEpOwogICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIFJlc3BvbnNlQ2hlY2tUeC5kZWNvZGUobmV3IFJlYWRlcihkYXRhKSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIlF1ZXJ5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBRdWVyeShyZXF1ZXN0KSB7CiAgICAgIHZhciBkYXRhID0gUmVxdWVzdFF1ZXJ5LmVuY29kZShyZXF1ZXN0KS5maW5pc2goKTsKICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnJwYy5yZXF1ZXN0KCJ0ZW5kZXJtaW50LmFiY2kuQUJDSUFwcGxpY2F0aW9uIiwgIlF1ZXJ5IiwgZGF0YSk7CiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gUmVzcG9uc2VRdWVyeS5kZWNvZGUobmV3IFJlYWRlcihkYXRhKSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIkNvbW1pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gQ29tbWl0KHJlcXVlc3QpIHsKICAgICAgdmFyIGRhdGEgPSBSZXF1ZXN0Q29tbWl0LmVuY29kZShyZXF1ZXN0KS5maW5pc2goKTsKICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnJwYy5yZXF1ZXN0KCJ0ZW5kZXJtaW50LmFiY2kuQUJDSUFwcGxpY2F0aW9uIiwgIkNvbW1pdCIsIGRhdGEpOwogICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIFJlc3BvbnNlQ29tbWl0LmRlY29kZShuZXcgUmVhZGVyKGRhdGEpKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiSW5pdENoYWluIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBJbml0Q2hhaW4ocmVxdWVzdCkgewogICAgICB2YXIgZGF0YSA9IFJlcXVlc3RJbml0Q2hhaW4uZW5jb2RlKHJlcXVlc3QpLmZpbmlzaCgpOwogICAgICB2YXIgcHJvbWlzZSA9IHRoaXMucnBjLnJlcXVlc3QoInRlbmRlcm1pbnQuYWJjaS5BQkNJQXBwbGljYXRpb24iLCAiSW5pdENoYWluIiwgZGF0YSk7CiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gUmVzcG9uc2VJbml0Q2hhaW4uZGVjb2RlKG5ldyBSZWFkZXIoZGF0YSkpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJCZWdpbkJsb2NrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBCZWdpbkJsb2NrKHJlcXVlc3QpIHsKICAgICAgdmFyIGRhdGEgPSBSZXF1ZXN0QmVnaW5CbG9jay5lbmNvZGUocmVxdWVzdCkuZmluaXNoKCk7CiAgICAgIHZhciBwcm9taXNlID0gdGhpcy5ycGMucmVxdWVzdCgidGVuZGVybWludC5hYmNpLkFCQ0lBcHBsaWNhdGlvbiIsICJCZWdpbkJsb2NrIiwgZGF0YSk7CiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gUmVzcG9uc2VCZWdpbkJsb2NrLmRlY29kZShuZXcgUmVhZGVyKGRhdGEpKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiRW5kQmxvY2siLAogICAgdmFsdWU6IGZ1bmN0aW9uIEVuZEJsb2NrKHJlcXVlc3QpIHsKICAgICAgdmFyIGRhdGEgPSBSZXF1ZXN0RW5kQmxvY2suZW5jb2RlKHJlcXVlc3QpLmZpbmlzaCgpOwogICAgICB2YXIgcHJvbWlzZSA9IHRoaXMucnBjLnJlcXVlc3QoInRlbmRlcm1pbnQuYWJjaS5BQkNJQXBwbGljYXRpb24iLCAiRW5kQmxvY2siLCBkYXRhKTsKICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBSZXNwb25zZUVuZEJsb2NrLmRlY29kZShuZXcgUmVhZGVyKGRhdGEpKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiTGlzdFNuYXBzaG90cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gTGlzdFNuYXBzaG90cyhyZXF1ZXN0KSB7CiAgICAgIHZhciBkYXRhID0gUmVxdWVzdExpc3RTbmFwc2hvdHMuZW5jb2RlKHJlcXVlc3QpLmZpbmlzaCgpOwogICAgICB2YXIgcHJvbWlzZSA9IHRoaXMucnBjLnJlcXVlc3QoInRlbmRlcm1pbnQuYWJjaS5BQkNJQXBwbGljYXRpb24iLCAiTGlzdFNuYXBzaG90cyIsIGRhdGEpOwogICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIFJlc3BvbnNlTGlzdFNuYXBzaG90cy5kZWNvZGUobmV3IFJlYWRlcihkYXRhKSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIk9mZmVyU25hcHNob3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIE9mZmVyU25hcHNob3QocmVxdWVzdCkgewogICAgICB2YXIgZGF0YSA9IFJlcXVlc3RPZmZlclNuYXBzaG90LmVuY29kZShyZXF1ZXN0KS5maW5pc2goKTsKICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnJwYy5yZXF1ZXN0KCJ0ZW5kZXJtaW50LmFiY2kuQUJDSUFwcGxpY2F0aW9uIiwgIk9mZmVyU25hcHNob3QiLCBkYXRhKTsKICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBSZXNwb25zZU9mZmVyU25hcHNob3QuZGVjb2RlKG5ldyBSZWFkZXIoZGF0YSkpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJMb2FkU25hcHNob3RDaHVuayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gTG9hZFNuYXBzaG90Q2h1bmsocmVxdWVzdCkgewogICAgICB2YXIgZGF0YSA9IFJlcXVlc3RMb2FkU25hcHNob3RDaHVuay5lbmNvZGUocmVxdWVzdCkuZmluaXNoKCk7CiAgICAgIHZhciBwcm9taXNlID0gdGhpcy5ycGMucmVxdWVzdCgidGVuZGVybWludC5hYmNpLkFCQ0lBcHBsaWNhdGlvbiIsICJMb2FkU25hcHNob3RDaHVuayIsIGRhdGEpOwogICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIFJlc3BvbnNlTG9hZFNuYXBzaG90Q2h1bmsuZGVjb2RlKG5ldyBSZWFkZXIoZGF0YSkpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJBcHBseVNuYXBzaG90Q2h1bmsiLAogICAgdmFsdWU6IGZ1bmN0aW9uIEFwcGx5U25hcHNob3RDaHVuayhyZXF1ZXN0KSB7CiAgICAgIHZhciBkYXRhID0gUmVxdWVzdEFwcGx5U25hcHNob3RDaHVuay5lbmNvZGUocmVxdWVzdCkuZmluaXNoKCk7CiAgICAgIHZhciBwcm9taXNlID0gdGhpcy5ycGMucmVxdWVzdCgidGVuZGVybWludC5hYmNpLkFCQ0lBcHBsaWNhdGlvbiIsICJBcHBseVNuYXBzaG90Q2h1bmsiLCBkYXRhKTsKICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBSZXNwb25zZUFwcGx5U25hcHNob3RDaHVuay5kZWNvZGUobmV3IFJlYWRlcihkYXRhKSk7CiAgICAgIH0pOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEFCQ0lBcHBsaWNhdGlvbkNsaWVudEltcGw7Cn0oKTsKCnZhciBnbG9iYWxUaGlzID0gZnVuY3Rpb24gKCkgewogIGlmICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gInVuZGVmaW5lZCIpIHJldHVybiBnbG9iYWxUaGlzOwogIGlmICh0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIpIHJldHVybiBzZWxmOwogIGlmICh0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIikgcmV0dXJuIHdpbmRvdzsKICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIpIHJldHVybiBnbG9iYWw7CiAgdGhyb3cgIlVuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdCI7Cn0oKTsKCnZhciBhdG9iID0gZ2xvYmFsVGhpcy5hdG9iIHx8IGZ1bmN0aW9uIChiNjQpIHsKICByZXR1cm4gZ2xvYmFsVGhpcy5CdWZmZXIuZnJvbShiNjQsICJiYXNlNjQiKS50b1N0cmluZygiYmluYXJ5Iik7Cn07CgpmdW5jdGlvbiBieXRlc0Zyb21CYXNlNjQoYjY0KSB7CiAgdmFyIGJpbiA9IGF0b2IoYjY0KTsKICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoYmluLmxlbmd0aCk7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgYmluLmxlbmd0aDsgKytpKSB7CiAgICBhcnJbaV0gPSBiaW4uY2hhckNvZGVBdChpKTsKICB9CgogIHJldHVybiBhcnI7Cn0KCnZhciBidG9hID0gZ2xvYmFsVGhpcy5idG9hIHx8IGZ1bmN0aW9uIChiaW4pIHsKICByZXR1cm4gZ2xvYmFsVGhpcy5CdWZmZXIuZnJvbShiaW4sICJiaW5hcnkiKS50b1N0cmluZygiYmFzZTY0Iik7Cn07CgpmdW5jdGlvbiBiYXNlNjRGcm9tQnl0ZXMoYXJyKSB7CiAgdmFyIGJpbiA9IFtdOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5ieXRlTGVuZ3RoOyArK2kpIHsKICAgIGJpbi5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoYXJyW2ldKSk7CiAgfQoKICByZXR1cm4gYnRvYShiaW4uam9pbigiIikpOwp9CgpmdW5jdGlvbiB0b1RpbWVzdGFtcChkYXRlKSB7CiAgdmFyIHNlY29uZHMgPSBkYXRlLmdldFRpbWUoKSAvIDEwMDA7CiAgdmFyIG5hbm9zID0gZGF0ZS5nZXRUaW1lKCkgJSAxMDAwICogMTAwMDAwMDsKICByZXR1cm4gewogICAgc2Vjb25kczogc2Vjb25kcywKICAgIG5hbm9zOiBuYW5vcwogIH07Cn0KCmZ1bmN0aW9uIGZyb21UaW1lc3RhbXAodCkgewogIHZhciBtaWxsaXMgPSB0LnNlY29uZHMgKiAxMDAwOwogIG1pbGxpcyArPSB0Lm5hbm9zIC8gMTAwMDAwMDsKICByZXR1cm4gbmV3IERhdGUobWlsbGlzKTsKfQoKZnVuY3Rpb24gZnJvbUpzb25UaW1lc3RhbXAobykgewogIGlmIChvIGluc3RhbmNlb2YgRGF0ZSkgewogICAgcmV0dXJuIG87CiAgfSBlbHNlIGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHsKICAgIHJldHVybiBuZXcgRGF0ZShvKTsKICB9IGVsc2UgewogICAgcmV0dXJuIGZyb21UaW1lc3RhbXAoVGltZXN0YW1wLmZyb21KU09OKG8pKTsKICB9Cn0KCmZ1bmN0aW9uIGxvbmdUb051bWJlcihfbG9uZykgewogIGlmIChfbG9uZy5ndChOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikpIHsKICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKCJWYWx1ZSBpcyBsYXJnZXIgdGhhbiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiIpOwogIH0KCiAgcmV0dXJuIF9sb25nLnRvTnVtYmVyKCk7Cn0KCmlmICh1dGlsLkxvbmcgIT09IExvbmcpIHsKICB1dGlsLkxvbmcgPSBMb25nOwogIGNvbmZpZ3VyZSgpOwp9"},{"version":3,"sources":["/home/ubuntu/starport-gravity/vue/src/store/generated/cosmos/cosmos-sdk/cosmos.base.abci.v1beta1/module/types/tendermint/abci/types.js"],"names":["Reader","util","configure","Writer","Timestamp","Long","Header","ProofOps","EvidenceParams","ValidatorParams","VersionParams","PublicKey","protobufPackage","CheckTxType","checkTxTypeFromJSON","object","NEW","RECHECK","UNRECOGNIZED","checkTxTypeToJSON","EvidenceType","evidenceTypeFromJSON","UNKNOWN","DUPLICATE_VOTE","LIGHT_CLIENT_ATTACK","evidenceTypeToJSON","ResponseOfferSnapshot_Result","responseOfferSnapshot_ResultFromJSON","ACCEPT","ABORT","REJECT","REJECT_FORMAT","REJECT_SENDER","responseOfferSnapshot_ResultToJSON","ResponseApplySnapshotChunk_Result","responseApplySnapshotChunk_ResultFromJSON","RETRY","RETRY_SNAPSHOT","REJECT_SNAPSHOT","responseApplySnapshotChunk_ResultToJSON","baseRequest","Request","encode","message","writer","create","echo","undefined","RequestEcho","uint32","fork","ldelim","flush","RequestFlush","info","RequestInfo","setOption","RequestSetOption","initChain","RequestInitChain","query","RequestQuery","beginBlock","RequestBeginBlock","checkTx","RequestCheckTx","deliverTx","RequestDeliverTx","endBlock","RequestEndBlock","commit","RequestCommit","listSnapshots","RequestListSnapshots","offerSnapshot","RequestOfferSnapshot","loadSnapshotChunk","RequestLoadSnapshotChunk","applySnapshotChunk","RequestApplySnapshotChunk","decode","input","length","reader","Uint8Array","end","len","pos","tag","skipType","fromJSON","toJSON","obj","fromPartial","baseRequestEcho","string","String","baseRequestFlush","_","baseRequestInfo","version","blockVersion","p2pVersion","uint64","longToNumber","Number","baseRequestSetOption","key","value","baseRequestInitChain","chainId","initialHeight","time","toTimestamp","consensusParams","ConsensusParams","validators","v","ValidatorUpdate","appStateBytes","bytes","int64","fromTimestamp","push","fromJsonTimestamp","e","bytesFromBase64","toISOString","map","base64FromBytes","baseRequestQuery","path","height","prove","data","bool","Boolean","baseRequestBeginBlock","hash","header","lastCommitInfo","LastCommitInfo","byzantineValidators","Evidence","baseRequestCheckTx","type","tx","int32","baseRequestDeliverTx","baseRequestEndBlock","baseRequestCommit","baseRequestListSnapshots","baseRequestOfferSnapshot","snapshot","Snapshot","appHash","baseRequestLoadSnapshotChunk","format","chunk","baseRequestApplySnapshotChunk","index","sender","baseResponse","Response","exception","ResponseException","ResponseEcho","ResponseFlush","ResponseInfo","ResponseSetOption","ResponseInitChain","ResponseQuery","ResponseBeginBlock","ResponseCheckTx","ResponseDeliverTx","ResponseEndBlock","ResponseCommit","ResponseListSnapshots","ResponseOfferSnapshot","ResponseLoadSnapshotChunk","ResponseApplySnapshotChunk","baseResponseException","error","baseResponseEcho","baseResponseFlush","baseResponseInfo","appVersion","lastBlockHeight","lastBlockAppHash","baseResponseSetOption","code","log","baseResponseInitChain","baseResponseQuery","codespace","proofOps","baseResponseBeginBlock","events","Event","baseResponseCheckTx","gasWanted","gasUsed","baseResponseDeliverTx","baseResponseEndBlock","validatorUpdates","consensusParamUpdates","baseResponseCommit","retainHeight","baseResponseListSnapshots","snapshots","baseResponseOfferSnapshot","result","baseResponseLoadSnapshotChunk","baseResponseApplySnapshotChunk","refetchChunks","rejectSenders","end2","baseConsensusParams","block","BlockParams","evidence","validator","baseBlockParams","maxBytes","maxGas","baseLastCommitInfo","round","votes","VoteInfo","baseEvent","attributes","EventAttribute","baseEventAttribute","baseTxResult","TxResult","baseValidator","power","Validator","address","baseValidatorUpdate","pubKey","baseVoteInfo","signedLastBlock","baseEvidence","totalVotingPower","baseSnapshot","chunks","metadata","ABCIApplicationClientImpl","rpc","request","finish","promise","then","globalThis","self","window","global","atob","b64","Buffer","from","toString","bin","arr","i","charCodeAt","btoa","byteLength","fromCharCode","join","date","seconds","getTime","nanos","t","millis","Date","o","long","gt","MAX_SAFE_INTEGER","Error","toNumber"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport { Reader, util, configure, Writer } from \"protobufjs/minimal\";\nimport { Timestamp } from \"../../google/protobuf/timestamp\";\nimport * as Long from \"long\";\nimport { Header } from \"../../tendermint/types/types\";\nimport { ProofOps } from \"../../tendermint/crypto/proof\";\nimport { EvidenceParams, ValidatorParams, VersionParams, } from \"../../tendermint/types/params\";\nimport { PublicKey } from \"../../tendermint/crypto/keys\";\nexport const protobufPackage = \"tendermint.abci\";\nexport var CheckTxType;\n(function (CheckTxType) {\n    CheckTxType[CheckTxType[\"NEW\"] = 0] = \"NEW\";\n    CheckTxType[CheckTxType[\"RECHECK\"] = 1] = \"RECHECK\";\n    CheckTxType[CheckTxType[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(CheckTxType || (CheckTxType = {}));\nexport function checkTxTypeFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"NEW\":\n            return CheckTxType.NEW;\n        case 1:\n        case \"RECHECK\":\n            return CheckTxType.RECHECK;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return CheckTxType.UNRECOGNIZED;\n    }\n}\nexport function checkTxTypeToJSON(object) {\n    switch (object) {\n        case CheckTxType.NEW:\n            return \"NEW\";\n        case CheckTxType.RECHECK:\n            return \"RECHECK\";\n        default:\n            return \"UNKNOWN\";\n    }\n}\nexport var EvidenceType;\n(function (EvidenceType) {\n    EvidenceType[EvidenceType[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    EvidenceType[EvidenceType[\"DUPLICATE_VOTE\"] = 1] = \"DUPLICATE_VOTE\";\n    EvidenceType[EvidenceType[\"LIGHT_CLIENT_ATTACK\"] = 2] = \"LIGHT_CLIENT_ATTACK\";\n    EvidenceType[EvidenceType[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(EvidenceType || (EvidenceType = {}));\nexport function evidenceTypeFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"UNKNOWN\":\n            return EvidenceType.UNKNOWN;\n        case 1:\n        case \"DUPLICATE_VOTE\":\n            return EvidenceType.DUPLICATE_VOTE;\n        case 2:\n        case \"LIGHT_CLIENT_ATTACK\":\n            return EvidenceType.LIGHT_CLIENT_ATTACK;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return EvidenceType.UNRECOGNIZED;\n    }\n}\nexport function evidenceTypeToJSON(object) {\n    switch (object) {\n        case EvidenceType.UNKNOWN:\n            return \"UNKNOWN\";\n        case EvidenceType.DUPLICATE_VOTE:\n            return \"DUPLICATE_VOTE\";\n        case EvidenceType.LIGHT_CLIENT_ATTACK:\n            return \"LIGHT_CLIENT_ATTACK\";\n        default:\n            return \"UNKNOWN\";\n    }\n}\nexport var ResponseOfferSnapshot_Result;\n(function (ResponseOfferSnapshot_Result) {\n    /** UNKNOWN - Unknown result, abort all snapshot restoration */\n    ResponseOfferSnapshot_Result[ResponseOfferSnapshot_Result[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    /** ACCEPT - Snapshot accepted, apply chunks */\n    ResponseOfferSnapshot_Result[ResponseOfferSnapshot_Result[\"ACCEPT\"] = 1] = \"ACCEPT\";\n    /** ABORT - Abort all snapshot restoration */\n    ResponseOfferSnapshot_Result[ResponseOfferSnapshot_Result[\"ABORT\"] = 2] = \"ABORT\";\n    /** REJECT - Reject this specific snapshot, try others */\n    ResponseOfferSnapshot_Result[ResponseOfferSnapshot_Result[\"REJECT\"] = 3] = \"REJECT\";\n    /** REJECT_FORMAT - Reject all snapshots of this format, try others */\n    ResponseOfferSnapshot_Result[ResponseOfferSnapshot_Result[\"REJECT_FORMAT\"] = 4] = \"REJECT_FORMAT\";\n    /** REJECT_SENDER - Reject all snapshots from the sender(s), try others */\n    ResponseOfferSnapshot_Result[ResponseOfferSnapshot_Result[\"REJECT_SENDER\"] = 5] = \"REJECT_SENDER\";\n    ResponseOfferSnapshot_Result[ResponseOfferSnapshot_Result[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ResponseOfferSnapshot_Result || (ResponseOfferSnapshot_Result = {}));\nexport function responseOfferSnapshot_ResultFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"UNKNOWN\":\n            return ResponseOfferSnapshot_Result.UNKNOWN;\n        case 1:\n        case \"ACCEPT\":\n            return ResponseOfferSnapshot_Result.ACCEPT;\n        case 2:\n        case \"ABORT\":\n            return ResponseOfferSnapshot_Result.ABORT;\n        case 3:\n        case \"REJECT\":\n            return ResponseOfferSnapshot_Result.REJECT;\n        case 4:\n        case \"REJECT_FORMAT\":\n            return ResponseOfferSnapshot_Result.REJECT_FORMAT;\n        case 5:\n        case \"REJECT_SENDER\":\n            return ResponseOfferSnapshot_Result.REJECT_SENDER;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ResponseOfferSnapshot_Result.UNRECOGNIZED;\n    }\n}\nexport function responseOfferSnapshot_ResultToJSON(object) {\n    switch (object) {\n        case ResponseOfferSnapshot_Result.UNKNOWN:\n            return \"UNKNOWN\";\n        case ResponseOfferSnapshot_Result.ACCEPT:\n            return \"ACCEPT\";\n        case ResponseOfferSnapshot_Result.ABORT:\n            return \"ABORT\";\n        case ResponseOfferSnapshot_Result.REJECT:\n            return \"REJECT\";\n        case ResponseOfferSnapshot_Result.REJECT_FORMAT:\n            return \"REJECT_FORMAT\";\n        case ResponseOfferSnapshot_Result.REJECT_SENDER:\n            return \"REJECT_SENDER\";\n        default:\n            return \"UNKNOWN\";\n    }\n}\nexport var ResponseApplySnapshotChunk_Result;\n(function (ResponseApplySnapshotChunk_Result) {\n    /** UNKNOWN - Unknown result, abort all snapshot restoration */\n    ResponseApplySnapshotChunk_Result[ResponseApplySnapshotChunk_Result[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    /** ACCEPT - Chunk successfully accepted */\n    ResponseApplySnapshotChunk_Result[ResponseApplySnapshotChunk_Result[\"ACCEPT\"] = 1] = \"ACCEPT\";\n    /** ABORT - Abort all snapshot restoration */\n    ResponseApplySnapshotChunk_Result[ResponseApplySnapshotChunk_Result[\"ABORT\"] = 2] = \"ABORT\";\n    /** RETRY - Retry chunk (combine with refetch and reject) */\n    ResponseApplySnapshotChunk_Result[ResponseApplySnapshotChunk_Result[\"RETRY\"] = 3] = \"RETRY\";\n    /** RETRY_SNAPSHOT - Retry snapshot (combine with refetch and reject) */\n    ResponseApplySnapshotChunk_Result[ResponseApplySnapshotChunk_Result[\"RETRY_SNAPSHOT\"] = 4] = \"RETRY_SNAPSHOT\";\n    /** REJECT_SNAPSHOT - Reject this snapshot, try others */\n    ResponseApplySnapshotChunk_Result[ResponseApplySnapshotChunk_Result[\"REJECT_SNAPSHOT\"] = 5] = \"REJECT_SNAPSHOT\";\n    ResponseApplySnapshotChunk_Result[ResponseApplySnapshotChunk_Result[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ResponseApplySnapshotChunk_Result || (ResponseApplySnapshotChunk_Result = {}));\nexport function responseApplySnapshotChunk_ResultFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"UNKNOWN\":\n            return ResponseApplySnapshotChunk_Result.UNKNOWN;\n        case 1:\n        case \"ACCEPT\":\n            return ResponseApplySnapshotChunk_Result.ACCEPT;\n        case 2:\n        case \"ABORT\":\n            return ResponseApplySnapshotChunk_Result.ABORT;\n        case 3:\n        case \"RETRY\":\n            return ResponseApplySnapshotChunk_Result.RETRY;\n        case 4:\n        case \"RETRY_SNAPSHOT\":\n            return ResponseApplySnapshotChunk_Result.RETRY_SNAPSHOT;\n        case 5:\n        case \"REJECT_SNAPSHOT\":\n            return ResponseApplySnapshotChunk_Result.REJECT_SNAPSHOT;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ResponseApplySnapshotChunk_Result.UNRECOGNIZED;\n    }\n}\nexport function responseApplySnapshotChunk_ResultToJSON(object) {\n    switch (object) {\n        case ResponseApplySnapshotChunk_Result.UNKNOWN:\n            return \"UNKNOWN\";\n        case ResponseApplySnapshotChunk_Result.ACCEPT:\n            return \"ACCEPT\";\n        case ResponseApplySnapshotChunk_Result.ABORT:\n            return \"ABORT\";\n        case ResponseApplySnapshotChunk_Result.RETRY:\n            return \"RETRY\";\n        case ResponseApplySnapshotChunk_Result.RETRY_SNAPSHOT:\n            return \"RETRY_SNAPSHOT\";\n        case ResponseApplySnapshotChunk_Result.REJECT_SNAPSHOT:\n            return \"REJECT_SNAPSHOT\";\n        default:\n            return \"UNKNOWN\";\n    }\n}\nconst baseRequest = {};\nexport const Request = {\n    encode(message, writer = Writer.create()) {\n        if (message.echo !== undefined) {\n            RequestEcho.encode(message.echo, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.flush !== undefined) {\n            RequestFlush.encode(message.flush, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.info !== undefined) {\n            RequestInfo.encode(message.info, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.setOption !== undefined) {\n            RequestSetOption.encode(message.setOption, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.initChain !== undefined) {\n            RequestInitChain.encode(message.initChain, writer.uint32(42).fork()).ldelim();\n        }\n        if (message.query !== undefined) {\n            RequestQuery.encode(message.query, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.beginBlock !== undefined) {\n            RequestBeginBlock.encode(message.beginBlock, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.checkTx !== undefined) {\n            RequestCheckTx.encode(message.checkTx, writer.uint32(66).fork()).ldelim();\n        }\n        if (message.deliverTx !== undefined) {\n            RequestDeliverTx.encode(message.deliverTx, writer.uint32(74).fork()).ldelim();\n        }\n        if (message.endBlock !== undefined) {\n            RequestEndBlock.encode(message.endBlock, writer.uint32(82).fork()).ldelim();\n        }\n        if (message.commit !== undefined) {\n            RequestCommit.encode(message.commit, writer.uint32(90).fork()).ldelim();\n        }\n        if (message.listSnapshots !== undefined) {\n            RequestListSnapshots.encode(message.listSnapshots, writer.uint32(98).fork()).ldelim();\n        }\n        if (message.offerSnapshot !== undefined) {\n            RequestOfferSnapshot.encode(message.offerSnapshot, writer.uint32(106).fork()).ldelim();\n        }\n        if (message.loadSnapshotChunk !== undefined) {\n            RequestLoadSnapshotChunk.encode(message.loadSnapshotChunk, writer.uint32(114).fork()).ldelim();\n        }\n        if (message.applySnapshotChunk !== undefined) {\n            RequestApplySnapshotChunk.encode(message.applySnapshotChunk, writer.uint32(122).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequest };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.echo = RequestEcho.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.flush = RequestFlush.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.info = RequestInfo.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.setOption = RequestSetOption.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.initChain = RequestInitChain.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.query = RequestQuery.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.beginBlock = RequestBeginBlock.decode(reader, reader.uint32());\n                    break;\n                case 8:\n                    message.checkTx = RequestCheckTx.decode(reader, reader.uint32());\n                    break;\n                case 9:\n                    message.deliverTx = RequestDeliverTx.decode(reader, reader.uint32());\n                    break;\n                case 10:\n                    message.endBlock = RequestEndBlock.decode(reader, reader.uint32());\n                    break;\n                case 11:\n                    message.commit = RequestCommit.decode(reader, reader.uint32());\n                    break;\n                case 12:\n                    message.listSnapshots = RequestListSnapshots.decode(reader, reader.uint32());\n                    break;\n                case 13:\n                    message.offerSnapshot = RequestOfferSnapshot.decode(reader, reader.uint32());\n                    break;\n                case 14:\n                    message.loadSnapshotChunk = RequestLoadSnapshotChunk.decode(reader, reader.uint32());\n                    break;\n                case 15:\n                    message.applySnapshotChunk = RequestApplySnapshotChunk.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequest };\n        if (object.echo !== undefined && object.echo !== null) {\n            message.echo = RequestEcho.fromJSON(object.echo);\n        }\n        else {\n            message.echo = undefined;\n        }\n        if (object.flush !== undefined && object.flush !== null) {\n            message.flush = RequestFlush.fromJSON(object.flush);\n        }\n        else {\n            message.flush = undefined;\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = RequestInfo.fromJSON(object.info);\n        }\n        else {\n            message.info = undefined;\n        }\n        if (object.setOption !== undefined && object.setOption !== null) {\n            message.setOption = RequestSetOption.fromJSON(object.setOption);\n        }\n        else {\n            message.setOption = undefined;\n        }\n        if (object.initChain !== undefined && object.initChain !== null) {\n            message.initChain = RequestInitChain.fromJSON(object.initChain);\n        }\n        else {\n            message.initChain = undefined;\n        }\n        if (object.query !== undefined && object.query !== null) {\n            message.query = RequestQuery.fromJSON(object.query);\n        }\n        else {\n            message.query = undefined;\n        }\n        if (object.beginBlock !== undefined && object.beginBlock !== null) {\n            message.beginBlock = RequestBeginBlock.fromJSON(object.beginBlock);\n        }\n        else {\n            message.beginBlock = undefined;\n        }\n        if (object.checkTx !== undefined && object.checkTx !== null) {\n            message.checkTx = RequestCheckTx.fromJSON(object.checkTx);\n        }\n        else {\n            message.checkTx = undefined;\n        }\n        if (object.deliverTx !== undefined && object.deliverTx !== null) {\n            message.deliverTx = RequestDeliverTx.fromJSON(object.deliverTx);\n        }\n        else {\n            message.deliverTx = undefined;\n        }\n        if (object.endBlock !== undefined && object.endBlock !== null) {\n            message.endBlock = RequestEndBlock.fromJSON(object.endBlock);\n        }\n        else {\n            message.endBlock = undefined;\n        }\n        if (object.commit !== undefined && object.commit !== null) {\n            message.commit = RequestCommit.fromJSON(object.commit);\n        }\n        else {\n            message.commit = undefined;\n        }\n        if (object.listSnapshots !== undefined && object.listSnapshots !== null) {\n            message.listSnapshots = RequestListSnapshots.fromJSON(object.listSnapshots);\n        }\n        else {\n            message.listSnapshots = undefined;\n        }\n        if (object.offerSnapshot !== undefined && object.offerSnapshot !== null) {\n            message.offerSnapshot = RequestOfferSnapshot.fromJSON(object.offerSnapshot);\n        }\n        else {\n            message.offerSnapshot = undefined;\n        }\n        if (object.loadSnapshotChunk !== undefined &&\n            object.loadSnapshotChunk !== null) {\n            message.loadSnapshotChunk = RequestLoadSnapshotChunk.fromJSON(object.loadSnapshotChunk);\n        }\n        else {\n            message.loadSnapshotChunk = undefined;\n        }\n        if (object.applySnapshotChunk !== undefined &&\n            object.applySnapshotChunk !== null) {\n            message.applySnapshotChunk = RequestApplySnapshotChunk.fromJSON(object.applySnapshotChunk);\n        }\n        else {\n            message.applySnapshotChunk = undefined;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.echo !== undefined &&\n            (obj.echo = message.echo ? RequestEcho.toJSON(message.echo) : undefined);\n        message.flush !== undefined &&\n            (obj.flush = message.flush\n                ? RequestFlush.toJSON(message.flush)\n                : undefined);\n        message.info !== undefined &&\n            (obj.info = message.info ? RequestInfo.toJSON(message.info) : undefined);\n        message.setOption !== undefined &&\n            (obj.setOption = message.setOption\n                ? RequestSetOption.toJSON(message.setOption)\n                : undefined);\n        message.initChain !== undefined &&\n            (obj.initChain = message.initChain\n                ? RequestInitChain.toJSON(message.initChain)\n                : undefined);\n        message.query !== undefined &&\n            (obj.query = message.query\n                ? RequestQuery.toJSON(message.query)\n                : undefined);\n        message.beginBlock !== undefined &&\n            (obj.beginBlock = message.beginBlock\n                ? RequestBeginBlock.toJSON(message.beginBlock)\n                : undefined);\n        message.checkTx !== undefined &&\n            (obj.checkTx = message.checkTx\n                ? RequestCheckTx.toJSON(message.checkTx)\n                : undefined);\n        message.deliverTx !== undefined &&\n            (obj.deliverTx = message.deliverTx\n                ? RequestDeliverTx.toJSON(message.deliverTx)\n                : undefined);\n        message.endBlock !== undefined &&\n            (obj.endBlock = message.endBlock\n                ? RequestEndBlock.toJSON(message.endBlock)\n                : undefined);\n        message.commit !== undefined &&\n            (obj.commit = message.commit\n                ? RequestCommit.toJSON(message.commit)\n                : undefined);\n        message.listSnapshots !== undefined &&\n            (obj.listSnapshots = message.listSnapshots\n                ? RequestListSnapshots.toJSON(message.listSnapshots)\n                : undefined);\n        message.offerSnapshot !== undefined &&\n            (obj.offerSnapshot = message.offerSnapshot\n                ? RequestOfferSnapshot.toJSON(message.offerSnapshot)\n                : undefined);\n        message.loadSnapshotChunk !== undefined &&\n            (obj.loadSnapshotChunk = message.loadSnapshotChunk\n                ? RequestLoadSnapshotChunk.toJSON(message.loadSnapshotChunk)\n                : undefined);\n        message.applySnapshotChunk !== undefined &&\n            (obj.applySnapshotChunk = message.applySnapshotChunk\n                ? RequestApplySnapshotChunk.toJSON(message.applySnapshotChunk)\n                : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequest };\n        if (object.echo !== undefined && object.echo !== null) {\n            message.echo = RequestEcho.fromPartial(object.echo);\n        }\n        else {\n            message.echo = undefined;\n        }\n        if (object.flush !== undefined && object.flush !== null) {\n            message.flush = RequestFlush.fromPartial(object.flush);\n        }\n        else {\n            message.flush = undefined;\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = RequestInfo.fromPartial(object.info);\n        }\n        else {\n            message.info = undefined;\n        }\n        if (object.setOption !== undefined && object.setOption !== null) {\n            message.setOption = RequestSetOption.fromPartial(object.setOption);\n        }\n        else {\n            message.setOption = undefined;\n        }\n        if (object.initChain !== undefined && object.initChain !== null) {\n            message.initChain = RequestInitChain.fromPartial(object.initChain);\n        }\n        else {\n            message.initChain = undefined;\n        }\n        if (object.query !== undefined && object.query !== null) {\n            message.query = RequestQuery.fromPartial(object.query);\n        }\n        else {\n            message.query = undefined;\n        }\n        if (object.beginBlock !== undefined && object.beginBlock !== null) {\n            message.beginBlock = RequestBeginBlock.fromPartial(object.beginBlock);\n        }\n        else {\n            message.beginBlock = undefined;\n        }\n        if (object.checkTx !== undefined && object.checkTx !== null) {\n            message.checkTx = RequestCheckTx.fromPartial(object.checkTx);\n        }\n        else {\n            message.checkTx = undefined;\n        }\n        if (object.deliverTx !== undefined && object.deliverTx !== null) {\n            message.deliverTx = RequestDeliverTx.fromPartial(object.deliverTx);\n        }\n        else {\n            message.deliverTx = undefined;\n        }\n        if (object.endBlock !== undefined && object.endBlock !== null) {\n            message.endBlock = RequestEndBlock.fromPartial(object.endBlock);\n        }\n        else {\n            message.endBlock = undefined;\n        }\n        if (object.commit !== undefined && object.commit !== null) {\n            message.commit = RequestCommit.fromPartial(object.commit);\n        }\n        else {\n            message.commit = undefined;\n        }\n        if (object.listSnapshots !== undefined && object.listSnapshots !== null) {\n            message.listSnapshots = RequestListSnapshots.fromPartial(object.listSnapshots);\n        }\n        else {\n            message.listSnapshots = undefined;\n        }\n        if (object.offerSnapshot !== undefined && object.offerSnapshot !== null) {\n            message.offerSnapshot = RequestOfferSnapshot.fromPartial(object.offerSnapshot);\n        }\n        else {\n            message.offerSnapshot = undefined;\n        }\n        if (object.loadSnapshotChunk !== undefined &&\n            object.loadSnapshotChunk !== null) {\n            message.loadSnapshotChunk = RequestLoadSnapshotChunk.fromPartial(object.loadSnapshotChunk);\n        }\n        else {\n            message.loadSnapshotChunk = undefined;\n        }\n        if (object.applySnapshotChunk !== undefined &&\n            object.applySnapshotChunk !== null) {\n            message.applySnapshotChunk = RequestApplySnapshotChunk.fromPartial(object.applySnapshotChunk);\n        }\n        else {\n            message.applySnapshotChunk = undefined;\n        }\n        return message;\n    },\n};\nconst baseRequestEcho = { message: \"\" };\nexport const RequestEcho = {\n    encode(message, writer = Writer.create()) {\n        if (message.message !== \"\") {\n            writer.uint32(10).string(message.message);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestEcho };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.message = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestEcho };\n        if (object.message !== undefined && object.message !== null) {\n            message.message = String(object.message);\n        }\n        else {\n            message.message = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.message !== undefined && (obj.message = message.message);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestEcho };\n        if (object.message !== undefined && object.message !== null) {\n            message.message = object.message;\n        }\n        else {\n            message.message = \"\";\n        }\n        return message;\n    },\n};\nconst baseRequestFlush = {};\nexport const RequestFlush = {\n    encode(_, writer = Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestFlush };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        const message = { ...baseRequestFlush };\n        return message;\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = { ...baseRequestFlush };\n        return message;\n    },\n};\nconst baseRequestInfo = { version: \"\", blockVersion: 0, p2pVersion: 0 };\nexport const RequestInfo = {\n    encode(message, writer = Writer.create()) {\n        if (message.version !== \"\") {\n            writer.uint32(10).string(message.version);\n        }\n        if (message.blockVersion !== 0) {\n            writer.uint32(16).uint64(message.blockVersion);\n        }\n        if (message.p2pVersion !== 0) {\n            writer.uint32(24).uint64(message.p2pVersion);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestInfo };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.version = reader.string();\n                    break;\n                case 2:\n                    message.blockVersion = longToNumber(reader.uint64());\n                    break;\n                case 3:\n                    message.p2pVersion = longToNumber(reader.uint64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestInfo };\n        if (object.version !== undefined && object.version !== null) {\n            message.version = String(object.version);\n        }\n        else {\n            message.version = \"\";\n        }\n        if (object.blockVersion !== undefined && object.blockVersion !== null) {\n            message.blockVersion = Number(object.blockVersion);\n        }\n        else {\n            message.blockVersion = 0;\n        }\n        if (object.p2pVersion !== undefined && object.p2pVersion !== null) {\n            message.p2pVersion = Number(object.p2pVersion);\n        }\n        else {\n            message.p2pVersion = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.version !== undefined && (obj.version = message.version);\n        message.blockVersion !== undefined &&\n            (obj.blockVersion = message.blockVersion);\n        message.p2pVersion !== undefined && (obj.p2pVersion = message.p2pVersion);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestInfo };\n        if (object.version !== undefined && object.version !== null) {\n            message.version = object.version;\n        }\n        else {\n            message.version = \"\";\n        }\n        if (object.blockVersion !== undefined && object.blockVersion !== null) {\n            message.blockVersion = object.blockVersion;\n        }\n        else {\n            message.blockVersion = 0;\n        }\n        if (object.p2pVersion !== undefined && object.p2pVersion !== null) {\n            message.p2pVersion = object.p2pVersion;\n        }\n        else {\n            message.p2pVersion = 0;\n        }\n        return message;\n    },\n};\nconst baseRequestSetOption = { key: \"\", value: \"\" };\nexport const RequestSetOption = {\n    encode(message, writer = Writer.create()) {\n        if (message.key !== \"\") {\n            writer.uint32(10).string(message.key);\n        }\n        if (message.value !== \"\") {\n            writer.uint32(18).string(message.value);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestSetOption };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.key = reader.string();\n                    break;\n                case 2:\n                    message.value = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestSetOption };\n        if (object.key !== undefined && object.key !== null) {\n            message.key = String(object.key);\n        }\n        else {\n            message.key = \"\";\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = String(object.value);\n        }\n        else {\n            message.value = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.key !== undefined && (obj.key = message.key);\n        message.value !== undefined && (obj.value = message.value);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestSetOption };\n        if (object.key !== undefined && object.key !== null) {\n            message.key = object.key;\n        }\n        else {\n            message.key = \"\";\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = object.value;\n        }\n        else {\n            message.value = \"\";\n        }\n        return message;\n    },\n};\nconst baseRequestInitChain = { chainId: \"\", initialHeight: 0 };\nexport const RequestInitChain = {\n    encode(message, writer = Writer.create()) {\n        if (message.time !== undefined) {\n            Timestamp.encode(toTimestamp(message.time), writer.uint32(10).fork()).ldelim();\n        }\n        if (message.chainId !== \"\") {\n            writer.uint32(18).string(message.chainId);\n        }\n        if (message.consensusParams !== undefined) {\n            ConsensusParams.encode(message.consensusParams, writer.uint32(26).fork()).ldelim();\n        }\n        for (const v of message.validators) {\n            ValidatorUpdate.encode(v, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.appStateBytes.length !== 0) {\n            writer.uint32(42).bytes(message.appStateBytes);\n        }\n        if (message.initialHeight !== 0) {\n            writer.uint32(48).int64(message.initialHeight);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestInitChain };\n        message.validators = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.time = fromTimestamp(Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 2:\n                    message.chainId = reader.string();\n                    break;\n                case 3:\n                    message.consensusParams = ConsensusParams.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.validators.push(ValidatorUpdate.decode(reader, reader.uint32()));\n                    break;\n                case 5:\n                    message.appStateBytes = reader.bytes();\n                    break;\n                case 6:\n                    message.initialHeight = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestInitChain };\n        message.validators = [];\n        if (object.time !== undefined && object.time !== null) {\n            message.time = fromJsonTimestamp(object.time);\n        }\n        else {\n            message.time = undefined;\n        }\n        if (object.chainId !== undefined && object.chainId !== null) {\n            message.chainId = String(object.chainId);\n        }\n        else {\n            message.chainId = \"\";\n        }\n        if (object.consensusParams !== undefined &&\n            object.consensusParams !== null) {\n            message.consensusParams = ConsensusParams.fromJSON(object.consensusParams);\n        }\n        else {\n            message.consensusParams = undefined;\n        }\n        if (object.validators !== undefined && object.validators !== null) {\n            for (const e of object.validators) {\n                message.validators.push(ValidatorUpdate.fromJSON(e));\n            }\n        }\n        if (object.appStateBytes !== undefined && object.appStateBytes !== null) {\n            message.appStateBytes = bytesFromBase64(object.appStateBytes);\n        }\n        if (object.initialHeight !== undefined && object.initialHeight !== null) {\n            message.initialHeight = Number(object.initialHeight);\n        }\n        else {\n            message.initialHeight = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.time !== undefined &&\n            (obj.time =\n                message.time !== undefined ? message.time.toISOString() : null);\n        message.chainId !== undefined && (obj.chainId = message.chainId);\n        message.consensusParams !== undefined &&\n            (obj.consensusParams = message.consensusParams\n                ? ConsensusParams.toJSON(message.consensusParams)\n                : undefined);\n        if (message.validators) {\n            obj.validators = message.validators.map((e) => e ? ValidatorUpdate.toJSON(e) : undefined);\n        }\n        else {\n            obj.validators = [];\n        }\n        message.appStateBytes !== undefined &&\n            (obj.appStateBytes = base64FromBytes(message.appStateBytes !== undefined\n                ? message.appStateBytes\n                : new Uint8Array()));\n        message.initialHeight !== undefined &&\n            (obj.initialHeight = message.initialHeight);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestInitChain };\n        message.validators = [];\n        if (object.time !== undefined && object.time !== null) {\n            message.time = object.time;\n        }\n        else {\n            message.time = undefined;\n        }\n        if (object.chainId !== undefined && object.chainId !== null) {\n            message.chainId = object.chainId;\n        }\n        else {\n            message.chainId = \"\";\n        }\n        if (object.consensusParams !== undefined &&\n            object.consensusParams !== null) {\n            message.consensusParams = ConsensusParams.fromPartial(object.consensusParams);\n        }\n        else {\n            message.consensusParams = undefined;\n        }\n        if (object.validators !== undefined && object.validators !== null) {\n            for (const e of object.validators) {\n                message.validators.push(ValidatorUpdate.fromPartial(e));\n            }\n        }\n        if (object.appStateBytes !== undefined && object.appStateBytes !== null) {\n            message.appStateBytes = object.appStateBytes;\n        }\n        else {\n            message.appStateBytes = new Uint8Array();\n        }\n        if (object.initialHeight !== undefined && object.initialHeight !== null) {\n            message.initialHeight = object.initialHeight;\n        }\n        else {\n            message.initialHeight = 0;\n        }\n        return message;\n    },\n};\nconst baseRequestQuery = { path: \"\", height: 0, prove: false };\nexport const RequestQuery = {\n    encode(message, writer = Writer.create()) {\n        if (message.data.length !== 0) {\n            writer.uint32(10).bytes(message.data);\n        }\n        if (message.path !== \"\") {\n            writer.uint32(18).string(message.path);\n        }\n        if (message.height !== 0) {\n            writer.uint32(24).int64(message.height);\n        }\n        if (message.prove === true) {\n            writer.uint32(32).bool(message.prove);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestQuery };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.data = reader.bytes();\n                    break;\n                case 2:\n                    message.path = reader.string();\n                    break;\n                case 3:\n                    message.height = longToNumber(reader.int64());\n                    break;\n                case 4:\n                    message.prove = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestQuery };\n        if (object.data !== undefined && object.data !== null) {\n            message.data = bytesFromBase64(object.data);\n        }\n        if (object.path !== undefined && object.path !== null) {\n            message.path = String(object.path);\n        }\n        else {\n            message.path = \"\";\n        }\n        if (object.height !== undefined && object.height !== null) {\n            message.height = Number(object.height);\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.prove !== undefined && object.prove !== null) {\n            message.prove = Boolean(object.prove);\n        }\n        else {\n            message.prove = false;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.data !== undefined &&\n            (obj.data = base64FromBytes(message.data !== undefined ? message.data : new Uint8Array()));\n        message.path !== undefined && (obj.path = message.path);\n        message.height !== undefined && (obj.height = message.height);\n        message.prove !== undefined && (obj.prove = message.prove);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestQuery };\n        if (object.data !== undefined && object.data !== null) {\n            message.data = object.data;\n        }\n        else {\n            message.data = new Uint8Array();\n        }\n        if (object.path !== undefined && object.path !== null) {\n            message.path = object.path;\n        }\n        else {\n            message.path = \"\";\n        }\n        if (object.height !== undefined && object.height !== null) {\n            message.height = object.height;\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.prove !== undefined && object.prove !== null) {\n            message.prove = object.prove;\n        }\n        else {\n            message.prove = false;\n        }\n        return message;\n    },\n};\nconst baseRequestBeginBlock = {};\nexport const RequestBeginBlock = {\n    encode(message, writer = Writer.create()) {\n        if (message.hash.length !== 0) {\n            writer.uint32(10).bytes(message.hash);\n        }\n        if (message.header !== undefined) {\n            Header.encode(message.header, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.lastCommitInfo !== undefined) {\n            LastCommitInfo.encode(message.lastCommitInfo, writer.uint32(26).fork()).ldelim();\n        }\n        for (const v of message.byzantineValidators) {\n            Evidence.encode(v, writer.uint32(34).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestBeginBlock };\n        message.byzantineValidators = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.hash = reader.bytes();\n                    break;\n                case 2:\n                    message.header = Header.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.lastCommitInfo = LastCommitInfo.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.byzantineValidators.push(Evidence.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestBeginBlock };\n        message.byzantineValidators = [];\n        if (object.hash !== undefined && object.hash !== null) {\n            message.hash = bytesFromBase64(object.hash);\n        }\n        if (object.header !== undefined && object.header !== null) {\n            message.header = Header.fromJSON(object.header);\n        }\n        else {\n            message.header = undefined;\n        }\n        if (object.lastCommitInfo !== undefined && object.lastCommitInfo !== null) {\n            message.lastCommitInfo = LastCommitInfo.fromJSON(object.lastCommitInfo);\n        }\n        else {\n            message.lastCommitInfo = undefined;\n        }\n        if (object.byzantineValidators !== undefined &&\n            object.byzantineValidators !== null) {\n            for (const e of object.byzantineValidators) {\n                message.byzantineValidators.push(Evidence.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.hash !== undefined &&\n            (obj.hash = base64FromBytes(message.hash !== undefined ? message.hash : new Uint8Array()));\n        message.header !== undefined &&\n            (obj.header = message.header ? Header.toJSON(message.header) : undefined);\n        message.lastCommitInfo !== undefined &&\n            (obj.lastCommitInfo = message.lastCommitInfo\n                ? LastCommitInfo.toJSON(message.lastCommitInfo)\n                : undefined);\n        if (message.byzantineValidators) {\n            obj.byzantineValidators = message.byzantineValidators.map((e) => e ? Evidence.toJSON(e) : undefined);\n        }\n        else {\n            obj.byzantineValidators = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestBeginBlock };\n        message.byzantineValidators = [];\n        if (object.hash !== undefined && object.hash !== null) {\n            message.hash = object.hash;\n        }\n        else {\n            message.hash = new Uint8Array();\n        }\n        if (object.header !== undefined && object.header !== null) {\n            message.header = Header.fromPartial(object.header);\n        }\n        else {\n            message.header = undefined;\n        }\n        if (object.lastCommitInfo !== undefined && object.lastCommitInfo !== null) {\n            message.lastCommitInfo = LastCommitInfo.fromPartial(object.lastCommitInfo);\n        }\n        else {\n            message.lastCommitInfo = undefined;\n        }\n        if (object.byzantineValidators !== undefined &&\n            object.byzantineValidators !== null) {\n            for (const e of object.byzantineValidators) {\n                message.byzantineValidators.push(Evidence.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst baseRequestCheckTx = { type: 0 };\nexport const RequestCheckTx = {\n    encode(message, writer = Writer.create()) {\n        if (message.tx.length !== 0) {\n            writer.uint32(10).bytes(message.tx);\n        }\n        if (message.type !== 0) {\n            writer.uint32(16).int32(message.type);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestCheckTx };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.tx = reader.bytes();\n                    break;\n                case 2:\n                    message.type = reader.int32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestCheckTx };\n        if (object.tx !== undefined && object.tx !== null) {\n            message.tx = bytesFromBase64(object.tx);\n        }\n        if (object.type !== undefined && object.type !== null) {\n            message.type = checkTxTypeFromJSON(object.type);\n        }\n        else {\n            message.type = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.tx !== undefined &&\n            (obj.tx = base64FromBytes(message.tx !== undefined ? message.tx : new Uint8Array()));\n        message.type !== undefined && (obj.type = checkTxTypeToJSON(message.type));\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestCheckTx };\n        if (object.tx !== undefined && object.tx !== null) {\n            message.tx = object.tx;\n        }\n        else {\n            message.tx = new Uint8Array();\n        }\n        if (object.type !== undefined && object.type !== null) {\n            message.type = object.type;\n        }\n        else {\n            message.type = 0;\n        }\n        return message;\n    },\n};\nconst baseRequestDeliverTx = {};\nexport const RequestDeliverTx = {\n    encode(message, writer = Writer.create()) {\n        if (message.tx.length !== 0) {\n            writer.uint32(10).bytes(message.tx);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestDeliverTx };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.tx = reader.bytes();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestDeliverTx };\n        if (object.tx !== undefined && object.tx !== null) {\n            message.tx = bytesFromBase64(object.tx);\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.tx !== undefined &&\n            (obj.tx = base64FromBytes(message.tx !== undefined ? message.tx : new Uint8Array()));\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestDeliverTx };\n        if (object.tx !== undefined && object.tx !== null) {\n            message.tx = object.tx;\n        }\n        else {\n            message.tx = new Uint8Array();\n        }\n        return message;\n    },\n};\nconst baseRequestEndBlock = { height: 0 };\nexport const RequestEndBlock = {\n    encode(message, writer = Writer.create()) {\n        if (message.height !== 0) {\n            writer.uint32(8).int64(message.height);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestEndBlock };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.height = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestEndBlock };\n        if (object.height !== undefined && object.height !== null) {\n            message.height = Number(object.height);\n        }\n        else {\n            message.height = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.height !== undefined && (obj.height = message.height);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestEndBlock };\n        if (object.height !== undefined && object.height !== null) {\n            message.height = object.height;\n        }\n        else {\n            message.height = 0;\n        }\n        return message;\n    },\n};\nconst baseRequestCommit = {};\nexport const RequestCommit = {\n    encode(_, writer = Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestCommit };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        const message = { ...baseRequestCommit };\n        return message;\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = { ...baseRequestCommit };\n        return message;\n    },\n};\nconst baseRequestListSnapshots = {};\nexport const RequestListSnapshots = {\n    encode(_, writer = Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestListSnapshots };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        const message = { ...baseRequestListSnapshots };\n        return message;\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = { ...baseRequestListSnapshots };\n        return message;\n    },\n};\nconst baseRequestOfferSnapshot = {};\nexport const RequestOfferSnapshot = {\n    encode(message, writer = Writer.create()) {\n        if (message.snapshot !== undefined) {\n            Snapshot.encode(message.snapshot, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.appHash.length !== 0) {\n            writer.uint32(18).bytes(message.appHash);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRequestOfferSnapshot };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.snapshot = Snapshot.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.appHash = reader.bytes();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRequestOfferSnapshot };\n        if (object.snapshot !== undefined && object.snapshot !== null) {\n            message.snapshot = Snapshot.fromJSON(object.snapshot);\n        }\n        else {\n            message.snapshot = undefined;\n        }\n        if (object.appHash !== undefined && object.appHash !== null) {\n            message.appHash = bytesFromBase64(object.appHash);\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.snapshot !== undefined &&\n            (obj.snapshot = message.snapshot\n                ? Snapshot.toJSON(message.snapshot)\n                : undefined);\n        message.appHash !== undefined &&\n            (obj.appHash = base64FromBytes(message.appHash !== undefined ? message.appHash : new Uint8Array()));\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRequestOfferSnapshot };\n        if (object.snapshot !== undefined && object.snapshot !== null) {\n            message.snapshot = Snapshot.fromPartial(object.snapshot);\n        }\n        else {\n            message.snapshot = undefined;\n        }\n        if (object.appHash !== undefined && object.appHash !== null) {\n            message.appHash = object.appHash;\n        }\n        else {\n            message.appHash = new Uint8Array();\n        }\n        return message;\n    },\n};\nconst baseRequestLoadSnapshotChunk = { height: 0, format: 0, chunk: 0 };\nexport const RequestLoadSnapshotChunk = {\n    encode(message, writer = Writer.create()) {\n        if (message.height !== 0) {\n            writer.uint32(8).uint64(message.height);\n        }\n        if (message.format !== 0) {\n            writer.uint32(16).uint32(message.format);\n        }\n        if (message.chunk !== 0) {\n            writer.uint32(24).uint32(message.chunk);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = {\n            ...baseRequestLoadSnapshotChunk,\n        };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.height = longToNumber(reader.uint64());\n                    break;\n                case 2:\n                    message.format = reader.uint32();\n                    break;\n                case 3:\n                    message.chunk = reader.uint32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = {\n            ...baseRequestLoadSnapshotChunk,\n        };\n        if (object.height !== undefined && object.height !== null) {\n            message.height = Number(object.height);\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.format !== undefined && object.format !== null) {\n            message.format = Number(object.format);\n        }\n        else {\n            message.format = 0;\n        }\n        if (object.chunk !== undefined && object.chunk !== null) {\n            message.chunk = Number(object.chunk);\n        }\n        else {\n            message.chunk = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.height !== undefined && (obj.height = message.height);\n        message.format !== undefined && (obj.format = message.format);\n        message.chunk !== undefined && (obj.chunk = message.chunk);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = {\n            ...baseRequestLoadSnapshotChunk,\n        };\n        if (object.height !== undefined && object.height !== null) {\n            message.height = object.height;\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.format !== undefined && object.format !== null) {\n            message.format = object.format;\n        }\n        else {\n            message.format = 0;\n        }\n        if (object.chunk !== undefined && object.chunk !== null) {\n            message.chunk = object.chunk;\n        }\n        else {\n            message.chunk = 0;\n        }\n        return message;\n    },\n};\nconst baseRequestApplySnapshotChunk = { index: 0, sender: \"\" };\nexport const RequestApplySnapshotChunk = {\n    encode(message, writer = Writer.create()) {\n        if (message.index !== 0) {\n            writer.uint32(8).uint32(message.index);\n        }\n        if (message.chunk.length !== 0) {\n            writer.uint32(18).bytes(message.chunk);\n        }\n        if (message.sender !== \"\") {\n            writer.uint32(26).string(message.sender);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = {\n            ...baseRequestApplySnapshotChunk,\n        };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.index = reader.uint32();\n                    break;\n                case 2:\n                    message.chunk = reader.bytes();\n                    break;\n                case 3:\n                    message.sender = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = {\n            ...baseRequestApplySnapshotChunk,\n        };\n        if (object.index !== undefined && object.index !== null) {\n            message.index = Number(object.index);\n        }\n        else {\n            message.index = 0;\n        }\n        if (object.chunk !== undefined && object.chunk !== null) {\n            message.chunk = bytesFromBase64(object.chunk);\n        }\n        if (object.sender !== undefined && object.sender !== null) {\n            message.sender = String(object.sender);\n        }\n        else {\n            message.sender = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.index !== undefined && (obj.index = message.index);\n        message.chunk !== undefined &&\n            (obj.chunk = base64FromBytes(message.chunk !== undefined ? message.chunk : new Uint8Array()));\n        message.sender !== undefined && (obj.sender = message.sender);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = {\n            ...baseRequestApplySnapshotChunk,\n        };\n        if (object.index !== undefined && object.index !== null) {\n            message.index = object.index;\n        }\n        else {\n            message.index = 0;\n        }\n        if (object.chunk !== undefined && object.chunk !== null) {\n            message.chunk = object.chunk;\n        }\n        else {\n            message.chunk = new Uint8Array();\n        }\n        if (object.sender !== undefined && object.sender !== null) {\n            message.sender = object.sender;\n        }\n        else {\n            message.sender = \"\";\n        }\n        return message;\n    },\n};\nconst baseResponse = {};\nexport const Response = {\n    encode(message, writer = Writer.create()) {\n        if (message.exception !== undefined) {\n            ResponseException.encode(message.exception, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.echo !== undefined) {\n            ResponseEcho.encode(message.echo, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.flush !== undefined) {\n            ResponseFlush.encode(message.flush, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.info !== undefined) {\n            ResponseInfo.encode(message.info, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.setOption !== undefined) {\n            ResponseSetOption.encode(message.setOption, writer.uint32(42).fork()).ldelim();\n        }\n        if (message.initChain !== undefined) {\n            ResponseInitChain.encode(message.initChain, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.query !== undefined) {\n            ResponseQuery.encode(message.query, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.beginBlock !== undefined) {\n            ResponseBeginBlock.encode(message.beginBlock, writer.uint32(66).fork()).ldelim();\n        }\n        if (message.checkTx !== undefined) {\n            ResponseCheckTx.encode(message.checkTx, writer.uint32(74).fork()).ldelim();\n        }\n        if (message.deliverTx !== undefined) {\n            ResponseDeliverTx.encode(message.deliverTx, writer.uint32(82).fork()).ldelim();\n        }\n        if (message.endBlock !== undefined) {\n            ResponseEndBlock.encode(message.endBlock, writer.uint32(90).fork()).ldelim();\n        }\n        if (message.commit !== undefined) {\n            ResponseCommit.encode(message.commit, writer.uint32(98).fork()).ldelim();\n        }\n        if (message.listSnapshots !== undefined) {\n            ResponseListSnapshots.encode(message.listSnapshots, writer.uint32(106).fork()).ldelim();\n        }\n        if (message.offerSnapshot !== undefined) {\n            ResponseOfferSnapshot.encode(message.offerSnapshot, writer.uint32(114).fork()).ldelim();\n        }\n        if (message.loadSnapshotChunk !== undefined) {\n            ResponseLoadSnapshotChunk.encode(message.loadSnapshotChunk, writer.uint32(122).fork()).ldelim();\n        }\n        if (message.applySnapshotChunk !== undefined) {\n            ResponseApplySnapshotChunk.encode(message.applySnapshotChunk, writer.uint32(130).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponse };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.exception = ResponseException.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.echo = ResponseEcho.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.flush = ResponseFlush.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.info = ResponseInfo.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.setOption = ResponseSetOption.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.initChain = ResponseInitChain.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.query = ResponseQuery.decode(reader, reader.uint32());\n                    break;\n                case 8:\n                    message.beginBlock = ResponseBeginBlock.decode(reader, reader.uint32());\n                    break;\n                case 9:\n                    message.checkTx = ResponseCheckTx.decode(reader, reader.uint32());\n                    break;\n                case 10:\n                    message.deliverTx = ResponseDeliverTx.decode(reader, reader.uint32());\n                    break;\n                case 11:\n                    message.endBlock = ResponseEndBlock.decode(reader, reader.uint32());\n                    break;\n                case 12:\n                    message.commit = ResponseCommit.decode(reader, reader.uint32());\n                    break;\n                case 13:\n                    message.listSnapshots = ResponseListSnapshots.decode(reader, reader.uint32());\n                    break;\n                case 14:\n                    message.offerSnapshot = ResponseOfferSnapshot.decode(reader, reader.uint32());\n                    break;\n                case 15:\n                    message.loadSnapshotChunk = ResponseLoadSnapshotChunk.decode(reader, reader.uint32());\n                    break;\n                case 16:\n                    message.applySnapshotChunk = ResponseApplySnapshotChunk.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponse };\n        if (object.exception !== undefined && object.exception !== null) {\n            message.exception = ResponseException.fromJSON(object.exception);\n        }\n        else {\n            message.exception = undefined;\n        }\n        if (object.echo !== undefined && object.echo !== null) {\n            message.echo = ResponseEcho.fromJSON(object.echo);\n        }\n        else {\n            message.echo = undefined;\n        }\n        if (object.flush !== undefined && object.flush !== null) {\n            message.flush = ResponseFlush.fromJSON(object.flush);\n        }\n        else {\n            message.flush = undefined;\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = ResponseInfo.fromJSON(object.info);\n        }\n        else {\n            message.info = undefined;\n        }\n        if (object.setOption !== undefined && object.setOption !== null) {\n            message.setOption = ResponseSetOption.fromJSON(object.setOption);\n        }\n        else {\n            message.setOption = undefined;\n        }\n        if (object.initChain !== undefined && object.initChain !== null) {\n            message.initChain = ResponseInitChain.fromJSON(object.initChain);\n        }\n        else {\n            message.initChain = undefined;\n        }\n        if (object.query !== undefined && object.query !== null) {\n            message.query = ResponseQuery.fromJSON(object.query);\n        }\n        else {\n            message.query = undefined;\n        }\n        if (object.beginBlock !== undefined && object.beginBlock !== null) {\n            message.beginBlock = ResponseBeginBlock.fromJSON(object.beginBlock);\n        }\n        else {\n            message.beginBlock = undefined;\n        }\n        if (object.checkTx !== undefined && object.checkTx !== null) {\n            message.checkTx = ResponseCheckTx.fromJSON(object.checkTx);\n        }\n        else {\n            message.checkTx = undefined;\n        }\n        if (object.deliverTx !== undefined && object.deliverTx !== null) {\n            message.deliverTx = ResponseDeliverTx.fromJSON(object.deliverTx);\n        }\n        else {\n            message.deliverTx = undefined;\n        }\n        if (object.endBlock !== undefined && object.endBlock !== null) {\n            message.endBlock = ResponseEndBlock.fromJSON(object.endBlock);\n        }\n        else {\n            message.endBlock = undefined;\n        }\n        if (object.commit !== undefined && object.commit !== null) {\n            message.commit = ResponseCommit.fromJSON(object.commit);\n        }\n        else {\n            message.commit = undefined;\n        }\n        if (object.listSnapshots !== undefined && object.listSnapshots !== null) {\n            message.listSnapshots = ResponseListSnapshots.fromJSON(object.listSnapshots);\n        }\n        else {\n            message.listSnapshots = undefined;\n        }\n        if (object.offerSnapshot !== undefined && object.offerSnapshot !== null) {\n            message.offerSnapshot = ResponseOfferSnapshot.fromJSON(object.offerSnapshot);\n        }\n        else {\n            message.offerSnapshot = undefined;\n        }\n        if (object.loadSnapshotChunk !== undefined &&\n            object.loadSnapshotChunk !== null) {\n            message.loadSnapshotChunk = ResponseLoadSnapshotChunk.fromJSON(object.loadSnapshotChunk);\n        }\n        else {\n            message.loadSnapshotChunk = undefined;\n        }\n        if (object.applySnapshotChunk !== undefined &&\n            object.applySnapshotChunk !== null) {\n            message.applySnapshotChunk = ResponseApplySnapshotChunk.fromJSON(object.applySnapshotChunk);\n        }\n        else {\n            message.applySnapshotChunk = undefined;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.exception !== undefined &&\n            (obj.exception = message.exception\n                ? ResponseException.toJSON(message.exception)\n                : undefined);\n        message.echo !== undefined &&\n            (obj.echo = message.echo ? ResponseEcho.toJSON(message.echo) : undefined);\n        message.flush !== undefined &&\n            (obj.flush = message.flush\n                ? ResponseFlush.toJSON(message.flush)\n                : undefined);\n        message.info !== undefined &&\n            (obj.info = message.info ? ResponseInfo.toJSON(message.info) : undefined);\n        message.setOption !== undefined &&\n            (obj.setOption = message.setOption\n                ? ResponseSetOption.toJSON(message.setOption)\n                : undefined);\n        message.initChain !== undefined &&\n            (obj.initChain = message.initChain\n                ? ResponseInitChain.toJSON(message.initChain)\n                : undefined);\n        message.query !== undefined &&\n            (obj.query = message.query\n                ? ResponseQuery.toJSON(message.query)\n                : undefined);\n        message.beginBlock !== undefined &&\n            (obj.beginBlock = message.beginBlock\n                ? ResponseBeginBlock.toJSON(message.beginBlock)\n                : undefined);\n        message.checkTx !== undefined &&\n            (obj.checkTx = message.checkTx\n                ? ResponseCheckTx.toJSON(message.checkTx)\n                : undefined);\n        message.deliverTx !== undefined &&\n            (obj.deliverTx = message.deliverTx\n                ? ResponseDeliverTx.toJSON(message.deliverTx)\n                : undefined);\n        message.endBlock !== undefined &&\n            (obj.endBlock = message.endBlock\n                ? ResponseEndBlock.toJSON(message.endBlock)\n                : undefined);\n        message.commit !== undefined &&\n            (obj.commit = message.commit\n                ? ResponseCommit.toJSON(message.commit)\n                : undefined);\n        message.listSnapshots !== undefined &&\n            (obj.listSnapshots = message.listSnapshots\n                ? ResponseListSnapshots.toJSON(message.listSnapshots)\n                : undefined);\n        message.offerSnapshot !== undefined &&\n            (obj.offerSnapshot = message.offerSnapshot\n                ? ResponseOfferSnapshot.toJSON(message.offerSnapshot)\n                : undefined);\n        message.loadSnapshotChunk !== undefined &&\n            (obj.loadSnapshotChunk = message.loadSnapshotChunk\n                ? ResponseLoadSnapshotChunk.toJSON(message.loadSnapshotChunk)\n                : undefined);\n        message.applySnapshotChunk !== undefined &&\n            (obj.applySnapshotChunk = message.applySnapshotChunk\n                ? ResponseApplySnapshotChunk.toJSON(message.applySnapshotChunk)\n                : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponse };\n        if (object.exception !== undefined && object.exception !== null) {\n            message.exception = ResponseException.fromPartial(object.exception);\n        }\n        else {\n            message.exception = undefined;\n        }\n        if (object.echo !== undefined && object.echo !== null) {\n            message.echo = ResponseEcho.fromPartial(object.echo);\n        }\n        else {\n            message.echo = undefined;\n        }\n        if (object.flush !== undefined && object.flush !== null) {\n            message.flush = ResponseFlush.fromPartial(object.flush);\n        }\n        else {\n            message.flush = undefined;\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = ResponseInfo.fromPartial(object.info);\n        }\n        else {\n            message.info = undefined;\n        }\n        if (object.setOption !== undefined && object.setOption !== null) {\n            message.setOption = ResponseSetOption.fromPartial(object.setOption);\n        }\n        else {\n            message.setOption = undefined;\n        }\n        if (object.initChain !== undefined && object.initChain !== null) {\n            message.initChain = ResponseInitChain.fromPartial(object.initChain);\n        }\n        else {\n            message.initChain = undefined;\n        }\n        if (object.query !== undefined && object.query !== null) {\n            message.query = ResponseQuery.fromPartial(object.query);\n        }\n        else {\n            message.query = undefined;\n        }\n        if (object.beginBlock !== undefined && object.beginBlock !== null) {\n            message.beginBlock = ResponseBeginBlock.fromPartial(object.beginBlock);\n        }\n        else {\n            message.beginBlock = undefined;\n        }\n        if (object.checkTx !== undefined && object.checkTx !== null) {\n            message.checkTx = ResponseCheckTx.fromPartial(object.checkTx);\n        }\n        else {\n            message.checkTx = undefined;\n        }\n        if (object.deliverTx !== undefined && object.deliverTx !== null) {\n            message.deliverTx = ResponseDeliverTx.fromPartial(object.deliverTx);\n        }\n        else {\n            message.deliverTx = undefined;\n        }\n        if (object.endBlock !== undefined && object.endBlock !== null) {\n            message.endBlock = ResponseEndBlock.fromPartial(object.endBlock);\n        }\n        else {\n            message.endBlock = undefined;\n        }\n        if (object.commit !== undefined && object.commit !== null) {\n            message.commit = ResponseCommit.fromPartial(object.commit);\n        }\n        else {\n            message.commit = undefined;\n        }\n        if (object.listSnapshots !== undefined && object.listSnapshots !== null) {\n            message.listSnapshots = ResponseListSnapshots.fromPartial(object.listSnapshots);\n        }\n        else {\n            message.listSnapshots = undefined;\n        }\n        if (object.offerSnapshot !== undefined && object.offerSnapshot !== null) {\n            message.offerSnapshot = ResponseOfferSnapshot.fromPartial(object.offerSnapshot);\n        }\n        else {\n            message.offerSnapshot = undefined;\n        }\n        if (object.loadSnapshotChunk !== undefined &&\n            object.loadSnapshotChunk !== null) {\n            message.loadSnapshotChunk = ResponseLoadSnapshotChunk.fromPartial(object.loadSnapshotChunk);\n        }\n        else {\n            message.loadSnapshotChunk = undefined;\n        }\n        if (object.applySnapshotChunk !== undefined &&\n            object.applySnapshotChunk !== null) {\n            message.applySnapshotChunk = ResponseApplySnapshotChunk.fromPartial(object.applySnapshotChunk);\n        }\n        else {\n            message.applySnapshotChunk = undefined;\n        }\n        return message;\n    },\n};\nconst baseResponseException = { error: \"\" };\nexport const ResponseException = {\n    encode(message, writer = Writer.create()) {\n        if (message.error !== \"\") {\n            writer.uint32(10).string(message.error);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseException };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.error = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseException };\n        if (object.error !== undefined && object.error !== null) {\n            message.error = String(object.error);\n        }\n        else {\n            message.error = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.error !== undefined && (obj.error = message.error);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseException };\n        if (object.error !== undefined && object.error !== null) {\n            message.error = object.error;\n        }\n        else {\n            message.error = \"\";\n        }\n        return message;\n    },\n};\nconst baseResponseEcho = { message: \"\" };\nexport const ResponseEcho = {\n    encode(message, writer = Writer.create()) {\n        if (message.message !== \"\") {\n            writer.uint32(10).string(message.message);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseEcho };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.message = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseEcho };\n        if (object.message !== undefined && object.message !== null) {\n            message.message = String(object.message);\n        }\n        else {\n            message.message = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.message !== undefined && (obj.message = message.message);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseEcho };\n        if (object.message !== undefined && object.message !== null) {\n            message.message = object.message;\n        }\n        else {\n            message.message = \"\";\n        }\n        return message;\n    },\n};\nconst baseResponseFlush = {};\nexport const ResponseFlush = {\n    encode(_, writer = Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseFlush };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        const message = { ...baseResponseFlush };\n        return message;\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = { ...baseResponseFlush };\n        return message;\n    },\n};\nconst baseResponseInfo = {\n    data: \"\",\n    version: \"\",\n    appVersion: 0,\n    lastBlockHeight: 0,\n};\nexport const ResponseInfo = {\n    encode(message, writer = Writer.create()) {\n        if (message.data !== \"\") {\n            writer.uint32(10).string(message.data);\n        }\n        if (message.version !== \"\") {\n            writer.uint32(18).string(message.version);\n        }\n        if (message.appVersion !== 0) {\n            writer.uint32(24).uint64(message.appVersion);\n        }\n        if (message.lastBlockHeight !== 0) {\n            writer.uint32(32).int64(message.lastBlockHeight);\n        }\n        if (message.lastBlockAppHash.length !== 0) {\n            writer.uint32(42).bytes(message.lastBlockAppHash);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseInfo };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.data = reader.string();\n                    break;\n                case 2:\n                    message.version = reader.string();\n                    break;\n                case 3:\n                    message.appVersion = longToNumber(reader.uint64());\n                    break;\n                case 4:\n                    message.lastBlockHeight = longToNumber(reader.int64());\n                    break;\n                case 5:\n                    message.lastBlockAppHash = reader.bytes();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseInfo };\n        if (object.data !== undefined && object.data !== null) {\n            message.data = String(object.data);\n        }\n        else {\n            message.data = \"\";\n        }\n        if (object.version !== undefined && object.version !== null) {\n            message.version = String(object.version);\n        }\n        else {\n            message.version = \"\";\n        }\n        if (object.appVersion !== undefined && object.appVersion !== null) {\n            message.appVersion = Number(object.appVersion);\n        }\n        else {\n            message.appVersion = 0;\n        }\n        if (object.lastBlockHeight !== undefined &&\n            object.lastBlockHeight !== null) {\n            message.lastBlockHeight = Number(object.lastBlockHeight);\n        }\n        else {\n            message.lastBlockHeight = 0;\n        }\n        if (object.lastBlockAppHash !== undefined &&\n            object.lastBlockAppHash !== null) {\n            message.lastBlockAppHash = bytesFromBase64(object.lastBlockAppHash);\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.data !== undefined && (obj.data = message.data);\n        message.version !== undefined && (obj.version = message.version);\n        message.appVersion !== undefined && (obj.appVersion = message.appVersion);\n        message.lastBlockHeight !== undefined &&\n            (obj.lastBlockHeight = message.lastBlockHeight);\n        message.lastBlockAppHash !== undefined &&\n            (obj.lastBlockAppHash = base64FromBytes(message.lastBlockAppHash !== undefined\n                ? message.lastBlockAppHash\n                : new Uint8Array()));\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseInfo };\n        if (object.data !== undefined && object.data !== null) {\n            message.data = object.data;\n        }\n        else {\n            message.data = \"\";\n        }\n        if (object.version !== undefined && object.version !== null) {\n            message.version = object.version;\n        }\n        else {\n            message.version = \"\";\n        }\n        if (object.appVersion !== undefined && object.appVersion !== null) {\n            message.appVersion = object.appVersion;\n        }\n        else {\n            message.appVersion = 0;\n        }\n        if (object.lastBlockHeight !== undefined &&\n            object.lastBlockHeight !== null) {\n            message.lastBlockHeight = object.lastBlockHeight;\n        }\n        else {\n            message.lastBlockHeight = 0;\n        }\n        if (object.lastBlockAppHash !== undefined &&\n            object.lastBlockAppHash !== null) {\n            message.lastBlockAppHash = object.lastBlockAppHash;\n        }\n        else {\n            message.lastBlockAppHash = new Uint8Array();\n        }\n        return message;\n    },\n};\nconst baseResponseSetOption = { code: 0, log: \"\", info: \"\" };\nexport const ResponseSetOption = {\n    encode(message, writer = Writer.create()) {\n        if (message.code !== 0) {\n            writer.uint32(8).uint32(message.code);\n        }\n        if (message.log !== \"\") {\n            writer.uint32(26).string(message.log);\n        }\n        if (message.info !== \"\") {\n            writer.uint32(34).string(message.info);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseSetOption };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.code = reader.uint32();\n                    break;\n                case 3:\n                    message.log = reader.string();\n                    break;\n                case 4:\n                    message.info = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseSetOption };\n        if (object.code !== undefined && object.code !== null) {\n            message.code = Number(object.code);\n        }\n        else {\n            message.code = 0;\n        }\n        if (object.log !== undefined && object.log !== null) {\n            message.log = String(object.log);\n        }\n        else {\n            message.log = \"\";\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = String(object.info);\n        }\n        else {\n            message.info = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.code !== undefined && (obj.code = message.code);\n        message.log !== undefined && (obj.log = message.log);\n        message.info !== undefined && (obj.info = message.info);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseSetOption };\n        if (object.code !== undefined && object.code !== null) {\n            message.code = object.code;\n        }\n        else {\n            message.code = 0;\n        }\n        if (object.log !== undefined && object.log !== null) {\n            message.log = object.log;\n        }\n        else {\n            message.log = \"\";\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = object.info;\n        }\n        else {\n            message.info = \"\";\n        }\n        return message;\n    },\n};\nconst baseResponseInitChain = {};\nexport const ResponseInitChain = {\n    encode(message, writer = Writer.create()) {\n        if (message.consensusParams !== undefined) {\n            ConsensusParams.encode(message.consensusParams, writer.uint32(10).fork()).ldelim();\n        }\n        for (const v of message.validators) {\n            ValidatorUpdate.encode(v, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.appHash.length !== 0) {\n            writer.uint32(26).bytes(message.appHash);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseInitChain };\n        message.validators = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.consensusParams = ConsensusParams.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.validators.push(ValidatorUpdate.decode(reader, reader.uint32()));\n                    break;\n                case 3:\n                    message.appHash = reader.bytes();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseInitChain };\n        message.validators = [];\n        if (object.consensusParams !== undefined &&\n            object.consensusParams !== null) {\n            message.consensusParams = ConsensusParams.fromJSON(object.consensusParams);\n        }\n        else {\n            message.consensusParams = undefined;\n        }\n        if (object.validators !== undefined && object.validators !== null) {\n            for (const e of object.validators) {\n                message.validators.push(ValidatorUpdate.fromJSON(e));\n            }\n        }\n        if (object.appHash !== undefined && object.appHash !== null) {\n            message.appHash = bytesFromBase64(object.appHash);\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.consensusParams !== undefined &&\n            (obj.consensusParams = message.consensusParams\n                ? ConsensusParams.toJSON(message.consensusParams)\n                : undefined);\n        if (message.validators) {\n            obj.validators = message.validators.map((e) => e ? ValidatorUpdate.toJSON(e) : undefined);\n        }\n        else {\n            obj.validators = [];\n        }\n        message.appHash !== undefined &&\n            (obj.appHash = base64FromBytes(message.appHash !== undefined ? message.appHash : new Uint8Array()));\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseInitChain };\n        message.validators = [];\n        if (object.consensusParams !== undefined &&\n            object.consensusParams !== null) {\n            message.consensusParams = ConsensusParams.fromPartial(object.consensusParams);\n        }\n        else {\n            message.consensusParams = undefined;\n        }\n        if (object.validators !== undefined && object.validators !== null) {\n            for (const e of object.validators) {\n                message.validators.push(ValidatorUpdate.fromPartial(e));\n            }\n        }\n        if (object.appHash !== undefined && object.appHash !== null) {\n            message.appHash = object.appHash;\n        }\n        else {\n            message.appHash = new Uint8Array();\n        }\n        return message;\n    },\n};\nconst baseResponseQuery = {\n    code: 0,\n    log: \"\",\n    info: \"\",\n    index: 0,\n    height: 0,\n    codespace: \"\",\n};\nexport const ResponseQuery = {\n    encode(message, writer = Writer.create()) {\n        if (message.code !== 0) {\n            writer.uint32(8).uint32(message.code);\n        }\n        if (message.log !== \"\") {\n            writer.uint32(26).string(message.log);\n        }\n        if (message.info !== \"\") {\n            writer.uint32(34).string(message.info);\n        }\n        if (message.index !== 0) {\n            writer.uint32(40).int64(message.index);\n        }\n        if (message.key.length !== 0) {\n            writer.uint32(50).bytes(message.key);\n        }\n        if (message.value.length !== 0) {\n            writer.uint32(58).bytes(message.value);\n        }\n        if (message.proofOps !== undefined) {\n            ProofOps.encode(message.proofOps, writer.uint32(66).fork()).ldelim();\n        }\n        if (message.height !== 0) {\n            writer.uint32(72).int64(message.height);\n        }\n        if (message.codespace !== \"\") {\n            writer.uint32(82).string(message.codespace);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseQuery };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.code = reader.uint32();\n                    break;\n                case 3:\n                    message.log = reader.string();\n                    break;\n                case 4:\n                    message.info = reader.string();\n                    break;\n                case 5:\n                    message.index = longToNumber(reader.int64());\n                    break;\n                case 6:\n                    message.key = reader.bytes();\n                    break;\n                case 7:\n                    message.value = reader.bytes();\n                    break;\n                case 8:\n                    message.proofOps = ProofOps.decode(reader, reader.uint32());\n                    break;\n                case 9:\n                    message.height = longToNumber(reader.int64());\n                    break;\n                case 10:\n                    message.codespace = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseQuery };\n        if (object.code !== undefined && object.code !== null) {\n            message.code = Number(object.code);\n        }\n        else {\n            message.code = 0;\n        }\n        if (object.log !== undefined && object.log !== null) {\n            message.log = String(object.log);\n        }\n        else {\n            message.log = \"\";\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = String(object.info);\n        }\n        else {\n            message.info = \"\";\n        }\n        if (object.index !== undefined && object.index !== null) {\n            message.index = Number(object.index);\n        }\n        else {\n            message.index = 0;\n        }\n        if (object.key !== undefined && object.key !== null) {\n            message.key = bytesFromBase64(object.key);\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = bytesFromBase64(object.value);\n        }\n        if (object.proofOps !== undefined && object.proofOps !== null) {\n            message.proofOps = ProofOps.fromJSON(object.proofOps);\n        }\n        else {\n            message.proofOps = undefined;\n        }\n        if (object.height !== undefined && object.height !== null) {\n            message.height = Number(object.height);\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.codespace !== undefined && object.codespace !== null) {\n            message.codespace = String(object.codespace);\n        }\n        else {\n            message.codespace = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.code !== undefined && (obj.code = message.code);\n        message.log !== undefined && (obj.log = message.log);\n        message.info !== undefined && (obj.info = message.info);\n        message.index !== undefined && (obj.index = message.index);\n        message.key !== undefined &&\n            (obj.key = base64FromBytes(message.key !== undefined ? message.key : new Uint8Array()));\n        message.value !== undefined &&\n            (obj.value = base64FromBytes(message.value !== undefined ? message.value : new Uint8Array()));\n        message.proofOps !== undefined &&\n            (obj.proofOps = message.proofOps\n                ? ProofOps.toJSON(message.proofOps)\n                : undefined);\n        message.height !== undefined && (obj.height = message.height);\n        message.codespace !== undefined && (obj.codespace = message.codespace);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseQuery };\n        if (object.code !== undefined && object.code !== null) {\n            message.code = object.code;\n        }\n        else {\n            message.code = 0;\n        }\n        if (object.log !== undefined && object.log !== null) {\n            message.log = object.log;\n        }\n        else {\n            message.log = \"\";\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = object.info;\n        }\n        else {\n            message.info = \"\";\n        }\n        if (object.index !== undefined && object.index !== null) {\n            message.index = object.index;\n        }\n        else {\n            message.index = 0;\n        }\n        if (object.key !== undefined && object.key !== null) {\n            message.key = object.key;\n        }\n        else {\n            message.key = new Uint8Array();\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = object.value;\n        }\n        else {\n            message.value = new Uint8Array();\n        }\n        if (object.proofOps !== undefined && object.proofOps !== null) {\n            message.proofOps = ProofOps.fromPartial(object.proofOps);\n        }\n        else {\n            message.proofOps = undefined;\n        }\n        if (object.height !== undefined && object.height !== null) {\n            message.height = object.height;\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.codespace !== undefined && object.codespace !== null) {\n            message.codespace = object.codespace;\n        }\n        else {\n            message.codespace = \"\";\n        }\n        return message;\n    },\n};\nconst baseResponseBeginBlock = {};\nexport const ResponseBeginBlock = {\n    encode(message, writer = Writer.create()) {\n        for (const v of message.events) {\n            Event.encode(v, writer.uint32(10).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseBeginBlock };\n        message.events = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.events.push(Event.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseBeginBlock };\n        message.events = [];\n        if (object.events !== undefined && object.events !== null) {\n            for (const e of object.events) {\n                message.events.push(Event.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.events) {\n            obj.events = message.events.map((e) => (e ? Event.toJSON(e) : undefined));\n        }\n        else {\n            obj.events = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseBeginBlock };\n        message.events = [];\n        if (object.events !== undefined && object.events !== null) {\n            for (const e of object.events) {\n                message.events.push(Event.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst baseResponseCheckTx = {\n    code: 0,\n    log: \"\",\n    info: \"\",\n    gasWanted: 0,\n    gasUsed: 0,\n    codespace: \"\",\n};\nexport const ResponseCheckTx = {\n    encode(message, writer = Writer.create()) {\n        if (message.code !== 0) {\n            writer.uint32(8).uint32(message.code);\n        }\n        if (message.data.length !== 0) {\n            writer.uint32(18).bytes(message.data);\n        }\n        if (message.log !== \"\") {\n            writer.uint32(26).string(message.log);\n        }\n        if (message.info !== \"\") {\n            writer.uint32(34).string(message.info);\n        }\n        if (message.gasWanted !== 0) {\n            writer.uint32(40).int64(message.gasWanted);\n        }\n        if (message.gasUsed !== 0) {\n            writer.uint32(48).int64(message.gasUsed);\n        }\n        for (const v of message.events) {\n            Event.encode(v, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.codespace !== \"\") {\n            writer.uint32(66).string(message.codespace);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseCheckTx };\n        message.events = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.code = reader.uint32();\n                    break;\n                case 2:\n                    message.data = reader.bytes();\n                    break;\n                case 3:\n                    message.log = reader.string();\n                    break;\n                case 4:\n                    message.info = reader.string();\n                    break;\n                case 5:\n                    message.gasWanted = longToNumber(reader.int64());\n                    break;\n                case 6:\n                    message.gasUsed = longToNumber(reader.int64());\n                    break;\n                case 7:\n                    message.events.push(Event.decode(reader, reader.uint32()));\n                    break;\n                case 8:\n                    message.codespace = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseCheckTx };\n        message.events = [];\n        if (object.code !== undefined && object.code !== null) {\n            message.code = Number(object.code);\n        }\n        else {\n            message.code = 0;\n        }\n        if (object.data !== undefined && object.data !== null) {\n            message.data = bytesFromBase64(object.data);\n        }\n        if (object.log !== undefined && object.log !== null) {\n            message.log = String(object.log);\n        }\n        else {\n            message.log = \"\";\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = String(object.info);\n        }\n        else {\n            message.info = \"\";\n        }\n        if (object.gasWanted !== undefined && object.gasWanted !== null) {\n            message.gasWanted = Number(object.gasWanted);\n        }\n        else {\n            message.gasWanted = 0;\n        }\n        if (object.gasUsed !== undefined && object.gasUsed !== null) {\n            message.gasUsed = Number(object.gasUsed);\n        }\n        else {\n            message.gasUsed = 0;\n        }\n        if (object.events !== undefined && object.events !== null) {\n            for (const e of object.events) {\n                message.events.push(Event.fromJSON(e));\n            }\n        }\n        if (object.codespace !== undefined && object.codespace !== null) {\n            message.codespace = String(object.codespace);\n        }\n        else {\n            message.codespace = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.code !== undefined && (obj.code = message.code);\n        message.data !== undefined &&\n            (obj.data = base64FromBytes(message.data !== undefined ? message.data : new Uint8Array()));\n        message.log !== undefined && (obj.log = message.log);\n        message.info !== undefined && (obj.info = message.info);\n        message.gasWanted !== undefined && (obj.gasWanted = message.gasWanted);\n        message.gasUsed !== undefined && (obj.gasUsed = message.gasUsed);\n        if (message.events) {\n            obj.events = message.events.map((e) => (e ? Event.toJSON(e) : undefined));\n        }\n        else {\n            obj.events = [];\n        }\n        message.codespace !== undefined && (obj.codespace = message.codespace);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseCheckTx };\n        message.events = [];\n        if (object.code !== undefined && object.code !== null) {\n            message.code = object.code;\n        }\n        else {\n            message.code = 0;\n        }\n        if (object.data !== undefined && object.data !== null) {\n            message.data = object.data;\n        }\n        else {\n            message.data = new Uint8Array();\n        }\n        if (object.log !== undefined && object.log !== null) {\n            message.log = object.log;\n        }\n        else {\n            message.log = \"\";\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = object.info;\n        }\n        else {\n            message.info = \"\";\n        }\n        if (object.gasWanted !== undefined && object.gasWanted !== null) {\n            message.gasWanted = object.gasWanted;\n        }\n        else {\n            message.gasWanted = 0;\n        }\n        if (object.gasUsed !== undefined && object.gasUsed !== null) {\n            message.gasUsed = object.gasUsed;\n        }\n        else {\n            message.gasUsed = 0;\n        }\n        if (object.events !== undefined && object.events !== null) {\n            for (const e of object.events) {\n                message.events.push(Event.fromPartial(e));\n            }\n        }\n        if (object.codespace !== undefined && object.codespace !== null) {\n            message.codespace = object.codespace;\n        }\n        else {\n            message.codespace = \"\";\n        }\n        return message;\n    },\n};\nconst baseResponseDeliverTx = {\n    code: 0,\n    log: \"\",\n    info: \"\",\n    gasWanted: 0,\n    gasUsed: 0,\n    codespace: \"\",\n};\nexport const ResponseDeliverTx = {\n    encode(message, writer = Writer.create()) {\n        if (message.code !== 0) {\n            writer.uint32(8).uint32(message.code);\n        }\n        if (message.data.length !== 0) {\n            writer.uint32(18).bytes(message.data);\n        }\n        if (message.log !== \"\") {\n            writer.uint32(26).string(message.log);\n        }\n        if (message.info !== \"\") {\n            writer.uint32(34).string(message.info);\n        }\n        if (message.gasWanted !== 0) {\n            writer.uint32(40).int64(message.gasWanted);\n        }\n        if (message.gasUsed !== 0) {\n            writer.uint32(48).int64(message.gasUsed);\n        }\n        for (const v of message.events) {\n            Event.encode(v, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.codespace !== \"\") {\n            writer.uint32(66).string(message.codespace);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseDeliverTx };\n        message.events = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.code = reader.uint32();\n                    break;\n                case 2:\n                    message.data = reader.bytes();\n                    break;\n                case 3:\n                    message.log = reader.string();\n                    break;\n                case 4:\n                    message.info = reader.string();\n                    break;\n                case 5:\n                    message.gasWanted = longToNumber(reader.int64());\n                    break;\n                case 6:\n                    message.gasUsed = longToNumber(reader.int64());\n                    break;\n                case 7:\n                    message.events.push(Event.decode(reader, reader.uint32()));\n                    break;\n                case 8:\n                    message.codespace = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseDeliverTx };\n        message.events = [];\n        if (object.code !== undefined && object.code !== null) {\n            message.code = Number(object.code);\n        }\n        else {\n            message.code = 0;\n        }\n        if (object.data !== undefined && object.data !== null) {\n            message.data = bytesFromBase64(object.data);\n        }\n        if (object.log !== undefined && object.log !== null) {\n            message.log = String(object.log);\n        }\n        else {\n            message.log = \"\";\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = String(object.info);\n        }\n        else {\n            message.info = \"\";\n        }\n        if (object.gasWanted !== undefined && object.gasWanted !== null) {\n            message.gasWanted = Number(object.gasWanted);\n        }\n        else {\n            message.gasWanted = 0;\n        }\n        if (object.gasUsed !== undefined && object.gasUsed !== null) {\n            message.gasUsed = Number(object.gasUsed);\n        }\n        else {\n            message.gasUsed = 0;\n        }\n        if (object.events !== undefined && object.events !== null) {\n            for (const e of object.events) {\n                message.events.push(Event.fromJSON(e));\n            }\n        }\n        if (object.codespace !== undefined && object.codespace !== null) {\n            message.codespace = String(object.codespace);\n        }\n        else {\n            message.codespace = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.code !== undefined && (obj.code = message.code);\n        message.data !== undefined &&\n            (obj.data = base64FromBytes(message.data !== undefined ? message.data : new Uint8Array()));\n        message.log !== undefined && (obj.log = message.log);\n        message.info !== undefined && (obj.info = message.info);\n        message.gasWanted !== undefined && (obj.gasWanted = message.gasWanted);\n        message.gasUsed !== undefined && (obj.gasUsed = message.gasUsed);\n        if (message.events) {\n            obj.events = message.events.map((e) => (e ? Event.toJSON(e) : undefined));\n        }\n        else {\n            obj.events = [];\n        }\n        message.codespace !== undefined && (obj.codespace = message.codespace);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseDeliverTx };\n        message.events = [];\n        if (object.code !== undefined && object.code !== null) {\n            message.code = object.code;\n        }\n        else {\n            message.code = 0;\n        }\n        if (object.data !== undefined && object.data !== null) {\n            message.data = object.data;\n        }\n        else {\n            message.data = new Uint8Array();\n        }\n        if (object.log !== undefined && object.log !== null) {\n            message.log = object.log;\n        }\n        else {\n            message.log = \"\";\n        }\n        if (object.info !== undefined && object.info !== null) {\n            message.info = object.info;\n        }\n        else {\n            message.info = \"\";\n        }\n        if (object.gasWanted !== undefined && object.gasWanted !== null) {\n            message.gasWanted = object.gasWanted;\n        }\n        else {\n            message.gasWanted = 0;\n        }\n        if (object.gasUsed !== undefined && object.gasUsed !== null) {\n            message.gasUsed = object.gasUsed;\n        }\n        else {\n            message.gasUsed = 0;\n        }\n        if (object.events !== undefined && object.events !== null) {\n            for (const e of object.events) {\n                message.events.push(Event.fromPartial(e));\n            }\n        }\n        if (object.codespace !== undefined && object.codespace !== null) {\n            message.codespace = object.codespace;\n        }\n        else {\n            message.codespace = \"\";\n        }\n        return message;\n    },\n};\nconst baseResponseEndBlock = {};\nexport const ResponseEndBlock = {\n    encode(message, writer = Writer.create()) {\n        for (const v of message.validatorUpdates) {\n            ValidatorUpdate.encode(v, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.consensusParamUpdates !== undefined) {\n            ConsensusParams.encode(message.consensusParamUpdates, writer.uint32(18).fork()).ldelim();\n        }\n        for (const v of message.events) {\n            Event.encode(v, writer.uint32(26).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseEndBlock };\n        message.validatorUpdates = [];\n        message.events = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.validatorUpdates.push(ValidatorUpdate.decode(reader, reader.uint32()));\n                    break;\n                case 2:\n                    message.consensusParamUpdates = ConsensusParams.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.events.push(Event.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseEndBlock };\n        message.validatorUpdates = [];\n        message.events = [];\n        if (object.validatorUpdates !== undefined &&\n            object.validatorUpdates !== null) {\n            for (const e of object.validatorUpdates) {\n                message.validatorUpdates.push(ValidatorUpdate.fromJSON(e));\n            }\n        }\n        if (object.consensusParamUpdates !== undefined &&\n            object.consensusParamUpdates !== null) {\n            message.consensusParamUpdates = ConsensusParams.fromJSON(object.consensusParamUpdates);\n        }\n        else {\n            message.consensusParamUpdates = undefined;\n        }\n        if (object.events !== undefined && object.events !== null) {\n            for (const e of object.events) {\n                message.events.push(Event.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.validatorUpdates) {\n            obj.validatorUpdates = message.validatorUpdates.map((e) => e ? ValidatorUpdate.toJSON(e) : undefined);\n        }\n        else {\n            obj.validatorUpdates = [];\n        }\n        message.consensusParamUpdates !== undefined &&\n            (obj.consensusParamUpdates = message.consensusParamUpdates\n                ? ConsensusParams.toJSON(message.consensusParamUpdates)\n                : undefined);\n        if (message.events) {\n            obj.events = message.events.map((e) => (e ? Event.toJSON(e) : undefined));\n        }\n        else {\n            obj.events = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseEndBlock };\n        message.validatorUpdates = [];\n        message.events = [];\n        if (object.validatorUpdates !== undefined &&\n            object.validatorUpdates !== null) {\n            for (const e of object.validatorUpdates) {\n                message.validatorUpdates.push(ValidatorUpdate.fromPartial(e));\n            }\n        }\n        if (object.consensusParamUpdates !== undefined &&\n            object.consensusParamUpdates !== null) {\n            message.consensusParamUpdates = ConsensusParams.fromPartial(object.consensusParamUpdates);\n        }\n        else {\n            message.consensusParamUpdates = undefined;\n        }\n        if (object.events !== undefined && object.events !== null) {\n            for (const e of object.events) {\n                message.events.push(Event.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst baseResponseCommit = { retainHeight: 0 };\nexport const ResponseCommit = {\n    encode(message, writer = Writer.create()) {\n        if (message.data.length !== 0) {\n            writer.uint32(18).bytes(message.data);\n        }\n        if (message.retainHeight !== 0) {\n            writer.uint32(24).int64(message.retainHeight);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseCommit };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 2:\n                    message.data = reader.bytes();\n                    break;\n                case 3:\n                    message.retainHeight = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseCommit };\n        if (object.data !== undefined && object.data !== null) {\n            message.data = bytesFromBase64(object.data);\n        }\n        if (object.retainHeight !== undefined && object.retainHeight !== null) {\n            message.retainHeight = Number(object.retainHeight);\n        }\n        else {\n            message.retainHeight = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.data !== undefined &&\n            (obj.data = base64FromBytes(message.data !== undefined ? message.data : new Uint8Array()));\n        message.retainHeight !== undefined &&\n            (obj.retainHeight = message.retainHeight);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseCommit };\n        if (object.data !== undefined && object.data !== null) {\n            message.data = object.data;\n        }\n        else {\n            message.data = new Uint8Array();\n        }\n        if (object.retainHeight !== undefined && object.retainHeight !== null) {\n            message.retainHeight = object.retainHeight;\n        }\n        else {\n            message.retainHeight = 0;\n        }\n        return message;\n    },\n};\nconst baseResponseListSnapshots = {};\nexport const ResponseListSnapshots = {\n    encode(message, writer = Writer.create()) {\n        for (const v of message.snapshots) {\n            Snapshot.encode(v, writer.uint32(10).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseListSnapshots };\n        message.snapshots = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.snapshots.push(Snapshot.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseListSnapshots };\n        message.snapshots = [];\n        if (object.snapshots !== undefined && object.snapshots !== null) {\n            for (const e of object.snapshots) {\n                message.snapshots.push(Snapshot.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.snapshots) {\n            obj.snapshots = message.snapshots.map((e) => e ? Snapshot.toJSON(e) : undefined);\n        }\n        else {\n            obj.snapshots = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseListSnapshots };\n        message.snapshots = [];\n        if (object.snapshots !== undefined && object.snapshots !== null) {\n            for (const e of object.snapshots) {\n                message.snapshots.push(Snapshot.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst baseResponseOfferSnapshot = { result: 0 };\nexport const ResponseOfferSnapshot = {\n    encode(message, writer = Writer.create()) {\n        if (message.result !== 0) {\n            writer.uint32(8).int32(message.result);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseResponseOfferSnapshot };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.result = reader.int32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseResponseOfferSnapshot };\n        if (object.result !== undefined && object.result !== null) {\n            message.result = responseOfferSnapshot_ResultFromJSON(object.result);\n        }\n        else {\n            message.result = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.result !== undefined &&\n            (obj.result = responseOfferSnapshot_ResultToJSON(message.result));\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseResponseOfferSnapshot };\n        if (object.result !== undefined && object.result !== null) {\n            message.result = object.result;\n        }\n        else {\n            message.result = 0;\n        }\n        return message;\n    },\n};\nconst baseResponseLoadSnapshotChunk = {};\nexport const ResponseLoadSnapshotChunk = {\n    encode(message, writer = Writer.create()) {\n        if (message.chunk.length !== 0) {\n            writer.uint32(10).bytes(message.chunk);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = {\n            ...baseResponseLoadSnapshotChunk,\n        };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.chunk = reader.bytes();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = {\n            ...baseResponseLoadSnapshotChunk,\n        };\n        if (object.chunk !== undefined && object.chunk !== null) {\n            message.chunk = bytesFromBase64(object.chunk);\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.chunk !== undefined &&\n            (obj.chunk = base64FromBytes(message.chunk !== undefined ? message.chunk : new Uint8Array()));\n        return obj;\n    },\n    fromPartial(object) {\n        const message = {\n            ...baseResponseLoadSnapshotChunk,\n        };\n        if (object.chunk !== undefined && object.chunk !== null) {\n            message.chunk = object.chunk;\n        }\n        else {\n            message.chunk = new Uint8Array();\n        }\n        return message;\n    },\n};\nconst baseResponseApplySnapshotChunk = {\n    result: 0,\n    refetchChunks: 0,\n    rejectSenders: \"\",\n};\nexport const ResponseApplySnapshotChunk = {\n    encode(message, writer = Writer.create()) {\n        if (message.result !== 0) {\n            writer.uint32(8).int32(message.result);\n        }\n        writer.uint32(18).fork();\n        for (const v of message.refetchChunks) {\n            writer.uint32(v);\n        }\n        writer.ldelim();\n        for (const v of message.rejectSenders) {\n            writer.uint32(26).string(v);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = {\n            ...baseResponseApplySnapshotChunk,\n        };\n        message.refetchChunks = [];\n        message.rejectSenders = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.result = reader.int32();\n                    break;\n                case 2:\n                    if ((tag & 7) === 2) {\n                        const end2 = reader.uint32() + reader.pos;\n                        while (reader.pos < end2) {\n                            message.refetchChunks.push(reader.uint32());\n                        }\n                    }\n                    else {\n                        message.refetchChunks.push(reader.uint32());\n                    }\n                    break;\n                case 3:\n                    message.rejectSenders.push(reader.string());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = {\n            ...baseResponseApplySnapshotChunk,\n        };\n        message.refetchChunks = [];\n        message.rejectSenders = [];\n        if (object.result !== undefined && object.result !== null) {\n            message.result = responseApplySnapshotChunk_ResultFromJSON(object.result);\n        }\n        else {\n            message.result = 0;\n        }\n        if (object.refetchChunks !== undefined && object.refetchChunks !== null) {\n            for (const e of object.refetchChunks) {\n                message.refetchChunks.push(Number(e));\n            }\n        }\n        if (object.rejectSenders !== undefined && object.rejectSenders !== null) {\n            for (const e of object.rejectSenders) {\n                message.rejectSenders.push(String(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.result !== undefined &&\n            (obj.result = responseApplySnapshotChunk_ResultToJSON(message.result));\n        if (message.refetchChunks) {\n            obj.refetchChunks = message.refetchChunks.map((e) => e);\n        }\n        else {\n            obj.refetchChunks = [];\n        }\n        if (message.rejectSenders) {\n            obj.rejectSenders = message.rejectSenders.map((e) => e);\n        }\n        else {\n            obj.rejectSenders = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = {\n            ...baseResponseApplySnapshotChunk,\n        };\n        message.refetchChunks = [];\n        message.rejectSenders = [];\n        if (object.result !== undefined && object.result !== null) {\n            message.result = object.result;\n        }\n        else {\n            message.result = 0;\n        }\n        if (object.refetchChunks !== undefined && object.refetchChunks !== null) {\n            for (const e of object.refetchChunks) {\n                message.refetchChunks.push(e);\n            }\n        }\n        if (object.rejectSenders !== undefined && object.rejectSenders !== null) {\n            for (const e of object.rejectSenders) {\n                message.rejectSenders.push(e);\n            }\n        }\n        return message;\n    },\n};\nconst baseConsensusParams = {};\nexport const ConsensusParams = {\n    encode(message, writer = Writer.create()) {\n        if (message.block !== undefined) {\n            BlockParams.encode(message.block, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.evidence !== undefined) {\n            EvidenceParams.encode(message.evidence, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.validator !== undefined) {\n            ValidatorParams.encode(message.validator, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.version !== undefined) {\n            VersionParams.encode(message.version, writer.uint32(34).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseConsensusParams };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.block = BlockParams.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.evidence = EvidenceParams.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.validator = ValidatorParams.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.version = VersionParams.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseConsensusParams };\n        if (object.block !== undefined && object.block !== null) {\n            message.block = BlockParams.fromJSON(object.block);\n        }\n        else {\n            message.block = undefined;\n        }\n        if (object.evidence !== undefined && object.evidence !== null) {\n            message.evidence = EvidenceParams.fromJSON(object.evidence);\n        }\n        else {\n            message.evidence = undefined;\n        }\n        if (object.validator !== undefined && object.validator !== null) {\n            message.validator = ValidatorParams.fromJSON(object.validator);\n        }\n        else {\n            message.validator = undefined;\n        }\n        if (object.version !== undefined && object.version !== null) {\n            message.version = VersionParams.fromJSON(object.version);\n        }\n        else {\n            message.version = undefined;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.block !== undefined &&\n            (obj.block = message.block\n                ? BlockParams.toJSON(message.block)\n                : undefined);\n        message.evidence !== undefined &&\n            (obj.evidence = message.evidence\n                ? EvidenceParams.toJSON(message.evidence)\n                : undefined);\n        message.validator !== undefined &&\n            (obj.validator = message.validator\n                ? ValidatorParams.toJSON(message.validator)\n                : undefined);\n        message.version !== undefined &&\n            (obj.version = message.version\n                ? VersionParams.toJSON(message.version)\n                : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseConsensusParams };\n        if (object.block !== undefined && object.block !== null) {\n            message.block = BlockParams.fromPartial(object.block);\n        }\n        else {\n            message.block = undefined;\n        }\n        if (object.evidence !== undefined && object.evidence !== null) {\n            message.evidence = EvidenceParams.fromPartial(object.evidence);\n        }\n        else {\n            message.evidence = undefined;\n        }\n        if (object.validator !== undefined && object.validator !== null) {\n            message.validator = ValidatorParams.fromPartial(object.validator);\n        }\n        else {\n            message.validator = undefined;\n        }\n        if (object.version !== undefined && object.version !== null) {\n            message.version = VersionParams.fromPartial(object.version);\n        }\n        else {\n            message.version = undefined;\n        }\n        return message;\n    },\n};\nconst baseBlockParams = { maxBytes: 0, maxGas: 0 };\nexport const BlockParams = {\n    encode(message, writer = Writer.create()) {\n        if (message.maxBytes !== 0) {\n            writer.uint32(8).int64(message.maxBytes);\n        }\n        if (message.maxGas !== 0) {\n            writer.uint32(16).int64(message.maxGas);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseBlockParams };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.maxBytes = longToNumber(reader.int64());\n                    break;\n                case 2:\n                    message.maxGas = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseBlockParams };\n        if (object.maxBytes !== undefined && object.maxBytes !== null) {\n            message.maxBytes = Number(object.maxBytes);\n        }\n        else {\n            message.maxBytes = 0;\n        }\n        if (object.maxGas !== undefined && object.maxGas !== null) {\n            message.maxGas = Number(object.maxGas);\n        }\n        else {\n            message.maxGas = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.maxBytes !== undefined && (obj.maxBytes = message.maxBytes);\n        message.maxGas !== undefined && (obj.maxGas = message.maxGas);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseBlockParams };\n        if (object.maxBytes !== undefined && object.maxBytes !== null) {\n            message.maxBytes = object.maxBytes;\n        }\n        else {\n            message.maxBytes = 0;\n        }\n        if (object.maxGas !== undefined && object.maxGas !== null) {\n            message.maxGas = object.maxGas;\n        }\n        else {\n            message.maxGas = 0;\n        }\n        return message;\n    },\n};\nconst baseLastCommitInfo = { round: 0 };\nexport const LastCommitInfo = {\n    encode(message, writer = Writer.create()) {\n        if (message.round !== 0) {\n            writer.uint32(8).int32(message.round);\n        }\n        for (const v of message.votes) {\n            VoteInfo.encode(v, writer.uint32(18).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseLastCommitInfo };\n        message.votes = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.round = reader.int32();\n                    break;\n                case 2:\n                    message.votes.push(VoteInfo.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseLastCommitInfo };\n        message.votes = [];\n        if (object.round !== undefined && object.round !== null) {\n            message.round = Number(object.round);\n        }\n        else {\n            message.round = 0;\n        }\n        if (object.votes !== undefined && object.votes !== null) {\n            for (const e of object.votes) {\n                message.votes.push(VoteInfo.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.round !== undefined && (obj.round = message.round);\n        if (message.votes) {\n            obj.votes = message.votes.map((e) => e ? VoteInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.votes = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseLastCommitInfo };\n        message.votes = [];\n        if (object.round !== undefined && object.round !== null) {\n            message.round = object.round;\n        }\n        else {\n            message.round = 0;\n        }\n        if (object.votes !== undefined && object.votes !== null) {\n            for (const e of object.votes) {\n                message.votes.push(VoteInfo.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst baseEvent = { type: \"\" };\nexport const Event = {\n    encode(message, writer = Writer.create()) {\n        if (message.type !== \"\") {\n            writer.uint32(10).string(message.type);\n        }\n        for (const v of message.attributes) {\n            EventAttribute.encode(v, writer.uint32(18).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseEvent };\n        message.attributes = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.type = reader.string();\n                    break;\n                case 2:\n                    message.attributes.push(EventAttribute.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseEvent };\n        message.attributes = [];\n        if (object.type !== undefined && object.type !== null) {\n            message.type = String(object.type);\n        }\n        else {\n            message.type = \"\";\n        }\n        if (object.attributes !== undefined && object.attributes !== null) {\n            for (const e of object.attributes) {\n                message.attributes.push(EventAttribute.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.type !== undefined && (obj.type = message.type);\n        if (message.attributes) {\n            obj.attributes = message.attributes.map((e) => e ? EventAttribute.toJSON(e) : undefined);\n        }\n        else {\n            obj.attributes = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseEvent };\n        message.attributes = [];\n        if (object.type !== undefined && object.type !== null) {\n            message.type = object.type;\n        }\n        else {\n            message.type = \"\";\n        }\n        if (object.attributes !== undefined && object.attributes !== null) {\n            for (const e of object.attributes) {\n                message.attributes.push(EventAttribute.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst baseEventAttribute = { index: false };\nexport const EventAttribute = {\n    encode(message, writer = Writer.create()) {\n        if (message.key.length !== 0) {\n            writer.uint32(10).bytes(message.key);\n        }\n        if (message.value.length !== 0) {\n            writer.uint32(18).bytes(message.value);\n        }\n        if (message.index === true) {\n            writer.uint32(24).bool(message.index);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseEventAttribute };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.key = reader.bytes();\n                    break;\n                case 2:\n                    message.value = reader.bytes();\n                    break;\n                case 3:\n                    message.index = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseEventAttribute };\n        if (object.key !== undefined && object.key !== null) {\n            message.key = bytesFromBase64(object.key);\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = bytesFromBase64(object.value);\n        }\n        if (object.index !== undefined && object.index !== null) {\n            message.index = Boolean(object.index);\n        }\n        else {\n            message.index = false;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.key !== undefined &&\n            (obj.key = base64FromBytes(message.key !== undefined ? message.key : new Uint8Array()));\n        message.value !== undefined &&\n            (obj.value = base64FromBytes(message.value !== undefined ? message.value : new Uint8Array()));\n        message.index !== undefined && (obj.index = message.index);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseEventAttribute };\n        if (object.key !== undefined && object.key !== null) {\n            message.key = object.key;\n        }\n        else {\n            message.key = new Uint8Array();\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = object.value;\n        }\n        else {\n            message.value = new Uint8Array();\n        }\n        if (object.index !== undefined && object.index !== null) {\n            message.index = object.index;\n        }\n        else {\n            message.index = false;\n        }\n        return message;\n    },\n};\nconst baseTxResult = { height: 0, index: 0 };\nexport const TxResult = {\n    encode(message, writer = Writer.create()) {\n        if (message.height !== 0) {\n            writer.uint32(8).int64(message.height);\n        }\n        if (message.index !== 0) {\n            writer.uint32(16).uint32(message.index);\n        }\n        if (message.tx.length !== 0) {\n            writer.uint32(26).bytes(message.tx);\n        }\n        if (message.result !== undefined) {\n            ResponseDeliverTx.encode(message.result, writer.uint32(34).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseTxResult };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.height = longToNumber(reader.int64());\n                    break;\n                case 2:\n                    message.index = reader.uint32();\n                    break;\n                case 3:\n                    message.tx = reader.bytes();\n                    break;\n                case 4:\n                    message.result = ResponseDeliverTx.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseTxResult };\n        if (object.height !== undefined && object.height !== null) {\n            message.height = Number(object.height);\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.index !== undefined && object.index !== null) {\n            message.index = Number(object.index);\n        }\n        else {\n            message.index = 0;\n        }\n        if (object.tx !== undefined && object.tx !== null) {\n            message.tx = bytesFromBase64(object.tx);\n        }\n        if (object.result !== undefined && object.result !== null) {\n            message.result = ResponseDeliverTx.fromJSON(object.result);\n        }\n        else {\n            message.result = undefined;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.height !== undefined && (obj.height = message.height);\n        message.index !== undefined && (obj.index = message.index);\n        message.tx !== undefined &&\n            (obj.tx = base64FromBytes(message.tx !== undefined ? message.tx : new Uint8Array()));\n        message.result !== undefined &&\n            (obj.result = message.result\n                ? ResponseDeliverTx.toJSON(message.result)\n                : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseTxResult };\n        if (object.height !== undefined && object.height !== null) {\n            message.height = object.height;\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.index !== undefined && object.index !== null) {\n            message.index = object.index;\n        }\n        else {\n            message.index = 0;\n        }\n        if (object.tx !== undefined && object.tx !== null) {\n            message.tx = object.tx;\n        }\n        else {\n            message.tx = new Uint8Array();\n        }\n        if (object.result !== undefined && object.result !== null) {\n            message.result = ResponseDeliverTx.fromPartial(object.result);\n        }\n        else {\n            message.result = undefined;\n        }\n        return message;\n    },\n};\nconst baseValidator = { power: 0 };\nexport const Validator = {\n    encode(message, writer = Writer.create()) {\n        if (message.address.length !== 0) {\n            writer.uint32(10).bytes(message.address);\n        }\n        if (message.power !== 0) {\n            writer.uint32(24).int64(message.power);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseValidator };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.address = reader.bytes();\n                    break;\n                case 3:\n                    message.power = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseValidator };\n        if (object.address !== undefined && object.address !== null) {\n            message.address = bytesFromBase64(object.address);\n        }\n        if (object.power !== undefined && object.power !== null) {\n            message.power = Number(object.power);\n        }\n        else {\n            message.power = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.address !== undefined &&\n            (obj.address = base64FromBytes(message.address !== undefined ? message.address : new Uint8Array()));\n        message.power !== undefined && (obj.power = message.power);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseValidator };\n        if (object.address !== undefined && object.address !== null) {\n            message.address = object.address;\n        }\n        else {\n            message.address = new Uint8Array();\n        }\n        if (object.power !== undefined && object.power !== null) {\n            message.power = object.power;\n        }\n        else {\n            message.power = 0;\n        }\n        return message;\n    },\n};\nconst baseValidatorUpdate = { power: 0 };\nexport const ValidatorUpdate = {\n    encode(message, writer = Writer.create()) {\n        if (message.pubKey !== undefined) {\n            PublicKey.encode(message.pubKey, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.power !== 0) {\n            writer.uint32(16).int64(message.power);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseValidatorUpdate };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.pubKey = PublicKey.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.power = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseValidatorUpdate };\n        if (object.pubKey !== undefined && object.pubKey !== null) {\n            message.pubKey = PublicKey.fromJSON(object.pubKey);\n        }\n        else {\n            message.pubKey = undefined;\n        }\n        if (object.power !== undefined && object.power !== null) {\n            message.power = Number(object.power);\n        }\n        else {\n            message.power = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.pubKey !== undefined &&\n            (obj.pubKey = message.pubKey\n                ? PublicKey.toJSON(message.pubKey)\n                : undefined);\n        message.power !== undefined && (obj.power = message.power);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseValidatorUpdate };\n        if (object.pubKey !== undefined && object.pubKey !== null) {\n            message.pubKey = PublicKey.fromPartial(object.pubKey);\n        }\n        else {\n            message.pubKey = undefined;\n        }\n        if (object.power !== undefined && object.power !== null) {\n            message.power = object.power;\n        }\n        else {\n            message.power = 0;\n        }\n        return message;\n    },\n};\nconst baseVoteInfo = { signedLastBlock: false };\nexport const VoteInfo = {\n    encode(message, writer = Writer.create()) {\n        if (message.validator !== undefined) {\n            Validator.encode(message.validator, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.signedLastBlock === true) {\n            writer.uint32(16).bool(message.signedLastBlock);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseVoteInfo };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.validator = Validator.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.signedLastBlock = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseVoteInfo };\n        if (object.validator !== undefined && object.validator !== null) {\n            message.validator = Validator.fromJSON(object.validator);\n        }\n        else {\n            message.validator = undefined;\n        }\n        if (object.signedLastBlock !== undefined &&\n            object.signedLastBlock !== null) {\n            message.signedLastBlock = Boolean(object.signedLastBlock);\n        }\n        else {\n            message.signedLastBlock = false;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.validator !== undefined &&\n            (obj.validator = message.validator\n                ? Validator.toJSON(message.validator)\n                : undefined);\n        message.signedLastBlock !== undefined &&\n            (obj.signedLastBlock = message.signedLastBlock);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseVoteInfo };\n        if (object.validator !== undefined && object.validator !== null) {\n            message.validator = Validator.fromPartial(object.validator);\n        }\n        else {\n            message.validator = undefined;\n        }\n        if (object.signedLastBlock !== undefined &&\n            object.signedLastBlock !== null) {\n            message.signedLastBlock = object.signedLastBlock;\n        }\n        else {\n            message.signedLastBlock = false;\n        }\n        return message;\n    },\n};\nconst baseEvidence = { type: 0, height: 0, totalVotingPower: 0 };\nexport const Evidence = {\n    encode(message, writer = Writer.create()) {\n        if (message.type !== 0) {\n            writer.uint32(8).int32(message.type);\n        }\n        if (message.validator !== undefined) {\n            Validator.encode(message.validator, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.height !== 0) {\n            writer.uint32(24).int64(message.height);\n        }\n        if (message.time !== undefined) {\n            Timestamp.encode(toTimestamp(message.time), writer.uint32(34).fork()).ldelim();\n        }\n        if (message.totalVotingPower !== 0) {\n            writer.uint32(40).int64(message.totalVotingPower);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseEvidence };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.type = reader.int32();\n                    break;\n                case 2:\n                    message.validator = Validator.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.height = longToNumber(reader.int64());\n                    break;\n                case 4:\n                    message.time = fromTimestamp(Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 5:\n                    message.totalVotingPower = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseEvidence };\n        if (object.type !== undefined && object.type !== null) {\n            message.type = evidenceTypeFromJSON(object.type);\n        }\n        else {\n            message.type = 0;\n        }\n        if (object.validator !== undefined && object.validator !== null) {\n            message.validator = Validator.fromJSON(object.validator);\n        }\n        else {\n            message.validator = undefined;\n        }\n        if (object.height !== undefined && object.height !== null) {\n            message.height = Number(object.height);\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.time !== undefined && object.time !== null) {\n            message.time = fromJsonTimestamp(object.time);\n        }\n        else {\n            message.time = undefined;\n        }\n        if (object.totalVotingPower !== undefined &&\n            object.totalVotingPower !== null) {\n            message.totalVotingPower = Number(object.totalVotingPower);\n        }\n        else {\n            message.totalVotingPower = 0;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.type !== undefined && (obj.type = evidenceTypeToJSON(message.type));\n        message.validator !== undefined &&\n            (obj.validator = message.validator\n                ? Validator.toJSON(message.validator)\n                : undefined);\n        message.height !== undefined && (obj.height = message.height);\n        message.time !== undefined &&\n            (obj.time =\n                message.time !== undefined ? message.time.toISOString() : null);\n        message.totalVotingPower !== undefined &&\n            (obj.totalVotingPower = message.totalVotingPower);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseEvidence };\n        if (object.type !== undefined && object.type !== null) {\n            message.type = object.type;\n        }\n        else {\n            message.type = 0;\n        }\n        if (object.validator !== undefined && object.validator !== null) {\n            message.validator = Validator.fromPartial(object.validator);\n        }\n        else {\n            message.validator = undefined;\n        }\n        if (object.height !== undefined && object.height !== null) {\n            message.height = object.height;\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.time !== undefined && object.time !== null) {\n            message.time = object.time;\n        }\n        else {\n            message.time = undefined;\n        }\n        if (object.totalVotingPower !== undefined &&\n            object.totalVotingPower !== null) {\n            message.totalVotingPower = object.totalVotingPower;\n        }\n        else {\n            message.totalVotingPower = 0;\n        }\n        return message;\n    },\n};\nconst baseSnapshot = { height: 0, format: 0, chunks: 0 };\nexport const Snapshot = {\n    encode(message, writer = Writer.create()) {\n        if (message.height !== 0) {\n            writer.uint32(8).uint64(message.height);\n        }\n        if (message.format !== 0) {\n            writer.uint32(16).uint32(message.format);\n        }\n        if (message.chunks !== 0) {\n            writer.uint32(24).uint32(message.chunks);\n        }\n        if (message.hash.length !== 0) {\n            writer.uint32(34).bytes(message.hash);\n        }\n        if (message.metadata.length !== 0) {\n            writer.uint32(42).bytes(message.metadata);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseSnapshot };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.height = longToNumber(reader.uint64());\n                    break;\n                case 2:\n                    message.format = reader.uint32();\n                    break;\n                case 3:\n                    message.chunks = reader.uint32();\n                    break;\n                case 4:\n                    message.hash = reader.bytes();\n                    break;\n                case 5:\n                    message.metadata = reader.bytes();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseSnapshot };\n        if (object.height !== undefined && object.height !== null) {\n            message.height = Number(object.height);\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.format !== undefined && object.format !== null) {\n            message.format = Number(object.format);\n        }\n        else {\n            message.format = 0;\n        }\n        if (object.chunks !== undefined && object.chunks !== null) {\n            message.chunks = Number(object.chunks);\n        }\n        else {\n            message.chunks = 0;\n        }\n        if (object.hash !== undefined && object.hash !== null) {\n            message.hash = bytesFromBase64(object.hash);\n        }\n        if (object.metadata !== undefined && object.metadata !== null) {\n            message.metadata = bytesFromBase64(object.metadata);\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.height !== undefined && (obj.height = message.height);\n        message.format !== undefined && (obj.format = message.format);\n        message.chunks !== undefined && (obj.chunks = message.chunks);\n        message.hash !== undefined &&\n            (obj.hash = base64FromBytes(message.hash !== undefined ? message.hash : new Uint8Array()));\n        message.metadata !== undefined &&\n            (obj.metadata = base64FromBytes(message.metadata !== undefined ? message.metadata : new Uint8Array()));\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseSnapshot };\n        if (object.height !== undefined && object.height !== null) {\n            message.height = object.height;\n        }\n        else {\n            message.height = 0;\n        }\n        if (object.format !== undefined && object.format !== null) {\n            message.format = object.format;\n        }\n        else {\n            message.format = 0;\n        }\n        if (object.chunks !== undefined && object.chunks !== null) {\n            message.chunks = object.chunks;\n        }\n        else {\n            message.chunks = 0;\n        }\n        if (object.hash !== undefined && object.hash !== null) {\n            message.hash = object.hash;\n        }\n        else {\n            message.hash = new Uint8Array();\n        }\n        if (object.metadata !== undefined && object.metadata !== null) {\n            message.metadata = object.metadata;\n        }\n        else {\n            message.metadata = new Uint8Array();\n        }\n        return message;\n    },\n};\nexport class ABCIApplicationClientImpl {\n    constructor(rpc) {\n        this.rpc = rpc;\n    }\n    Echo(request) {\n        const data = RequestEcho.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"Echo\", data);\n        return promise.then((data) => ResponseEcho.decode(new Reader(data)));\n    }\n    Flush(request) {\n        const data = RequestFlush.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"Flush\", data);\n        return promise.then((data) => ResponseFlush.decode(new Reader(data)));\n    }\n    Info(request) {\n        const data = RequestInfo.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"Info\", data);\n        return promise.then((data) => ResponseInfo.decode(new Reader(data)));\n    }\n    SetOption(request) {\n        const data = RequestSetOption.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"SetOption\", data);\n        return promise.then((data) => ResponseSetOption.decode(new Reader(data)));\n    }\n    DeliverTx(request) {\n        const data = RequestDeliverTx.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"DeliverTx\", data);\n        return promise.then((data) => ResponseDeliverTx.decode(new Reader(data)));\n    }\n    CheckTx(request) {\n        const data = RequestCheckTx.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"CheckTx\", data);\n        return promise.then((data) => ResponseCheckTx.decode(new Reader(data)));\n    }\n    Query(request) {\n        const data = RequestQuery.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"Query\", data);\n        return promise.then((data) => ResponseQuery.decode(new Reader(data)));\n    }\n    Commit(request) {\n        const data = RequestCommit.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"Commit\", data);\n        return promise.then((data) => ResponseCommit.decode(new Reader(data)));\n    }\n    InitChain(request) {\n        const data = RequestInitChain.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"InitChain\", data);\n        return promise.then((data) => ResponseInitChain.decode(new Reader(data)));\n    }\n    BeginBlock(request) {\n        const data = RequestBeginBlock.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"BeginBlock\", data);\n        return promise.then((data) => ResponseBeginBlock.decode(new Reader(data)));\n    }\n    EndBlock(request) {\n        const data = RequestEndBlock.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"EndBlock\", data);\n        return promise.then((data) => ResponseEndBlock.decode(new Reader(data)));\n    }\n    ListSnapshots(request) {\n        const data = RequestListSnapshots.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"ListSnapshots\", data);\n        return promise.then((data) => ResponseListSnapshots.decode(new Reader(data)));\n    }\n    OfferSnapshot(request) {\n        const data = RequestOfferSnapshot.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"OfferSnapshot\", data);\n        return promise.then((data) => ResponseOfferSnapshot.decode(new Reader(data)));\n    }\n    LoadSnapshotChunk(request) {\n        const data = RequestLoadSnapshotChunk.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"LoadSnapshotChunk\", data);\n        return promise.then((data) => ResponseLoadSnapshotChunk.decode(new Reader(data)));\n    }\n    ApplySnapshotChunk(request) {\n        const data = RequestApplySnapshotChunk.encode(request).finish();\n        const promise = this.rpc.request(\"tendermint.abci.ABCIApplication\", \"ApplySnapshotChunk\", data);\n        return promise.then((data) => ResponseApplySnapshotChunk.decode(new Reader(data)));\n    }\n}\nvar globalThis = (() => {\n    if (typeof globalThis !== \"undefined\")\n        return globalThis;\n    if (typeof self !== \"undefined\")\n        return self;\n    if (typeof window !== \"undefined\")\n        return window;\n    if (typeof global !== \"undefined\")\n        return global;\n    throw \"Unable to locate global object\";\n})();\nconst atob = globalThis.atob ||\n    ((b64) => globalThis.Buffer.from(b64, \"base64\").toString(\"binary\"));\nfunction bytesFromBase64(b64) {\n    const bin = atob(b64);\n    const arr = new Uint8Array(bin.length);\n    for (let i = 0; i < bin.length; ++i) {\n        arr[i] = bin.charCodeAt(i);\n    }\n    return arr;\n}\nconst btoa = globalThis.btoa ||\n    ((bin) => globalThis.Buffer.from(bin, \"binary\").toString(\"base64\"));\nfunction base64FromBytes(arr) {\n    const bin = [];\n    for (let i = 0; i < arr.byteLength; ++i) {\n        bin.push(String.fromCharCode(arr[i]));\n    }\n    return btoa(bin.join(\"\"));\n}\nfunction toTimestamp(date) {\n    const seconds = date.getTime() / 1000;\n    const nanos = (date.getTime() % 1000) * 1000000;\n    return { seconds, nanos };\n}\nfunction fromTimestamp(t) {\n    let millis = t.seconds * 1000;\n    millis += t.nanos / 1000000;\n    return new Date(millis);\n}\nfunction fromJsonTimestamp(o) {\n    if (o instanceof Date) {\n        return o;\n    }\n    else if (typeof o === \"string\") {\n        return new Date(o);\n    }\n    else {\n        return fromTimestamp(Timestamp.fromJSON(o));\n    }\n}\nfunction longToNumber(long) {\n    if (long.gt(Number.MAX_SAFE_INTEGER)) {\n        throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n    }\n    return long.toNumber();\n}\nif (util.Long !== Long) {\n    util.Long = Long;\n    configure();\n}\n"]}]}