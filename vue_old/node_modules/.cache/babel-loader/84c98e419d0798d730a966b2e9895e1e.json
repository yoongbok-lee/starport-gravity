{"remainingRequest":"/home/ubuntu/starport-gravity/vue/node_modules/babel-loader/lib/index.js!/home/ubuntu/starport-gravity/vue/src/store/generated/cosmos/cosmos-sdk/cosmos.staking.v1beta1/module/types/cosmos/staking/v1beta1/staking.js","dependencies":[{"path":"/home/ubuntu/starport-gravity/vue/src/store/generated/cosmos/cosmos-sdk/cosmos.staking.v1beta1/module/types/cosmos/staking/v1beta1/staking.js","mtime":1620801165479},{"path":"/home/ubuntu/starport-gravity/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ubuntu/starport-gravity/vue/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvdWJ1bnR1L3N0YXJwb3J0LWdyYXZpdHkvdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL3VidW50dS9zdGFycG9ydC1ncmF2aXR5L3Z1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnVpbnQ4LWFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuY29weS13aXRoaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5ldmVyeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lmxhc3QtaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UtcmlnaHQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZXZlcnNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2V0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb21lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnN1YmFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tbG9jYWxlLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLnRvLWpzb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLnRvLWpzb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLnRvLWlzby1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIubWF4LXNhZmUtaW50ZWdlci5qcyI7CgovKiBlc2xpbnQtZGlzYWJsZSAqLwppbXBvcnQgeyBUaW1lc3RhbXAgfSBmcm9tICIuLi8uLi8uLi9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wIjsKaW1wb3J0ICogYXMgTG9uZyBmcm9tICJsb25nIjsKaW1wb3J0IHsgdXRpbCwgY29uZmlndXJlLCBXcml0ZXIsIFJlYWRlciB9IGZyb20gInByb3RvYnVmanMvbWluaW1hbCI7CmltcG9ydCB7IEhlYWRlciB9IGZyb20gIi4uLy4uLy4uL3RlbmRlcm1pbnQvdHlwZXMvdHlwZXMiOwppbXBvcnQgeyBBbnkgfSBmcm9tICIuLi8uLi8uLi9nb29nbGUvcHJvdG9idWYvYW55IjsKaW1wb3J0IHsgRHVyYXRpb24gfSBmcm9tICIuLi8uLi8uLi9nb29nbGUvcHJvdG9idWYvZHVyYXRpb24iOwppbXBvcnQgeyBDb2luIH0gZnJvbSAiLi4vLi4vLi4vY29zbW9zL2Jhc2UvdjFiZXRhMS9jb2luIjsKZXhwb3J0IHZhciBwcm90b2J1ZlBhY2thZ2UgPSAiY29zbW9zLnN0YWtpbmcudjFiZXRhMSI7Ci8qKiBCb25kU3RhdHVzIGlzIHRoZSBzdGF0dXMgb2YgYSB2YWxpZGF0b3IuICovCgpleHBvcnQgdmFyIEJvbmRTdGF0dXM7CgooZnVuY3Rpb24gKEJvbmRTdGF0dXMpIHsKICAvKiogQk9ORF9TVEFUVVNfVU5TUEVDSUZJRUQgLSBVTlNQRUNJRklFRCBkZWZpbmVzIGFuIGludmFsaWQgdmFsaWRhdG9yIHN0YXR1cy4gKi8KICBCb25kU3RhdHVzW0JvbmRTdGF0dXNbIkJPTkRfU1RBVFVTX1VOU1BFQ0lGSUVEIl0gPSAwXSA9ICJCT05EX1NUQVRVU19VTlNQRUNJRklFRCI7CiAgLyoqIEJPTkRfU1RBVFVTX1VOQk9OREVEIC0gVU5CT05ERUQgZGVmaW5lcyBhIHZhbGlkYXRvciB0aGF0IGlzIG5vdCBib25kZWQuICovCgogIEJvbmRTdGF0dXNbQm9uZFN0YXR1c1siQk9ORF9TVEFUVVNfVU5CT05ERUQiXSA9IDFdID0gIkJPTkRfU1RBVFVTX1VOQk9OREVEIjsKICAvKiogQk9ORF9TVEFUVVNfVU5CT05ESU5HIC0gVU5CT05ESU5HIGRlZmluZXMgYSB2YWxpZGF0b3IgdGhhdCBpcyB1bmJvbmRpbmcuICovCgogIEJvbmRTdGF0dXNbQm9uZFN0YXR1c1siQk9ORF9TVEFUVVNfVU5CT05ESU5HIl0gPSAyXSA9ICJCT05EX1NUQVRVU19VTkJPTkRJTkciOwogIC8qKiBCT05EX1NUQVRVU19CT05ERUQgLSBCT05ERUQgZGVmaW5lcyBhIHZhbGlkYXRvciB0aGF0IGlzIGJvbmRlZC4gKi8KCiAgQm9uZFN0YXR1c1tCb25kU3RhdHVzWyJCT05EX1NUQVRVU19CT05ERUQiXSA9IDNdID0gIkJPTkRfU1RBVFVTX0JPTkRFRCI7CiAgQm9uZFN0YXR1c1tCb25kU3RhdHVzWyJVTlJFQ09HTklaRUQiXSA9IC0xXSA9ICJVTlJFQ09HTklaRUQiOwp9KShCb25kU3RhdHVzIHx8IChCb25kU3RhdHVzID0ge30pKTsKCmV4cG9ydCBmdW5jdGlvbiBib25kU3RhdHVzRnJvbUpTT04ob2JqZWN0KSB7CiAgc3dpdGNoIChvYmplY3QpIHsKICAgIGNhc2UgMDoKICAgIGNhc2UgIkJPTkRfU1RBVFVTX1VOU1BFQ0lGSUVEIjoKICAgICAgcmV0dXJuIEJvbmRTdGF0dXMuQk9ORF9TVEFUVVNfVU5TUEVDSUZJRUQ7CgogICAgY2FzZSAxOgogICAgY2FzZSAiQk9ORF9TVEFUVVNfVU5CT05ERUQiOgogICAgICByZXR1cm4gQm9uZFN0YXR1cy5CT05EX1NUQVRVU19VTkJPTkRFRDsKCiAgICBjYXNlIDI6CiAgICBjYXNlICJCT05EX1NUQVRVU19VTkJPTkRJTkciOgogICAgICByZXR1cm4gQm9uZFN0YXR1cy5CT05EX1NUQVRVU19VTkJPTkRJTkc7CgogICAgY2FzZSAzOgogICAgY2FzZSAiQk9ORF9TVEFUVVNfQk9OREVEIjoKICAgICAgcmV0dXJuIEJvbmRTdGF0dXMuQk9ORF9TVEFUVVNfQk9OREVEOwoKICAgIGNhc2UgLTE6CiAgICBjYXNlICJVTlJFQ09HTklaRUQiOgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIEJvbmRTdGF0dXMuVU5SRUNPR05JWkVEOwogIH0KfQpleHBvcnQgZnVuY3Rpb24gYm9uZFN0YXR1c1RvSlNPTihvYmplY3QpIHsKICBzd2l0Y2ggKG9iamVjdCkgewogICAgY2FzZSBCb25kU3RhdHVzLkJPTkRfU1RBVFVTX1VOU1BFQ0lGSUVEOgogICAgICByZXR1cm4gIkJPTkRfU1RBVFVTX1VOU1BFQ0lGSUVEIjsKCiAgICBjYXNlIEJvbmRTdGF0dXMuQk9ORF9TVEFUVVNfVU5CT05ERUQ6CiAgICAgIHJldHVybiAiQk9ORF9TVEFUVVNfVU5CT05ERUQiOwoKICAgIGNhc2UgQm9uZFN0YXR1cy5CT05EX1NUQVRVU19VTkJPTkRJTkc6CiAgICAgIHJldHVybiAiQk9ORF9TVEFUVVNfVU5CT05ESU5HIjsKCiAgICBjYXNlIEJvbmRTdGF0dXMuQk9ORF9TVEFUVVNfQk9OREVEOgogICAgICByZXR1cm4gIkJPTkRfU1RBVFVTX0JPTkRFRCI7CgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuICJVTktOT1dOIjsKICB9Cn0KdmFyIGJhc2VIaXN0b3JpY2FsSW5mbyA9IHt9OwpleHBvcnQgdmFyIEhpc3RvcmljYWxJbmZvID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5oZWFkZXIgIT09IHVuZGVmaW5lZCkgewogICAgICBIZWFkZXIuZW5jb2RlKG1lc3NhZ2UuaGVhZGVyLCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihtZXNzYWdlLnZhbHNldCksCiAgICAgICAgX3N0ZXA7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgdiA9IF9zdGVwLnZhbHVlOwogICAgICAgIFZhbGlkYXRvci5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXRlcmF0b3IuZigpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZUhpc3RvcmljYWxJbmZvKTsKCiAgICBtZXNzYWdlLnZhbHNldCA9IFtdOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UuaGVhZGVyID0gSGVhZGVyLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS52YWxzZXQucHVzaChWYWxpZGF0b3IuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VIaXN0b3JpY2FsSW5mbyk7CgogICAgbWVzc2FnZS52YWxzZXQgPSBbXTsKCiAgICBpZiAob2JqZWN0LmhlYWRlciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5oZWFkZXIgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5oZWFkZXIgPSBIZWFkZXIuZnJvbUpTT04ob2JqZWN0LmhlYWRlcik7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmhlYWRlciA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZhbHNldCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWxzZXQgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3QudmFsc2V0KSwKICAgICAgICAgIF9zdGVwMjsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgbWVzc2FnZS52YWxzZXQucHVzaChWYWxpZGF0b3IuZnJvbUpTT04oZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UuaGVhZGVyICE9PSB1bmRlZmluZWQgJiYgKG9iai5oZWFkZXIgPSBtZXNzYWdlLmhlYWRlciA/IEhlYWRlci50b0pTT04obWVzc2FnZS5oZWFkZXIpIDogdW5kZWZpbmVkKTsKCiAgICBpZiAobWVzc2FnZS52YWxzZXQpIHsKICAgICAgb2JqLnZhbHNldCA9IG1lc3NhZ2UudmFsc2V0Lm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlID8gVmFsaWRhdG9yLnRvSlNPTihlKSA6IHVuZGVmaW5lZDsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBvYmoudmFsc2V0ID0gW107CiAgICB9CgogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZUhpc3RvcmljYWxJbmZvKTsKCiAgICBtZXNzYWdlLnZhbHNldCA9IFtdOwoKICAgIGlmIChvYmplY3QuaGVhZGVyICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmhlYWRlciAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmhlYWRlciA9IEhlYWRlci5mcm9tUGFydGlhbChvYmplY3QuaGVhZGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaGVhZGVyID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QudmFsc2V0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZhbHNldCAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC52YWxzZXQpLAogICAgICAgICAgX3N0ZXAzOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGUgPSBfc3RlcDMudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLnZhbHNldC5wdXNoKFZhbGlkYXRvci5mcm9tUGFydGlhbChlKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IzLmYoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VDb21taXNzaW9uUmF0ZXMgPSB7CiAgcmF0ZTogIiIsCiAgbWF4UmF0ZTogIiIsCiAgbWF4Q2hhbmdlUmF0ZTogIiIKfTsKZXhwb3J0IHZhciBDb21taXNzaW9uUmF0ZXMgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLnJhdGUgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLnJhdGUpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLm1heFJhdGUgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLm1heFJhdGUpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLm1heENoYW5nZVJhdGUgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLm1heENoYW5nZVJhdGUpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZUNvbW1pc3Npb25SYXRlcyk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5yYXRlID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIG1lc3NhZ2UubWF4UmF0ZSA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBtZXNzYWdlLm1heENoYW5nZVJhdGUgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VDb21taXNzaW9uUmF0ZXMpOwoKICAgIGlmIChvYmplY3QucmF0ZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5yYXRlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucmF0ZSA9IFN0cmluZyhvYmplY3QucmF0ZSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnJhdGUgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0Lm1heFJhdGUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubWF4UmF0ZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLm1heFJhdGUgPSBTdHJpbmcob2JqZWN0Lm1heFJhdGUpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5tYXhSYXRlID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5tYXhDaGFuZ2VSYXRlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm1heENoYW5nZVJhdGUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5tYXhDaGFuZ2VSYXRlID0gU3RyaW5nKG9iamVjdC5tYXhDaGFuZ2VSYXRlKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubWF4Q2hhbmdlUmF0ZSA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5yYXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai5yYXRlID0gbWVzc2FnZS5yYXRlKTsKICAgIG1lc3NhZ2UubWF4UmF0ZSAhPT0gdW5kZWZpbmVkICYmIChvYmoubWF4UmF0ZSA9IG1lc3NhZ2UubWF4UmF0ZSk7CiAgICBtZXNzYWdlLm1heENoYW5nZVJhdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1heENoYW5nZVJhdGUgPSBtZXNzYWdlLm1heENoYW5nZVJhdGUpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZUNvbW1pc3Npb25SYXRlcyk7CgogICAgaWYgKG9iamVjdC5yYXRlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnJhdGUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5yYXRlID0gb2JqZWN0LnJhdGU7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnJhdGUgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0Lm1heFJhdGUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubWF4UmF0ZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLm1heFJhdGUgPSBvYmplY3QubWF4UmF0ZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubWF4UmF0ZSA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QubWF4Q2hhbmdlUmF0ZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5tYXhDaGFuZ2VSYXRlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubWF4Q2hhbmdlUmF0ZSA9IG9iamVjdC5tYXhDaGFuZ2VSYXRlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5tYXhDaGFuZ2VSYXRlID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZUNvbW1pc3Npb24gPSB7fTsKZXhwb3J0IHZhciBDb21taXNzaW9uID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5jb21taXNzaW9uUmF0ZXMgIT09IHVuZGVmaW5lZCkgewogICAgICBDb21taXNzaW9uUmF0ZXMuZW5jb2RlKG1lc3NhZ2UuY29tbWlzc2lvblJhdGVzLCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLnVwZGF0ZVRpbWUgIT09IHVuZGVmaW5lZCkgewogICAgICBUaW1lc3RhbXAuZW5jb2RlKHRvVGltZXN0YW1wKG1lc3NhZ2UudXBkYXRlVGltZSksIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlQ29tbWlzc2lvbik7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5jb21taXNzaW9uUmF0ZXMgPSBDb21taXNzaW9uUmF0ZXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLnVwZGF0ZVRpbWUgPSBmcm9tVGltZXN0YW1wKFRpbWVzdGFtcC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZUNvbW1pc3Npb24pOwoKICAgIGlmIChvYmplY3QuY29tbWlzc2lvblJhdGVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNvbW1pc3Npb25SYXRlcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNvbW1pc3Npb25SYXRlcyA9IENvbW1pc3Npb25SYXRlcy5mcm9tSlNPTihvYmplY3QuY29tbWlzc2lvblJhdGVzKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29tbWlzc2lvblJhdGVzID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QudXBkYXRlVGltZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC51cGRhdGVUaW1lICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudXBkYXRlVGltZSA9IGZyb21Kc29uVGltZXN0YW1wKG9iamVjdC51cGRhdGVUaW1lKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudXBkYXRlVGltZSA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UuY29tbWlzc2lvblJhdGVzICE9PSB1bmRlZmluZWQgJiYgKG9iai5jb21taXNzaW9uUmF0ZXMgPSBtZXNzYWdlLmNvbW1pc3Npb25SYXRlcyA/IENvbW1pc3Npb25SYXRlcy50b0pTT04obWVzc2FnZS5jb21taXNzaW9uUmF0ZXMpIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UudXBkYXRlVGltZSAhPT0gdW5kZWZpbmVkICYmIChvYmoudXBkYXRlVGltZSA9IG1lc3NhZ2UudXBkYXRlVGltZSAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS51cGRhdGVUaW1lLnRvSVNPU3RyaW5nKCkgOiBudWxsKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VDb21taXNzaW9uKTsKCiAgICBpZiAob2JqZWN0LmNvbW1pc3Npb25SYXRlcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb21taXNzaW9uUmF0ZXMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb21taXNzaW9uUmF0ZXMgPSBDb21taXNzaW9uUmF0ZXMuZnJvbVBhcnRpYWwob2JqZWN0LmNvbW1pc3Npb25SYXRlcyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNvbW1pc3Npb25SYXRlcyA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnVwZGF0ZVRpbWUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudXBkYXRlVGltZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnVwZGF0ZVRpbWUgPSBvYmplY3QudXBkYXRlVGltZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudXBkYXRlVGltZSA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlRGVzY3JpcHRpb24gPSB7CiAgbW9uaWtlcjogIiIsCiAgaWRlbnRpdHk6ICIiLAogIHdlYnNpdGU6ICIiLAogIHNlY3VyaXR5Q29udGFjdDogIiIsCiAgZGV0YWlsczogIiIKfTsKZXhwb3J0IHZhciBEZXNjcmlwdGlvbiA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UubW9uaWtlciAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UubW9uaWtlcik7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuaWRlbnRpdHkgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLmlkZW50aXR5KTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS53ZWJzaXRlICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS53ZWJzaXRlKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5zZWN1cml0eUNvbnRhY3QgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMzQpLnN0cmluZyhtZXNzYWdlLnNlY3VyaXR5Q29udGFjdCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuZGV0YWlscyAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMig0Mikuc3RyaW5nKG1lc3NhZ2UuZGV0YWlscyk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlRGVzY3JpcHRpb24pOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UubW9uaWtlciA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLmlkZW50aXR5ID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2Uud2Vic2l0ZSA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBtZXNzYWdlLnNlY3VyaXR5Q29udGFjdCA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDU6CiAgICAgICAgICBtZXNzYWdlLmRldGFpbHMgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VEZXNjcmlwdGlvbik7CgogICAgaWYgKG9iamVjdC5tb25pa2VyICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm1vbmlrZXIgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5tb25pa2VyID0gU3RyaW5nKG9iamVjdC5tb25pa2VyKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubW9uaWtlciA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuaWRlbnRpdHkgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaWRlbnRpdHkgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pZGVudGl0eSA9IFN0cmluZyhvYmplY3QuaWRlbnRpdHkpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5pZGVudGl0eSA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3Qud2Vic2l0ZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC53ZWJzaXRlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2Uud2Vic2l0ZSA9IFN0cmluZyhvYmplY3Qud2Vic2l0ZSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLndlYnNpdGUgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LnNlY3VyaXR5Q29udGFjdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zZWN1cml0eUNvbnRhY3QgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5zZWN1cml0eUNvbnRhY3QgPSBTdHJpbmcob2JqZWN0LnNlY3VyaXR5Q29udGFjdCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnNlY3VyaXR5Q29udGFjdCA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuZGV0YWlscyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kZXRhaWxzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGV0YWlscyA9IFN0cmluZyhvYmplY3QuZGV0YWlscyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmRldGFpbHMgPSAiIjsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UubW9uaWtlciAhPT0gdW5kZWZpbmVkICYmIChvYmoubW9uaWtlciA9IG1lc3NhZ2UubW9uaWtlcik7CiAgICBtZXNzYWdlLmlkZW50aXR5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5pZGVudGl0eSA9IG1lc3NhZ2UuaWRlbnRpdHkpOwogICAgbWVzc2FnZS53ZWJzaXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai53ZWJzaXRlID0gbWVzc2FnZS53ZWJzaXRlKTsKICAgIG1lc3NhZ2Uuc2VjdXJpdHlDb250YWN0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5zZWN1cml0eUNvbnRhY3QgPSBtZXNzYWdlLnNlY3VyaXR5Q29udGFjdCk7CiAgICBtZXNzYWdlLmRldGFpbHMgIT09IHVuZGVmaW5lZCAmJiAob2JqLmRldGFpbHMgPSBtZXNzYWdlLmRldGFpbHMpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZURlc2NyaXB0aW9uKTsKCiAgICBpZiAob2JqZWN0Lm1vbmlrZXIgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubW9uaWtlciAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLm1vbmlrZXIgPSBvYmplY3QubW9uaWtlcjsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubW9uaWtlciA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuaWRlbnRpdHkgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaWRlbnRpdHkgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pZGVudGl0eSA9IG9iamVjdC5pZGVudGl0eTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaWRlbnRpdHkgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LndlYnNpdGUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Qud2Vic2l0ZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLndlYnNpdGUgPSBvYmplY3Qud2Vic2l0ZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2Uud2Vic2l0ZSA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3Quc2VjdXJpdHlDb250YWN0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNlY3VyaXR5Q29udGFjdCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnNlY3VyaXR5Q29udGFjdCA9IG9iamVjdC5zZWN1cml0eUNvbnRhY3Q7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnNlY3VyaXR5Q29udGFjdCA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuZGV0YWlscyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kZXRhaWxzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGV0YWlscyA9IG9iamVjdC5kZXRhaWxzOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5kZXRhaWxzID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVZhbGlkYXRvciA9IHsKICBvcGVyYXRvckFkZHJlc3M6ICIiLAogIGphaWxlZDogZmFsc2UsCiAgc3RhdHVzOiAwLAogIHRva2VuczogIiIsCiAgZGVsZWdhdG9yU2hhcmVzOiAiIiwKICB1bmJvbmRpbmdIZWlnaHQ6IDAsCiAgbWluU2VsZkRlbGVnYXRpb246ICIiCn07CmV4cG9ydCB2YXIgVmFsaWRhdG9yID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5vcGVyYXRvckFkZHJlc3MgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLm9wZXJhdG9yQWRkcmVzcyk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuY29uc2Vuc3VzUHVia2V5ICE9PSB1bmRlZmluZWQpIHsKICAgICAgQW55LmVuY29kZShtZXNzYWdlLmNvbnNlbnN1c1B1YmtleSwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5qYWlsZWQgPT09IHRydWUpIHsKICAgICAgd3JpdGVyLnVpbnQzMigyNCkuYm9vbChtZXNzYWdlLmphaWxlZCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2Uuc3RhdHVzICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMzIpLmludDMyKG1lc3NhZ2Uuc3RhdHVzKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS50b2tlbnMgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoNDIpLnN0cmluZyhtZXNzYWdlLnRva2Vucyk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuZGVsZWdhdG9yU2hhcmVzICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDUwKS5zdHJpbmcobWVzc2FnZS5kZWxlZ2F0b3JTaGFyZXMpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHsKICAgICAgRGVzY3JpcHRpb24uZW5jb2RlKG1lc3NhZ2UuZGVzY3JpcHRpb24sIHdyaXRlci51aW50MzIoNTgpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UudW5ib25kaW5nSGVpZ2h0ICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoNjQpLmludDY0KG1lc3NhZ2UudW5ib25kaW5nSGVpZ2h0KTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS51bmJvbmRpbmdUaW1lICE9PSB1bmRlZmluZWQpIHsKICAgICAgVGltZXN0YW1wLmVuY29kZSh0b1RpbWVzdGFtcChtZXNzYWdlLnVuYm9uZGluZ1RpbWUpLCB3cml0ZXIudWludDMyKDc0KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmNvbW1pc3Npb24gIT09IHVuZGVmaW5lZCkgewogICAgICBDb21taXNzaW9uLmVuY29kZShtZXNzYWdlLmNvbW1pc3Npb24sIHdyaXRlci51aW50MzIoODIpLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UubWluU2VsZkRlbGVnYXRpb24gIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoOTApLnN0cmluZyhtZXNzYWdlLm1pblNlbGZEZWxlZ2F0aW9uKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VWYWxpZGF0b3IpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2Uub3BlcmF0b3JBZGRyZXNzID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIG1lc3NhZ2UuY29uc2Vuc3VzUHVia2V5ID0gQW55LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5qYWlsZWQgPSByZWFkZXIuYm9vbCgpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIG1lc3NhZ2Uuc3RhdHVzID0gcmVhZGVyLmludDMyKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA1OgogICAgICAgICAgbWVzc2FnZS50b2tlbnMgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA2OgogICAgICAgICAgbWVzc2FnZS5kZWxlZ2F0b3JTaGFyZXMgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgbWVzc2FnZS5kZXNjcmlwdGlvbiA9IERlc2NyaXB0aW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA4OgogICAgICAgICAgbWVzc2FnZS51bmJvbmRpbmdIZWlnaHQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgOToKICAgICAgICAgIG1lc3NhZ2UudW5ib25kaW5nVGltZSA9IGZyb21UaW1lc3RhbXAoVGltZXN0YW1wLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBtZXNzYWdlLmNvbW1pc3Npb24gPSBDb21taXNzaW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAxMToKICAgICAgICAgIG1lc3NhZ2UubWluU2VsZkRlbGVnYXRpb24gPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VWYWxpZGF0b3IpOwoKICAgIGlmIChvYmplY3Qub3BlcmF0b3JBZGRyZXNzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm9wZXJhdG9yQWRkcmVzcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLm9wZXJhdG9yQWRkcmVzcyA9IFN0cmluZyhvYmplY3Qub3BlcmF0b3JBZGRyZXNzKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2Uub3BlcmF0b3JBZGRyZXNzID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5jb25zZW5zdXNQdWJrZXkgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29uc2Vuc3VzUHVia2V5ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29uc2Vuc3VzUHVia2V5ID0gQW55LmZyb21KU09OKG9iamVjdC5jb25zZW5zdXNQdWJrZXkpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb25zZW5zdXNQdWJrZXkgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5qYWlsZWQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuamFpbGVkICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuamFpbGVkID0gQm9vbGVhbihvYmplY3QuamFpbGVkKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuamFpbGVkID0gZmFsc2U7CiAgICB9CgogICAgaWYgKG9iamVjdC5zdGF0dXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc3RhdHVzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2Uuc3RhdHVzID0gYm9uZFN0YXR1c0Zyb21KU09OKG9iamVjdC5zdGF0dXMpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5zdGF0dXMgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QudG9rZW5zICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnRva2VucyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnRva2VucyA9IFN0cmluZyhvYmplY3QudG9rZW5zKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudG9rZW5zID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5kZWxlZ2F0b3JTaGFyZXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZGVsZWdhdG9yU2hhcmVzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGVsZWdhdG9yU2hhcmVzID0gU3RyaW5nKG9iamVjdC5kZWxlZ2F0b3JTaGFyZXMpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5kZWxlZ2F0b3JTaGFyZXMgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LmRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmRlc2NyaXB0aW9uICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGVzY3JpcHRpb24gPSBEZXNjcmlwdGlvbi5mcm9tSlNPTihvYmplY3QuZGVzY3JpcHRpb24pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5kZXNjcmlwdGlvbiA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnVuYm9uZGluZ0hlaWdodCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC51bmJvbmRpbmdIZWlnaHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS51bmJvbmRpbmdIZWlnaHQgPSBOdW1iZXIob2JqZWN0LnVuYm9uZGluZ0hlaWdodCk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnVuYm9uZGluZ0hlaWdodCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC51bmJvbmRpbmdUaW1lICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnVuYm9uZGluZ1RpbWUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS51bmJvbmRpbmdUaW1lID0gZnJvbUpzb25UaW1lc3RhbXAob2JqZWN0LnVuYm9uZGluZ1RpbWUpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS51bmJvbmRpbmdUaW1lID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuY29tbWlzc2lvbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb21taXNzaW9uICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29tbWlzc2lvbiA9IENvbW1pc3Npb24uZnJvbUpTT04ob2JqZWN0LmNvbW1pc3Npb24pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jb21taXNzaW9uID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QubWluU2VsZkRlbGVnYXRpb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubWluU2VsZkRlbGVnYXRpb24gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5taW5TZWxmRGVsZWdhdGlvbiA9IFN0cmluZyhvYmplY3QubWluU2VsZkRlbGVnYXRpb24pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5taW5TZWxmRGVsZWdhdGlvbiA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5vcGVyYXRvckFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiAob2JqLm9wZXJhdG9yQWRkcmVzcyA9IG1lc3NhZ2Uub3BlcmF0b3JBZGRyZXNzKTsKICAgIG1lc3NhZ2UuY29uc2Vuc3VzUHVia2V5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5jb25zZW5zdXNQdWJrZXkgPSBtZXNzYWdlLmNvbnNlbnN1c1B1YmtleSA/IEFueS50b0pTT04obWVzc2FnZS5jb25zZW5zdXNQdWJrZXkpIDogdW5kZWZpbmVkKTsKICAgIG1lc3NhZ2UuamFpbGVkICE9PSB1bmRlZmluZWQgJiYgKG9iai5qYWlsZWQgPSBtZXNzYWdlLmphaWxlZCk7CiAgICBtZXNzYWdlLnN0YXR1cyAhPT0gdW5kZWZpbmVkICYmIChvYmouc3RhdHVzID0gYm9uZFN0YXR1c1RvSlNPTihtZXNzYWdlLnN0YXR1cykpOwogICAgbWVzc2FnZS50b2tlbnMgIT09IHVuZGVmaW5lZCAmJiAob2JqLnRva2VucyA9IG1lc3NhZ2UudG9rZW5zKTsKICAgIG1lc3NhZ2UuZGVsZWdhdG9yU2hhcmVzICE9PSB1bmRlZmluZWQgJiYgKG9iai5kZWxlZ2F0b3JTaGFyZXMgPSBtZXNzYWdlLmRlbGVnYXRvclNoYXJlcyk7CiAgICBtZXNzYWdlLmRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai5kZXNjcmlwdGlvbiA9IG1lc3NhZ2UuZGVzY3JpcHRpb24gPyBEZXNjcmlwdGlvbi50b0pTT04obWVzc2FnZS5kZXNjcmlwdGlvbikgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS51bmJvbmRpbmdIZWlnaHQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnVuYm9uZGluZ0hlaWdodCA9IG1lc3NhZ2UudW5ib25kaW5nSGVpZ2h0KTsKICAgIG1lc3NhZ2UudW5ib25kaW5nVGltZSAhPT0gdW5kZWZpbmVkICYmIChvYmoudW5ib25kaW5nVGltZSA9IG1lc3NhZ2UudW5ib25kaW5nVGltZSAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS51bmJvbmRpbmdUaW1lLnRvSVNPU3RyaW5nKCkgOiBudWxsKTsKICAgIG1lc3NhZ2UuY29tbWlzc2lvbiAhPT0gdW5kZWZpbmVkICYmIChvYmouY29tbWlzc2lvbiA9IG1lc3NhZ2UuY29tbWlzc2lvbiA/IENvbW1pc3Npb24udG9KU09OKG1lc3NhZ2UuY29tbWlzc2lvbikgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5taW5TZWxmRGVsZWdhdGlvbiAhPT0gdW5kZWZpbmVkICYmIChvYmoubWluU2VsZkRlbGVnYXRpb24gPSBtZXNzYWdlLm1pblNlbGZEZWxlZ2F0aW9uKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VWYWxpZGF0b3IpOwoKICAgIGlmIChvYmplY3Qub3BlcmF0b3JBZGRyZXNzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm9wZXJhdG9yQWRkcmVzcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLm9wZXJhdG9yQWRkcmVzcyA9IG9iamVjdC5vcGVyYXRvckFkZHJlc3M7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLm9wZXJhdG9yQWRkcmVzcyA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuY29uc2Vuc3VzUHVia2V5ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNvbnNlbnN1c1B1YmtleSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNvbnNlbnN1c1B1YmtleSA9IEFueS5mcm9tUGFydGlhbChvYmplY3QuY29uc2Vuc3VzUHVia2V5KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29uc2Vuc3VzUHVia2V5ID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuamFpbGVkICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmphaWxlZCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmphaWxlZCA9IG9iamVjdC5qYWlsZWQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmphaWxlZCA9IGZhbHNlOwogICAgfQoKICAgIGlmIChvYmplY3Quc3RhdHVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnN0YXR1cyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnN0YXR1cyA9IG9iamVjdC5zdGF0dXM7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnN0YXR1cyA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC50b2tlbnMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudG9rZW5zICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudG9rZW5zID0gb2JqZWN0LnRva2VuczsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudG9rZW5zID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5kZWxlZ2F0b3JTaGFyZXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZGVsZWdhdG9yU2hhcmVzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGVsZWdhdG9yU2hhcmVzID0gb2JqZWN0LmRlbGVnYXRvclNoYXJlczsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZGVsZWdhdG9yU2hhcmVzID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kZXNjcmlwdGlvbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmRlc2NyaXB0aW9uID0gRGVzY3JpcHRpb24uZnJvbVBhcnRpYWwob2JqZWN0LmRlc2NyaXB0aW9uKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZGVzY3JpcHRpb24gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC51bmJvbmRpbmdIZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudW5ib25kaW5nSGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudW5ib25kaW5nSGVpZ2h0ID0gb2JqZWN0LnVuYm9uZGluZ0hlaWdodDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudW5ib25kaW5nSGVpZ2h0ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LnVuYm9uZGluZ1RpbWUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudW5ib25kaW5nVGltZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnVuYm9uZGluZ1RpbWUgPSBvYmplY3QudW5ib25kaW5nVGltZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudW5ib25kaW5nVGltZSA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNvbW1pc3Npb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29tbWlzc2lvbiAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNvbW1pc3Npb24gPSBDb21taXNzaW9uLmZyb21QYXJ0aWFsKG9iamVjdC5jb21taXNzaW9uKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29tbWlzc2lvbiA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0Lm1pblNlbGZEZWxlZ2F0aW9uICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm1pblNlbGZEZWxlZ2F0aW9uICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UubWluU2VsZkRlbGVnYXRpb24gPSBvYmplY3QubWluU2VsZkRlbGVnYXRpb247CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLm1pblNlbGZEZWxlZ2F0aW9uID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVZhbEFkZHJlc3NlcyA9IHsKICBhZGRyZXNzZXM6ICIiCn07CmV4cG9ydCB2YXIgVmFsQWRkcmVzc2VzID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICB2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG1lc3NhZ2UuYWRkcmVzc2VzKSwKICAgICAgICBfc3RlcDQ7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3I0LnMoKTsgIShfc3RlcDQgPSBfaXRlcmF0b3I0Lm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgdiA9IF9zdGVwNC52YWx1ZTsKICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcodik7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3I0LmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvcjQuZigpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVZhbEFkZHJlc3Nlcyk7CgogICAgbWVzc2FnZS5hZGRyZXNzZXMgPSBbXTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmFkZHJlc3Nlcy5wdXNoKHJlYWRlci5zdHJpbmcoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VWYWxBZGRyZXNzZXMpOwoKICAgIG1lc3NhZ2UuYWRkcmVzc2VzID0gW107CgogICAgaWYgKG9iamVjdC5hZGRyZXNzZXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYWRkcmVzc2VzICE9PSBudWxsKSB7CiAgICAgIHZhciBfaXRlcmF0b3I1ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LmFkZHJlc3NlcyksCiAgICAgICAgICBfc3RlcDU7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yNS5zKCk7ICEoX3N0ZXA1ID0gX2l0ZXJhdG9yNS5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZSA9IF9zdGVwNS52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UuYWRkcmVzc2VzLnB1c2goU3RyaW5nKGUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjUuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjUuZigpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CgogICAgaWYgKG1lc3NhZ2UuYWRkcmVzc2VzKSB7CiAgICAgIG9iai5hZGRyZXNzZXMgPSBtZXNzYWdlLmFkZHJlc3Nlcy5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBvYmouYWRkcmVzc2VzID0gW107CiAgICB9CgogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVZhbEFkZHJlc3Nlcyk7CgogICAgbWVzc2FnZS5hZGRyZXNzZXMgPSBbXTsKCiAgICBpZiAob2JqZWN0LmFkZHJlc3NlcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hZGRyZXNzZXMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjYgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3QuYWRkcmVzc2VzKSwKICAgICAgICAgIF9zdGVwNjsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I2LnMoKTsgIShfc3RlcDYgPSBfaXRlcmF0b3I2Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXA2LnZhbHVlOwogICAgICAgICAgbWVzc2FnZS5hZGRyZXNzZXMucHVzaChlKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjYuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjYuZigpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZURWUGFpciA9IHsKICBkZWxlZ2F0b3JBZGRyZXNzOiAiIiwKICB2YWxpZGF0b3JBZGRyZXNzOiAiIgp9OwpleHBvcnQgdmFyIERWUGFpciA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UuZGVsZWdhdG9yQWRkcmVzcyAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuZGVsZWdhdG9yQWRkcmVzcyk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UudmFsaWRhdG9yQWRkcmVzcyAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UudmFsaWRhdG9yQWRkcmVzcyk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlRFZQYWlyKTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmRlbGVnYXRvckFkZHJlc3MgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS52YWxpZGF0b3JBZGRyZXNzID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlRFZQYWlyKTsKCiAgICBpZiAob2JqZWN0LmRlbGVnYXRvckFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZGVsZWdhdG9yQWRkcmVzcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmRlbGVnYXRvckFkZHJlc3MgPSBTdHJpbmcob2JqZWN0LmRlbGVnYXRvckFkZHJlc3MpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5kZWxlZ2F0b3JBZGRyZXNzID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC52YWxpZGF0b3JBZGRyZXNzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZhbGlkYXRvckFkZHJlc3MgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3JBZGRyZXNzID0gU3RyaW5nKG9iamVjdC52YWxpZGF0b3JBZGRyZXNzKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudmFsaWRhdG9yQWRkcmVzcyA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5kZWxlZ2F0b3JBZGRyZXNzICE9PSB1bmRlZmluZWQgJiYgKG9iai5kZWxlZ2F0b3JBZGRyZXNzID0gbWVzc2FnZS5kZWxlZ2F0b3JBZGRyZXNzKTsKICAgIG1lc3NhZ2UudmFsaWRhdG9yQWRkcmVzcyAhPT0gdW5kZWZpbmVkICYmIChvYmoudmFsaWRhdG9yQWRkcmVzcyA9IG1lc3NhZ2UudmFsaWRhdG9yQWRkcmVzcyk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlRFZQYWlyKTsKCiAgICBpZiAob2JqZWN0LmRlbGVnYXRvckFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZGVsZWdhdG9yQWRkcmVzcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmRlbGVnYXRvckFkZHJlc3MgPSBvYmplY3QuZGVsZWdhdG9yQWRkcmVzczsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZGVsZWdhdG9yQWRkcmVzcyA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QudmFsaWRhdG9yQWRkcmVzcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWxpZGF0b3JBZGRyZXNzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudmFsaWRhdG9yQWRkcmVzcyA9IG9iamVjdC52YWxpZGF0b3JBZGRyZXNzOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3JBZGRyZXNzID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZURWUGFpcnMgPSB7fTsKZXhwb3J0IHZhciBEVlBhaXJzID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICB2YXIgX2l0ZXJhdG9yNyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG1lc3NhZ2UucGFpcnMpLAogICAgICAgIF9zdGVwNzsKCiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvcjcucygpOyAhKF9zdGVwNyA9IF9pdGVyYXRvcjcubigpKS5kb25lOykgewogICAgICAgIHZhciB2ID0gX3N0ZXA3LnZhbHVlOwogICAgICAgIERWUGFpci5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIF9pdGVyYXRvcjcuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yNy5mKCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlRFZQYWlycyk7CgogICAgbWVzc2FnZS5wYWlycyA9IFtdOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UucGFpcnMucHVzaChEVlBhaXIuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VEVlBhaXJzKTsKCiAgICBtZXNzYWdlLnBhaXJzID0gW107CgogICAgaWYgKG9iamVjdC5wYWlycyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wYWlycyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yOCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG9iamVjdC5wYWlycyksCiAgICAgICAgICBfc3RlcDg7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yOC5zKCk7ICEoX3N0ZXA4ID0gX2l0ZXJhdG9yOC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZSA9IF9zdGVwOC52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UucGFpcnMucHVzaChEVlBhaXIuZnJvbUpTT04oZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yOC5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yOC5mKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKCiAgICBpZiAobWVzc2FnZS5wYWlycykgewogICAgICBvYmoucGFpcnMgPSBtZXNzYWdlLnBhaXJzLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlID8gRFZQYWlyLnRvSlNPTihlKSA6IHVuZGVmaW5lZDsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBvYmoucGFpcnMgPSBbXTsKICAgIH0KCiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlRFZQYWlycyk7CgogICAgbWVzc2FnZS5wYWlycyA9IFtdOwoKICAgIGlmIChvYmplY3QucGFpcnMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucGFpcnMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjkgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3QucGFpcnMpLAogICAgICAgICAgX3N0ZXA5OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjkucygpOyAhKF9zdGVwOSA9IF9pdGVyYXRvcjkubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGUgPSBfc3RlcDkudmFsdWU7CiAgICAgICAgICBtZXNzYWdlLnBhaXJzLnB1c2goRFZQYWlyLmZyb21QYXJ0aWFsKGUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjkuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjkuZigpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZURWVlRyaXBsZXQgPSB7CiAgZGVsZWdhdG9yQWRkcmVzczogIiIsCiAgdmFsaWRhdG9yU3JjQWRkcmVzczogIiIsCiAgdmFsaWRhdG9yRHN0QWRkcmVzczogIiIKfTsKZXhwb3J0IHZhciBEVlZUcmlwbGV0ID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5kZWxlZ2F0b3JBZGRyZXNzICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5kZWxlZ2F0b3JBZGRyZXNzKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS52YWxpZGF0b3JTcmNBZGRyZXNzICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS52YWxpZGF0b3JTcmNBZGRyZXNzKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS52YWxpZGF0b3JEc3RBZGRyZXNzICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS52YWxpZGF0b3JEc3RBZGRyZXNzKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VEVlZUcmlwbGV0KTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmRlbGVnYXRvckFkZHJlc3MgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS52YWxpZGF0b3JTcmNBZGRyZXNzID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2UudmFsaWRhdG9yRHN0QWRkcmVzcyA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZURWVlRyaXBsZXQpOwoKICAgIGlmIChvYmplY3QuZGVsZWdhdG9yQWRkcmVzcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kZWxlZ2F0b3JBZGRyZXNzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGVsZWdhdG9yQWRkcmVzcyA9IFN0cmluZyhvYmplY3QuZGVsZWdhdG9yQWRkcmVzcyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmRlbGVnYXRvckFkZHJlc3MgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZhbGlkYXRvclNyY0FkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsaWRhdG9yU3JjQWRkcmVzcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnZhbGlkYXRvclNyY0FkZHJlc3MgPSBTdHJpbmcob2JqZWN0LnZhbGlkYXRvclNyY0FkZHJlc3MpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3JTcmNBZGRyZXNzID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC52YWxpZGF0b3JEc3RBZGRyZXNzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZhbGlkYXRvckRzdEFkZHJlc3MgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3JEc3RBZGRyZXNzID0gU3RyaW5nKG9iamVjdC52YWxpZGF0b3JEc3RBZGRyZXNzKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudmFsaWRhdG9yRHN0QWRkcmVzcyA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5kZWxlZ2F0b3JBZGRyZXNzICE9PSB1bmRlZmluZWQgJiYgKG9iai5kZWxlZ2F0b3JBZGRyZXNzID0gbWVzc2FnZS5kZWxlZ2F0b3JBZGRyZXNzKTsKICAgIG1lc3NhZ2UudmFsaWRhdG9yU3JjQWRkcmVzcyAhPT0gdW5kZWZpbmVkICYmIChvYmoudmFsaWRhdG9yU3JjQWRkcmVzcyA9IG1lc3NhZ2UudmFsaWRhdG9yU3JjQWRkcmVzcyk7CiAgICBtZXNzYWdlLnZhbGlkYXRvckRzdEFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiAob2JqLnZhbGlkYXRvckRzdEFkZHJlc3MgPSBtZXNzYWdlLnZhbGlkYXRvckRzdEFkZHJlc3MpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZURWVlRyaXBsZXQpOwoKICAgIGlmIChvYmplY3QuZGVsZWdhdG9yQWRkcmVzcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kZWxlZ2F0b3JBZGRyZXNzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGVsZWdhdG9yQWRkcmVzcyA9IG9iamVjdC5kZWxlZ2F0b3JBZGRyZXNzOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5kZWxlZ2F0b3JBZGRyZXNzID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC52YWxpZGF0b3JTcmNBZGRyZXNzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZhbGlkYXRvclNyY0FkZHJlc3MgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3JTcmNBZGRyZXNzID0gb2JqZWN0LnZhbGlkYXRvclNyY0FkZHJlc3M7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnZhbGlkYXRvclNyY0FkZHJlc3MgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZhbGlkYXRvckRzdEFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsaWRhdG9yRHN0QWRkcmVzcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnZhbGlkYXRvckRzdEFkZHJlc3MgPSBvYmplY3QudmFsaWRhdG9yRHN0QWRkcmVzczsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudmFsaWRhdG9yRHN0QWRkcmVzcyA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VEVlZUcmlwbGV0cyA9IHt9OwpleHBvcnQgdmFyIERWVlRyaXBsZXRzID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICB2YXIgX2l0ZXJhdG9yMTAgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihtZXNzYWdlLnRyaXBsZXRzKSwKICAgICAgICBfc3RlcDEwOwoKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yMTAucygpOyAhKF9zdGVwMTAgPSBfaXRlcmF0b3IxMC5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIHYgPSBfc3RlcDEwLnZhbHVlOwogICAgICAgIERWVlRyaXBsZXQuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IxMC5lKGVycik7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXRlcmF0b3IxMC5mKCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlRFZWVHJpcGxldHMpOwoKICAgIG1lc3NhZ2UudHJpcGxldHMgPSBbXTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLnRyaXBsZXRzLnB1c2goRFZWVHJpcGxldC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZURWVlRyaXBsZXRzKTsKCiAgICBtZXNzYWdlLnRyaXBsZXRzID0gW107CgogICAgaWYgKG9iamVjdC50cmlwbGV0cyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50cmlwbGV0cyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yMTEgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3QudHJpcGxldHMpLAogICAgICAgICAgX3N0ZXAxMTsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IxMS5zKCk7ICEoX3N0ZXAxMSA9IF9pdGVyYXRvcjExLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAxMS52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UudHJpcGxldHMucHVzaChEVlZUcmlwbGV0LmZyb21KU09OKGUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjExLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IxMS5mKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKCiAgICBpZiAobWVzc2FnZS50cmlwbGV0cykgewogICAgICBvYmoudHJpcGxldHMgPSBtZXNzYWdlLnRyaXBsZXRzLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlID8gRFZWVHJpcGxldC50b0pTT04oZSkgOiB1bmRlZmluZWQ7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgb2JqLnRyaXBsZXRzID0gW107CiAgICB9CgogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZURWVlRyaXBsZXRzKTsKCiAgICBtZXNzYWdlLnRyaXBsZXRzID0gW107CgogICAgaWYgKG9iamVjdC50cmlwbGV0cyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50cmlwbGV0cyAhPT0gbnVsbCkgewogICAgICB2YXIgX2l0ZXJhdG9yMTIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmplY3QudHJpcGxldHMpLAogICAgICAgICAgX3N0ZXAxMjsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IxMi5zKCk7ICEoX3N0ZXAxMiA9IF9pdGVyYXRvcjEyLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAxMi52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UudHJpcGxldHMucHVzaChEVlZUcmlwbGV0LmZyb21QYXJ0aWFsKGUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjEyLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IxMi5mKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlRGVsZWdhdGlvbiA9IHsKICBkZWxlZ2F0b3JBZGRyZXNzOiAiIiwKICB2YWxpZGF0b3JBZGRyZXNzOiAiIiwKICBzaGFyZXM6ICIiCn07CmV4cG9ydCB2YXIgRGVsZWdhdGlvbiA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UuZGVsZWdhdG9yQWRkcmVzcyAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuZGVsZWdhdG9yQWRkcmVzcyk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UudmFsaWRhdG9yQWRkcmVzcyAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UudmFsaWRhdG9yQWRkcmVzcyk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2Uuc2hhcmVzICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5zaGFyZXMpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZURlbGVnYXRpb24pOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UuZGVsZWdhdG9yQWRkcmVzcyA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLnZhbGlkYXRvckFkZHJlc3MgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5zaGFyZXMgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VEZWxlZ2F0aW9uKTsKCiAgICBpZiAob2JqZWN0LmRlbGVnYXRvckFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZGVsZWdhdG9yQWRkcmVzcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmRlbGVnYXRvckFkZHJlc3MgPSBTdHJpbmcob2JqZWN0LmRlbGVnYXRvckFkZHJlc3MpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5kZWxlZ2F0b3JBZGRyZXNzID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC52YWxpZGF0b3JBZGRyZXNzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZhbGlkYXRvckFkZHJlc3MgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3JBZGRyZXNzID0gU3RyaW5nKG9iamVjdC52YWxpZGF0b3JBZGRyZXNzKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudmFsaWRhdG9yQWRkcmVzcyA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3Quc2hhcmVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNoYXJlcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnNoYXJlcyA9IFN0cmluZyhvYmplY3Quc2hhcmVzKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2Uuc2hhcmVzID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmRlbGVnYXRvckFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiAob2JqLmRlbGVnYXRvckFkZHJlc3MgPSBtZXNzYWdlLmRlbGVnYXRvckFkZHJlc3MpOwogICAgbWVzc2FnZS52YWxpZGF0b3JBZGRyZXNzICE9PSB1bmRlZmluZWQgJiYgKG9iai52YWxpZGF0b3JBZGRyZXNzID0gbWVzc2FnZS52YWxpZGF0b3JBZGRyZXNzKTsKICAgIG1lc3NhZ2Uuc2hhcmVzICE9PSB1bmRlZmluZWQgJiYgKG9iai5zaGFyZXMgPSBtZXNzYWdlLnNoYXJlcyk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgZnJvbVBhcnRpYWw6IGZ1bmN0aW9uIGZyb21QYXJ0aWFsKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlRGVsZWdhdGlvbik7CgogICAgaWYgKG9iamVjdC5kZWxlZ2F0b3JBZGRyZXNzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmRlbGVnYXRvckFkZHJlc3MgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5kZWxlZ2F0b3JBZGRyZXNzID0gb2JqZWN0LmRlbGVnYXRvckFkZHJlc3M7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmRlbGVnYXRvckFkZHJlc3MgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZhbGlkYXRvckFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsaWRhdG9yQWRkcmVzcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnZhbGlkYXRvckFkZHJlc3MgPSBvYmplY3QudmFsaWRhdG9yQWRkcmVzczsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudmFsaWRhdG9yQWRkcmVzcyA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3Quc2hhcmVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNoYXJlcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnNoYXJlcyA9IG9iamVjdC5zaGFyZXM7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnNoYXJlcyA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VVbmJvbmRpbmdEZWxlZ2F0aW9uID0gewogIGRlbGVnYXRvckFkZHJlc3M6ICIiLAogIHZhbGlkYXRvckFkZHJlc3M6ICIiCn07CmV4cG9ydCB2YXIgVW5ib25kaW5nRGVsZWdhdGlvbiA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UuZGVsZWdhdG9yQWRkcmVzcyAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuZGVsZWdhdG9yQWRkcmVzcyk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UudmFsaWRhdG9yQWRkcmVzcyAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UudmFsaWRhdG9yQWRkcmVzcyk7CiAgICB9CgogICAgdmFyIF9pdGVyYXRvcjEzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobWVzc2FnZS5lbnRyaWVzKSwKICAgICAgICBfc3RlcDEzOwoKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yMTMucygpOyAhKF9zdGVwMTMgPSBfaXRlcmF0b3IxMy5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIHYgPSBfc3RlcDEzLnZhbHVlOwogICAgICAgIFVuYm9uZGluZ0RlbGVnYXRpb25FbnRyeS5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIF9pdGVyYXRvcjEzLmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvcjEzLmYoKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VVbmJvbmRpbmdEZWxlZ2F0aW9uKTsKCiAgICBtZXNzYWdlLmVudHJpZXMgPSBbXTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmRlbGVnYXRvckFkZHJlc3MgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS52YWxpZGF0b3JBZGRyZXNzID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2UuZW50cmllcy5wdXNoKFVuYm9uZGluZ0RlbGVnYXRpb25FbnRyeS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVVuYm9uZGluZ0RlbGVnYXRpb24pOwoKICAgIG1lc3NhZ2UuZW50cmllcyA9IFtdOwoKICAgIGlmIChvYmplY3QuZGVsZWdhdG9yQWRkcmVzcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kZWxlZ2F0b3JBZGRyZXNzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGVsZWdhdG9yQWRkcmVzcyA9IFN0cmluZyhvYmplY3QuZGVsZWdhdG9yQWRkcmVzcyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmRlbGVnYXRvckFkZHJlc3MgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZhbGlkYXRvckFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsaWRhdG9yQWRkcmVzcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnZhbGlkYXRvckFkZHJlc3MgPSBTdHJpbmcob2JqZWN0LnZhbGlkYXRvckFkZHJlc3MpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3JBZGRyZXNzID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5lbnRyaWVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmVudHJpZXMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjE0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LmVudHJpZXMpLAogICAgICAgICAgX3N0ZXAxNDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IxNC5zKCk7ICEoX3N0ZXAxNCA9IF9pdGVyYXRvcjE0Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAxNC52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UuZW50cmllcy5wdXNoKFVuYm9uZGluZ0RlbGVnYXRpb25FbnRyeS5mcm9tSlNPTihlKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IxNC5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMTQuZigpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmRlbGVnYXRvckFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiAob2JqLmRlbGVnYXRvckFkZHJlc3MgPSBtZXNzYWdlLmRlbGVnYXRvckFkZHJlc3MpOwogICAgbWVzc2FnZS52YWxpZGF0b3JBZGRyZXNzICE9PSB1bmRlZmluZWQgJiYgKG9iai52YWxpZGF0b3JBZGRyZXNzID0gbWVzc2FnZS52YWxpZGF0b3JBZGRyZXNzKTsKCiAgICBpZiAobWVzc2FnZS5lbnRyaWVzKSB7CiAgICAgIG9iai5lbnRyaWVzID0gbWVzc2FnZS5lbnRyaWVzLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlID8gVW5ib25kaW5nRGVsZWdhdGlvbkVudHJ5LnRvSlNPTihlKSA6IHVuZGVmaW5lZDsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBvYmouZW50cmllcyA9IFtdOwogICAgfQoKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VVbmJvbmRpbmdEZWxlZ2F0aW9uKTsKCiAgICBtZXNzYWdlLmVudHJpZXMgPSBbXTsKCiAgICBpZiAob2JqZWN0LmRlbGVnYXRvckFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZGVsZWdhdG9yQWRkcmVzcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmRlbGVnYXRvckFkZHJlc3MgPSBvYmplY3QuZGVsZWdhdG9yQWRkcmVzczsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZGVsZWdhdG9yQWRkcmVzcyA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QudmFsaWRhdG9yQWRkcmVzcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWxpZGF0b3JBZGRyZXNzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudmFsaWRhdG9yQWRkcmVzcyA9IG9iamVjdC52YWxpZGF0b3JBZGRyZXNzOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3JBZGRyZXNzID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5lbnRyaWVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmVudHJpZXMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjE1ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LmVudHJpZXMpLAogICAgICAgICAgX3N0ZXAxNTsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IxNS5zKCk7ICEoX3N0ZXAxNSA9IF9pdGVyYXRvcjE1Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAxNS52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UuZW50cmllcy5wdXNoKFVuYm9uZGluZ0RlbGVnYXRpb25FbnRyeS5mcm9tUGFydGlhbChlKSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IxNS5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMTUuZigpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVVuYm9uZGluZ0RlbGVnYXRpb25FbnRyeSA9IHsKICBjcmVhdGlvbkhlaWdodDogMCwKICBpbml0aWFsQmFsYW5jZTogIiIsCiAgYmFsYW5jZTogIiIKfTsKZXhwb3J0IHZhciBVbmJvbmRpbmdEZWxlZ2F0aW9uRW50cnkgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmNyZWF0aW9uSGVpZ2h0ICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoOCkuaW50NjQobWVzc2FnZS5jcmVhdGlvbkhlaWdodCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuY29tcGxldGlvblRpbWUgIT09IHVuZGVmaW5lZCkgewogICAgICBUaW1lc3RhbXAuZW5jb2RlKHRvVGltZXN0YW1wKG1lc3NhZ2UuY29tcGxldGlvblRpbWUpLCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmluaXRpYWxCYWxhbmNlICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5pbml0aWFsQmFsYW5jZSk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuYmFsYW5jZSAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMigzNCkuc3RyaW5nKG1lc3NhZ2UuYmFsYW5jZSk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlVW5ib25kaW5nRGVsZWdhdGlvbkVudHJ5KTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmNyZWF0aW9uSGVpZ2h0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLmNvbXBsZXRpb25UaW1lID0gZnJvbVRpbWVzdGFtcChUaW1lc3RhbXAuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5pbml0aWFsQmFsYW5jZSA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBtZXNzYWdlLmJhbGFuY2UgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VVbmJvbmRpbmdEZWxlZ2F0aW9uRW50cnkpOwoKICAgIGlmIChvYmplY3QuY3JlYXRpb25IZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY3JlYXRpb25IZWlnaHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jcmVhdGlvbkhlaWdodCA9IE51bWJlcihvYmplY3QuY3JlYXRpb25IZWlnaHQpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5jcmVhdGlvbkhlaWdodCA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5jb21wbGV0aW9uVGltZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jb21wbGV0aW9uVGltZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmNvbXBsZXRpb25UaW1lID0gZnJvbUpzb25UaW1lc3RhbXAob2JqZWN0LmNvbXBsZXRpb25UaW1lKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29tcGxldGlvblRpbWUgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbml0aWFsQmFsYW5jZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbml0aWFsQmFsYW5jZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluaXRpYWxCYWxhbmNlID0gU3RyaW5nKG9iamVjdC5pbml0aWFsQmFsYW5jZSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmluaXRpYWxCYWxhbmNlID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5iYWxhbmNlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmJhbGFuY2UgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5iYWxhbmNlID0gU3RyaW5nKG9iamVjdC5iYWxhbmNlKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYmFsYW5jZSA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5jcmVhdGlvbkhlaWdodCAhPT0gdW5kZWZpbmVkICYmIChvYmouY3JlYXRpb25IZWlnaHQgPSBtZXNzYWdlLmNyZWF0aW9uSGVpZ2h0KTsKICAgIG1lc3NhZ2UuY29tcGxldGlvblRpbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNvbXBsZXRpb25UaW1lID0gbWVzc2FnZS5jb21wbGV0aW9uVGltZSAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS5jb21wbGV0aW9uVGltZS50b0lTT1N0cmluZygpIDogbnVsbCk7CiAgICBtZXNzYWdlLmluaXRpYWxCYWxhbmNlICE9PSB1bmRlZmluZWQgJiYgKG9iai5pbml0aWFsQmFsYW5jZSA9IG1lc3NhZ2UuaW5pdGlhbEJhbGFuY2UpOwogICAgbWVzc2FnZS5iYWxhbmNlICE9PSB1bmRlZmluZWQgJiYgKG9iai5iYWxhbmNlID0gbWVzc2FnZS5iYWxhbmNlKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VVbmJvbmRpbmdEZWxlZ2F0aW9uRW50cnkpOwoKICAgIGlmIChvYmplY3QuY3JlYXRpb25IZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY3JlYXRpb25IZWlnaHQgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jcmVhdGlvbkhlaWdodCA9IG9iamVjdC5jcmVhdGlvbkhlaWdodDsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY3JlYXRpb25IZWlnaHQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuY29tcGxldGlvblRpbWUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29tcGxldGlvblRpbWUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb21wbGV0aW9uVGltZSA9IG9iamVjdC5jb21wbGV0aW9uVGltZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY29tcGxldGlvblRpbWUgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5pbml0aWFsQmFsYW5jZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbml0aWFsQmFsYW5jZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmluaXRpYWxCYWxhbmNlID0gb2JqZWN0LmluaXRpYWxCYWxhbmNlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5pbml0aWFsQmFsYW5jZSA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuYmFsYW5jZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5iYWxhbmNlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYmFsYW5jZSA9IG9iamVjdC5iYWxhbmNlOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5iYWxhbmNlID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfQp9Owp2YXIgYmFzZVJlZGVsZWdhdGlvbkVudHJ5ID0gewogIGNyZWF0aW9uSGVpZ2h0OiAwLAogIGluaXRpYWxCYWxhbmNlOiAiIiwKICBzaGFyZXNEc3Q6ICIiCn07CmV4cG9ydCB2YXIgUmVkZWxlZ2F0aW9uRW50cnkgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmNyZWF0aW9uSGVpZ2h0ICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoOCkuaW50NjQobWVzc2FnZS5jcmVhdGlvbkhlaWdodCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuY29tcGxldGlvblRpbWUgIT09IHVuZGVmaW5lZCkgewogICAgICBUaW1lc3RhbXAuZW5jb2RlKHRvVGltZXN0YW1wKG1lc3NhZ2UuY29tcGxldGlvblRpbWUpLCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmluaXRpYWxCYWxhbmNlICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5pbml0aWFsQmFsYW5jZSk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2Uuc2hhcmVzRHN0ICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS5zaGFyZXNEc3QpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlZGVsZWdhdGlvbkVudHJ5KTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmNyZWF0aW9uSGVpZ2h0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLmNvbXBsZXRpb25UaW1lID0gZnJvbVRpbWVzdGFtcChUaW1lc3RhbXAuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgbWVzc2FnZS5pbml0aWFsQmFsYW5jZSA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBtZXNzYWdlLnNoYXJlc0RzdCA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlZGVsZWdhdGlvbkVudHJ5KTsKCiAgICBpZiAob2JqZWN0LmNyZWF0aW9uSGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNyZWF0aW9uSGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY3JlYXRpb25IZWlnaHQgPSBOdW1iZXIob2JqZWN0LmNyZWF0aW9uSGVpZ2h0KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuY3JlYXRpb25IZWlnaHQgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuY29tcGxldGlvblRpbWUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuY29tcGxldGlvblRpbWUgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5jb21wbGV0aW9uVGltZSA9IGZyb21Kc29uVGltZXN0YW1wKG9iamVjdC5jb21wbGV0aW9uVGltZSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNvbXBsZXRpb25UaW1lID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuaW5pdGlhbEJhbGFuY2UgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5pdGlhbEJhbGFuY2UgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbml0aWFsQmFsYW5jZSA9IFN0cmluZyhvYmplY3QuaW5pdGlhbEJhbGFuY2UpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5pbml0aWFsQmFsYW5jZSA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3Quc2hhcmVzRHN0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNoYXJlc0RzdCAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnNoYXJlc0RzdCA9IFN0cmluZyhvYmplY3Quc2hhcmVzRHN0KTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2Uuc2hhcmVzRHN0ID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLmNyZWF0aW9uSGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5jcmVhdGlvbkhlaWdodCA9IG1lc3NhZ2UuY3JlYXRpb25IZWlnaHQpOwogICAgbWVzc2FnZS5jb21wbGV0aW9uVGltZSAhPT0gdW5kZWZpbmVkICYmIChvYmouY29tcGxldGlvblRpbWUgPSBtZXNzYWdlLmNvbXBsZXRpb25UaW1lICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlLmNvbXBsZXRpb25UaW1lLnRvSVNPU3RyaW5nKCkgOiBudWxsKTsKICAgIG1lc3NhZ2UuaW5pdGlhbEJhbGFuY2UgIT09IHVuZGVmaW5lZCAmJiAob2JqLmluaXRpYWxCYWxhbmNlID0gbWVzc2FnZS5pbml0aWFsQmFsYW5jZSk7CiAgICBtZXNzYWdlLnNoYXJlc0RzdCAhPT0gdW5kZWZpbmVkICYmIChvYmouc2hhcmVzRHN0ID0gbWVzc2FnZS5zaGFyZXNEc3QpOwogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlZGVsZWdhdGlvbkVudHJ5KTsKCiAgICBpZiAob2JqZWN0LmNyZWF0aW9uSGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNyZWF0aW9uSGVpZ2h0ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY3JlYXRpb25IZWlnaHQgPSBvYmplY3QuY3JlYXRpb25IZWlnaHQ7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNyZWF0aW9uSGVpZ2h0ID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmNvbXBsZXRpb25UaW1lICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmNvbXBsZXRpb25UaW1lICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuY29tcGxldGlvblRpbWUgPSBvYmplY3QuY29tcGxldGlvblRpbWU7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmNvbXBsZXRpb25UaW1lID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuaW5pdGlhbEJhbGFuY2UgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5pdGlhbEJhbGFuY2UgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5pbml0aWFsQmFsYW5jZSA9IG9iamVjdC5pbml0aWFsQmFsYW5jZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaW5pdGlhbEJhbGFuY2UgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LnNoYXJlc0RzdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zaGFyZXNEc3QgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5zaGFyZXNEc3QgPSBvYmplY3Quc2hhcmVzRHN0OwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5zaGFyZXNEc3QgPSAiIjsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUmVkZWxlZ2F0aW9uID0gewogIGRlbGVnYXRvckFkZHJlc3M6ICIiLAogIHZhbGlkYXRvclNyY0FkZHJlc3M6ICIiLAogIHZhbGlkYXRvckRzdEFkZHJlc3M6ICIiCn07CmV4cG9ydCB2YXIgUmVkZWxlZ2F0aW9uID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5kZWxlZ2F0b3JBZGRyZXNzICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5kZWxlZ2F0b3JBZGRyZXNzKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS52YWxpZGF0b3JTcmNBZGRyZXNzICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS52YWxpZGF0b3JTcmNBZGRyZXNzKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS52YWxpZGF0b3JEc3RBZGRyZXNzICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS52YWxpZGF0b3JEc3RBZGRyZXNzKTsKICAgIH0KCiAgICB2YXIgX2l0ZXJhdG9yMTYgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihtZXNzYWdlLmVudHJpZXMpLAogICAgICAgIF9zdGVwMTY7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IxNi5zKCk7ICEoX3N0ZXAxNiA9IF9pdGVyYXRvcjE2Lm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgdiA9IF9zdGVwMTYudmFsdWU7CiAgICAgICAgUmVkZWxlZ2F0aW9uRW50cnkuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IxNi5lKGVycik7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXRlcmF0b3IxNi5mKCk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUmVkZWxlZ2F0aW9uKTsKCiAgICBtZXNzYWdlLmVudHJpZXMgPSBbXTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLmRlbGVnYXRvckFkZHJlc3MgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS52YWxpZGF0b3JTcmNBZGRyZXNzID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2UudmFsaWRhdG9yRHN0QWRkcmVzcyA9IHJlYWRlci5zdHJpbmcoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBtZXNzYWdlLmVudHJpZXMucHVzaChSZWRlbGVnYXRpb25FbnRyeS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIGZyb21KU09OOiBmdW5jdGlvbiBmcm9tSlNPTihvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlZGVsZWdhdGlvbik7CgogICAgbWVzc2FnZS5lbnRyaWVzID0gW107CgogICAgaWYgKG9iamVjdC5kZWxlZ2F0b3JBZGRyZXNzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmRlbGVnYXRvckFkZHJlc3MgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5kZWxlZ2F0b3JBZGRyZXNzID0gU3RyaW5nKG9iamVjdC5kZWxlZ2F0b3JBZGRyZXNzKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuZGVsZWdhdG9yQWRkcmVzcyA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QudmFsaWRhdG9yU3JjQWRkcmVzcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWxpZGF0b3JTcmNBZGRyZXNzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudmFsaWRhdG9yU3JjQWRkcmVzcyA9IFN0cmluZyhvYmplY3QudmFsaWRhdG9yU3JjQWRkcmVzcyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnZhbGlkYXRvclNyY0FkZHJlc3MgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZhbGlkYXRvckRzdEFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsaWRhdG9yRHN0QWRkcmVzcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnZhbGlkYXRvckRzdEFkZHJlc3MgPSBTdHJpbmcob2JqZWN0LnZhbGlkYXRvckRzdEFkZHJlc3MpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3JEc3RBZGRyZXNzID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5lbnRyaWVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmVudHJpZXMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjE3ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LmVudHJpZXMpLAogICAgICAgICAgX3N0ZXAxNzsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IxNy5zKCk7ICEoX3N0ZXAxNyA9IF9pdGVyYXRvcjE3Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAxNy52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UuZW50cmllcy5wdXNoKFJlZGVsZWdhdGlvbkVudHJ5LmZyb21KU09OKGUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjE3LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IxNy5mKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9LAogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKG1lc3NhZ2UpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIG1lc3NhZ2UuZGVsZWdhdG9yQWRkcmVzcyAhPT0gdW5kZWZpbmVkICYmIChvYmouZGVsZWdhdG9yQWRkcmVzcyA9IG1lc3NhZ2UuZGVsZWdhdG9yQWRkcmVzcyk7CiAgICBtZXNzYWdlLnZhbGlkYXRvclNyY0FkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiAob2JqLnZhbGlkYXRvclNyY0FkZHJlc3MgPSBtZXNzYWdlLnZhbGlkYXRvclNyY0FkZHJlc3MpOwogICAgbWVzc2FnZS52YWxpZGF0b3JEc3RBZGRyZXNzICE9PSB1bmRlZmluZWQgJiYgKG9iai52YWxpZGF0b3JEc3RBZGRyZXNzID0gbWVzc2FnZS52YWxpZGF0b3JEc3RBZGRyZXNzKTsKCiAgICBpZiAobWVzc2FnZS5lbnRyaWVzKSB7CiAgICAgIG9iai5lbnRyaWVzID0gbWVzc2FnZS5lbnRyaWVzLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlID8gUmVkZWxlZ2F0aW9uRW50cnkudG9KU09OKGUpIDogdW5kZWZpbmVkOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG9iai5lbnRyaWVzID0gW107CiAgICB9CgogICAgcmV0dXJuIG9iajsKICB9LAogIGZyb21QYXJ0aWFsOiBmdW5jdGlvbiBmcm9tUGFydGlhbChvYmplY3QpIHsKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlZGVsZWdhdGlvbik7CgogICAgbWVzc2FnZS5lbnRyaWVzID0gW107CgogICAgaWYgKG9iamVjdC5kZWxlZ2F0b3JBZGRyZXNzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmRlbGVnYXRvckFkZHJlc3MgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5kZWxlZ2F0b3JBZGRyZXNzID0gb2JqZWN0LmRlbGVnYXRvckFkZHJlc3M7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmRlbGVnYXRvckFkZHJlc3MgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LnZhbGlkYXRvclNyY0FkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmFsaWRhdG9yU3JjQWRkcmVzcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnZhbGlkYXRvclNyY0FkZHJlc3MgPSBvYmplY3QudmFsaWRhdG9yU3JjQWRkcmVzczsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudmFsaWRhdG9yU3JjQWRkcmVzcyA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QudmFsaWRhdG9yRHN0QWRkcmVzcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52YWxpZGF0b3JEc3RBZGRyZXNzICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudmFsaWRhdG9yRHN0QWRkcmVzcyA9IG9iamVjdC52YWxpZGF0b3JEc3RBZGRyZXNzOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS52YWxpZGF0b3JEc3RBZGRyZXNzID0gIiI7CiAgICB9CgogICAgaWYgKG9iamVjdC5lbnRyaWVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmVudHJpZXMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjE4ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LmVudHJpZXMpLAogICAgICAgICAgX3N0ZXAxODsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IxOC5zKCk7ICEoX3N0ZXAxOCA9IF9pdGVyYXRvcjE4Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAxOC52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UuZW50cmllcy5wdXNoKFJlZGVsZWdhdGlvbkVudHJ5LmZyb21QYXJ0aWFsKGUpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjE4LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IxOC5mKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07CnZhciBiYXNlUGFyYW1zID0gewogIG1heFZhbGlkYXRvcnM6IDAsCiAgbWF4RW50cmllczogMCwKICBoaXN0b3JpY2FsRW50cmllczogMCwKICBib25kRGVub206ICIiCn07CmV4cG9ydCB2YXIgUGFyYW1zID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS51bmJvbmRpbmdUaW1lICE9PSB1bmRlZmluZWQpIHsKICAgICAgRHVyYXRpb24uZW5jb2RlKG1lc3NhZ2UudW5ib25kaW5nVGltZSwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5tYXhWYWxpZGF0b3JzICE9PSAwKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTYpLnVpbnQzMihtZXNzYWdlLm1heFZhbGlkYXRvcnMpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLm1heEVudHJpZXMgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigyNCkudWludDMyKG1lc3NhZ2UubWF4RW50cmllcyk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuaGlzdG9yaWNhbEVudHJpZXMgIT09IDApIHsKICAgICAgd3JpdGVyLnVpbnQzMigzMikudWludDMyKG1lc3NhZ2UuaGlzdG9yaWNhbEVudHJpZXMpOwogICAgfQoKICAgIGlmIChtZXNzYWdlLmJvbmREZW5vbSAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMig0Mikuc3RyaW5nKG1lc3NhZ2UuYm9uZERlbm9tKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VQYXJhbXMpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UudW5ib25kaW5nVGltZSA9IER1cmF0aW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5tYXhWYWxpZGF0b3JzID0gcmVhZGVyLnVpbnQzMigpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIG1lc3NhZ2UubWF4RW50cmllcyA9IHJlYWRlci51aW50MzIoKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBtZXNzYWdlLmhpc3RvcmljYWxFbnRyaWVzID0gcmVhZGVyLnVpbnQzMigpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNToKICAgICAgICAgIG1lc3NhZ2UuYm9uZERlbm9tID0gcmVhZGVyLnN0cmluZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgZnJvbUpTT046IGZ1bmN0aW9uIGZyb21KU09OKG9iamVjdCkgewogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUGFyYW1zKTsKCiAgICBpZiAob2JqZWN0LnVuYm9uZGluZ1RpbWUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudW5ib25kaW5nVGltZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLnVuYm9uZGluZ1RpbWUgPSBEdXJhdGlvbi5mcm9tSlNPTihvYmplY3QudW5ib25kaW5nVGltZSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLnVuYm9uZGluZ1RpbWUgPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5tYXhWYWxpZGF0b3JzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm1heFZhbGlkYXRvcnMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5tYXhWYWxpZGF0b3JzID0gTnVtYmVyKG9iamVjdC5tYXhWYWxpZGF0b3JzKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubWF4VmFsaWRhdG9ycyA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5tYXhFbnRyaWVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm1heEVudHJpZXMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5tYXhFbnRyaWVzID0gTnVtYmVyKG9iamVjdC5tYXhFbnRyaWVzKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubWF4RW50cmllcyA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5oaXN0b3JpY2FsRW50cmllcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5oaXN0b3JpY2FsRW50cmllcyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmhpc3RvcmljYWxFbnRyaWVzID0gTnVtYmVyKG9iamVjdC5oaXN0b3JpY2FsRW50cmllcyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmhpc3RvcmljYWxFbnRyaWVzID0gMDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmJvbmREZW5vbSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5ib25kRGVub20gIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5ib25kRGVub20gPSBTdHJpbmcob2JqZWN0LmJvbmREZW5vbSk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmJvbmREZW5vbSA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS51bmJvbmRpbmdUaW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai51bmJvbmRpbmdUaW1lID0gbWVzc2FnZS51bmJvbmRpbmdUaW1lID8gRHVyYXRpb24udG9KU09OKG1lc3NhZ2UudW5ib25kaW5nVGltZSkgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5tYXhWYWxpZGF0b3JzICE9PSB1bmRlZmluZWQgJiYgKG9iai5tYXhWYWxpZGF0b3JzID0gbWVzc2FnZS5tYXhWYWxpZGF0b3JzKTsKICAgIG1lc3NhZ2UubWF4RW50cmllcyAhPT0gdW5kZWZpbmVkICYmIChvYmoubWF4RW50cmllcyA9IG1lc3NhZ2UubWF4RW50cmllcyk7CiAgICBtZXNzYWdlLmhpc3RvcmljYWxFbnRyaWVzICE9PSB1bmRlZmluZWQgJiYgKG9iai5oaXN0b3JpY2FsRW50cmllcyA9IG1lc3NhZ2UuaGlzdG9yaWNhbEVudHJpZXMpOwogICAgbWVzc2FnZS5ib25kRGVub20gIT09IHVuZGVmaW5lZCAmJiAob2JqLmJvbmREZW5vbSA9IG1lc3NhZ2UuYm9uZERlbm9tKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VQYXJhbXMpOwoKICAgIGlmIChvYmplY3QudW5ib25kaW5nVGltZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC51bmJvbmRpbmdUaW1lICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UudW5ib25kaW5nVGltZSA9IER1cmF0aW9uLmZyb21QYXJ0aWFsKG9iamVjdC51bmJvbmRpbmdUaW1lKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UudW5ib25kaW5nVGltZSA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0Lm1heFZhbGlkYXRvcnMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QubWF4VmFsaWRhdG9ycyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLm1heFZhbGlkYXRvcnMgPSBvYmplY3QubWF4VmFsaWRhdG9yczsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UubWF4VmFsaWRhdG9ycyA9IDA7CiAgICB9CgogICAgaWYgKG9iamVjdC5tYXhFbnRyaWVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm1heEVudHJpZXMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5tYXhFbnRyaWVzID0gb2JqZWN0Lm1heEVudHJpZXM7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLm1heEVudHJpZXMgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuaGlzdG9yaWNhbEVudHJpZXMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaGlzdG9yaWNhbEVudHJpZXMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5oaXN0b3JpY2FsRW50cmllcyA9IG9iamVjdC5oaXN0b3JpY2FsRW50cmllczsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuaGlzdG9yaWNhbEVudHJpZXMgPSAwOwogICAgfQoKICAgIGlmIChvYmplY3QuYm9uZERlbm9tICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmJvbmREZW5vbSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmJvbmREZW5vbSA9IG9iamVjdC5ib25kRGVub207CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLmJvbmREZW5vbSA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VEZWxlZ2F0aW9uUmVzcG9uc2UgPSB7fTsKZXhwb3J0IHZhciBEZWxlZ2F0aW9uUmVzcG9uc2UgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLmRlbGVnYXRpb24gIT09IHVuZGVmaW5lZCkgewogICAgICBEZWxlZ2F0aW9uLmVuY29kZShtZXNzYWdlLmRlbGVnYXRpb24sIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7CiAgICB9CgogICAgaWYgKG1lc3NhZ2UuYmFsYW5jZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIENvaW4uZW5jb2RlKG1lc3NhZ2UuYmFsYW5jZSwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VEZWxlZ2F0aW9uUmVzcG9uc2UpOwoKICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7CiAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7CgogICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIG1lc3NhZ2UuZGVsZWdhdGlvbiA9IERlbGVnYXRpb24uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBtZXNzYWdlLmJhbGFuY2UgPSBDb2luLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VEZWxlZ2F0aW9uUmVzcG9uc2UpOwoKICAgIGlmIChvYmplY3QuZGVsZWdhdGlvbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kZWxlZ2F0aW9uICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGVsZWdhdGlvbiA9IERlbGVnYXRpb24uZnJvbUpTT04ob2JqZWN0LmRlbGVnYXRpb24pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5kZWxlZ2F0aW9uID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuYmFsYW5jZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5iYWxhbmNlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYmFsYW5jZSA9IENvaW4uZnJvbUpTT04ob2JqZWN0LmJhbGFuY2UpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5iYWxhbmNlID0gdW5kZWZpbmVkOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5kZWxlZ2F0aW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai5kZWxlZ2F0aW9uID0gbWVzc2FnZS5kZWxlZ2F0aW9uID8gRGVsZWdhdGlvbi50b0pTT04obWVzc2FnZS5kZWxlZ2F0aW9uKSA6IHVuZGVmaW5lZCk7CiAgICBtZXNzYWdlLmJhbGFuY2UgIT09IHVuZGVmaW5lZCAmJiAob2JqLmJhbGFuY2UgPSBtZXNzYWdlLmJhbGFuY2UgPyBDb2luLnRvSlNPTihtZXNzYWdlLmJhbGFuY2UpIDogdW5kZWZpbmVkKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VEZWxlZ2F0aW9uUmVzcG9uc2UpOwoKICAgIGlmIChvYmplY3QuZGVsZWdhdGlvbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kZWxlZ2F0aW9uICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuZGVsZWdhdGlvbiA9IERlbGVnYXRpb24uZnJvbVBhcnRpYWwob2JqZWN0LmRlbGVnYXRpb24pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5kZWxlZ2F0aW9uID0gdW5kZWZpbmVkOwogICAgfQoKICAgIGlmIChvYmplY3QuYmFsYW5jZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5iYWxhbmNlICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UuYmFsYW5jZSA9IENvaW4uZnJvbVBhcnRpYWwob2JqZWN0LmJhbGFuY2UpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5iYWxhbmNlID0gdW5kZWZpbmVkOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZWRlbGVnYXRpb25FbnRyeVJlc3BvbnNlID0gewogIGJhbGFuY2U6ICIiCn07CmV4cG9ydCB2YXIgUmVkZWxlZ2F0aW9uRW50cnlSZXNwb25zZSA9IHsKICBlbmNvZGU6IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlKSB7CiAgICB2YXIgd3JpdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBXcml0ZXIuY3JlYXRlKCk7CgogICAgaWYgKG1lc3NhZ2UucmVkZWxlZ2F0aW9uRW50cnkgIT09IHVuZGVmaW5lZCkgewogICAgICBSZWRlbGVnYXRpb25FbnRyeS5lbmNvZGUobWVzc2FnZS5yZWRlbGVnYXRpb25FbnRyeSwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5iYWxhbmNlICE9PSAiIikgewogICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS5iYWxhbmNlKTsKICAgIH0KCiAgICByZXR1cm4gd3JpdGVyOwogIH0sCiAgZGVjb2RlOiBmdW5jdGlvbiBkZWNvZGUoaW5wdXQsIGxlbmd0aCkgewogICAgdmFyIHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBSZWFkZXIoaW5wdXQpIDogaW5wdXQ7CiAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDsKCiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZWRlbGVnYXRpb25FbnRyeVJlc3BvbnNlKTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLnJlZGVsZWdhdGlvbkVudHJ5ID0gUmVkZWxlZ2F0aW9uRW50cnkuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBtZXNzYWdlLmJhbGFuY2UgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZWRlbGVnYXRpb25FbnRyeVJlc3BvbnNlKTsKCiAgICBpZiAob2JqZWN0LnJlZGVsZWdhdGlvbkVudHJ5ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnJlZGVsZWdhdGlvbkVudHJ5ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucmVkZWxlZ2F0aW9uRW50cnkgPSBSZWRlbGVnYXRpb25FbnRyeS5mcm9tSlNPTihvYmplY3QucmVkZWxlZ2F0aW9uRW50cnkpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5yZWRlbGVnYXRpb25FbnRyeSA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmJhbGFuY2UgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYmFsYW5jZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmJhbGFuY2UgPSBTdHJpbmcob2JqZWN0LmJhbGFuY2UpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5iYWxhbmNlID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLnJlZGVsZWdhdGlvbkVudHJ5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5yZWRlbGVnYXRpb25FbnRyeSA9IG1lc3NhZ2UucmVkZWxlZ2F0aW9uRW50cnkgPyBSZWRlbGVnYXRpb25FbnRyeS50b0pTT04obWVzc2FnZS5yZWRlbGVnYXRpb25FbnRyeSkgOiB1bmRlZmluZWQpOwogICAgbWVzc2FnZS5iYWxhbmNlICE9PSB1bmRlZmluZWQgJiYgKG9iai5iYWxhbmNlID0gbWVzc2FnZS5iYWxhbmNlKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZWRlbGVnYXRpb25FbnRyeVJlc3BvbnNlKTsKCiAgICBpZiAob2JqZWN0LnJlZGVsZWdhdGlvbkVudHJ5ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnJlZGVsZWdhdGlvbkVudHJ5ICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucmVkZWxlZ2F0aW9uRW50cnkgPSBSZWRlbGVnYXRpb25FbnRyeS5mcm9tUGFydGlhbChvYmplY3QucmVkZWxlZ2F0aW9uRW50cnkpOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5yZWRlbGVnYXRpb25FbnRyeSA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBpZiAob2JqZWN0LmJhbGFuY2UgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYmFsYW5jZSAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmJhbGFuY2UgPSBvYmplY3QuYmFsYW5jZTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYmFsYW5jZSA9ICIiOwogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VSZWRlbGVnYXRpb25SZXNwb25zZSA9IHt9OwpleHBvcnQgdmFyIFJlZGVsZWdhdGlvblJlc3BvbnNlID0gewogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UpIHsKICAgIHZhciB3cml0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFdyaXRlci5jcmVhdGUoKTsKCiAgICBpZiAobWVzc2FnZS5yZWRlbGVnYXRpb24gIT09IHVuZGVmaW5lZCkgewogICAgICBSZWRlbGVnYXRpb24uZW5jb2RlKG1lc3NhZ2UucmVkZWxlZ2F0aW9uLCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpOwogICAgfQoKICAgIHZhciBfaXRlcmF0b3IxOSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG1lc3NhZ2UuZW50cmllcyksCiAgICAgICAgX3N0ZXAxOTsKCiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvcjE5LnMoKTsgIShfc3RlcDE5ID0gX2l0ZXJhdG9yMTkubigpKS5kb25lOykgewogICAgICAgIHZhciB2ID0gX3N0ZXAxOS52YWx1ZTsKICAgICAgICBSZWRlbGVnYXRpb25FbnRyeVJlc3BvbnNlLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpOwogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yMTkuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yMTkuZigpOwogICAgfQoKICAgIHJldHVybiB3cml0ZXI7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7CiAgICB2YXIgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IFJlYWRlcihpbnB1dCkgOiBpbnB1dDsKICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoOwoKICAgIHZhciBtZXNzYWdlID0gX29iamVjdFNwcmVhZCh7fSwgYmFzZVJlZGVsZWdhdGlvblJlc3BvbnNlKTsKCiAgICBtZXNzYWdlLmVudHJpZXMgPSBbXTsKCiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkgewogICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpOwoKICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBtZXNzYWdlLnJlZGVsZWdhdGlvbiA9IFJlZGVsZWdhdGlvbi5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIG1lc3NhZ2UuZW50cmllcy5wdXNoKFJlZGVsZWdhdGlvbkVudHJ5UmVzcG9uc2UuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZWRlbGVnYXRpb25SZXNwb25zZSk7CgogICAgbWVzc2FnZS5lbnRyaWVzID0gW107CgogICAgaWYgKG9iamVjdC5yZWRlbGVnYXRpb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucmVkZWxlZ2F0aW9uICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucmVkZWxlZ2F0aW9uID0gUmVkZWxlZ2F0aW9uLmZyb21KU09OKG9iamVjdC5yZWRlbGVnYXRpb24pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5yZWRlbGVnYXRpb24gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5lbnRyaWVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmVudHJpZXMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjIwID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LmVudHJpZXMpLAogICAgICAgICAgX3N0ZXAyMDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IyMC5zKCk7ICEoX3N0ZXAyMCA9IF9pdGVyYXRvcjIwLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAyMC52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UuZW50cmllcy5wdXNoKFJlZGVsZWdhdGlvbkVudHJ5UmVzcG9uc2UuZnJvbUpTT04oZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMjAuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjIwLmYoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0sCiAgdG9KU09OOiBmdW5jdGlvbiB0b0pTT04obWVzc2FnZSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgbWVzc2FnZS5yZWRlbGVnYXRpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLnJlZGVsZWdhdGlvbiA9IG1lc3NhZ2UucmVkZWxlZ2F0aW9uID8gUmVkZWxlZ2F0aW9uLnRvSlNPTihtZXNzYWdlLnJlZGVsZWdhdGlvbikgOiB1bmRlZmluZWQpOwoKICAgIGlmIChtZXNzYWdlLmVudHJpZXMpIHsKICAgICAgb2JqLmVudHJpZXMgPSBtZXNzYWdlLmVudHJpZXMubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUgPyBSZWRlbGVnYXRpb25FbnRyeVJlc3BvbnNlLnRvSlNPTihlKSA6IHVuZGVmaW5lZDsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBvYmouZW50cmllcyA9IFtdOwogICAgfQoKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VSZWRlbGVnYXRpb25SZXNwb25zZSk7CgogICAgbWVzc2FnZS5lbnRyaWVzID0gW107CgogICAgaWYgKG9iamVjdC5yZWRlbGVnYXRpb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucmVkZWxlZ2F0aW9uICE9PSBudWxsKSB7CiAgICAgIG1lc3NhZ2UucmVkZWxlZ2F0aW9uID0gUmVkZWxlZ2F0aW9uLmZyb21QYXJ0aWFsKG9iamVjdC5yZWRlbGVnYXRpb24pOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5yZWRlbGVnYXRpb24gPSB1bmRlZmluZWQ7CiAgICB9CgogICAgaWYgKG9iamVjdC5lbnRyaWVzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmVudHJpZXMgIT09IG51bGwpIHsKICAgICAgdmFyIF9pdGVyYXRvcjIxID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqZWN0LmVudHJpZXMpLAogICAgICAgICAgX3N0ZXAyMTsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IyMS5zKCk7ICEoX3N0ZXAyMSA9IF9pdGVyYXRvcjIxLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBlID0gX3N0ZXAyMS52YWx1ZTsKICAgICAgICAgIG1lc3NhZ2UuZW50cmllcy5wdXNoKFJlZGVsZWdhdGlvbkVudHJ5UmVzcG9uc2UuZnJvbVBhcnRpYWwoZSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMjEuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjIxLmYoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBtZXNzYWdlOwogIH0KfTsKdmFyIGJhc2VQb29sID0gewogIG5vdEJvbmRlZFRva2VuczogIiIsCiAgYm9uZGVkVG9rZW5zOiAiIgp9OwpleHBvcnQgdmFyIFBvb2wgPSB7CiAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSkgewogICAgdmFyIHdyaXRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogV3JpdGVyLmNyZWF0ZSgpOwoKICAgIGlmIChtZXNzYWdlLm5vdEJvbmRlZFRva2VucyAhPT0gIiIpIHsKICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uubm90Qm9uZGVkVG9rZW5zKTsKICAgIH0KCiAgICBpZiAobWVzc2FnZS5ib25kZWRUb2tlbnMgIT09ICIiKSB7CiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLmJvbmRlZFRva2Vucyk7CiAgICB9CgogICAgcmV0dXJuIHdyaXRlcjsKICB9LAogIGRlY29kZTogZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBsZW5ndGgpIHsKICAgIHZhciByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgUmVhZGVyKGlucHV0KSA6IGlucHV0OwogICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7CgogICAgdmFyIG1lc3NhZ2UgPSBfb2JqZWN0U3ByZWFkKHt9LCBiYXNlUG9vbCk7CgogICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHsKICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTsKCiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgbWVzc2FnZS5ub3RCb25kZWRUb2tlbnMgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgbWVzc2FnZS5ib25kZWRUb2tlbnMgPSByZWFkZXIuc3RyaW5nKCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICBmcm9tSlNPTjogZnVuY3Rpb24gZnJvbUpTT04ob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VQb29sKTsKCiAgICBpZiAob2JqZWN0Lm5vdEJvbmRlZFRva2VucyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5ub3RCb25kZWRUb2tlbnMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5ub3RCb25kZWRUb2tlbnMgPSBTdHJpbmcob2JqZWN0Lm5vdEJvbmRlZFRva2Vucyk7CiAgICB9IGVsc2UgewogICAgICBtZXNzYWdlLm5vdEJvbmRlZFRva2VucyA9ICIiOwogICAgfQoKICAgIGlmIChvYmplY3QuYm9uZGVkVG9rZW5zICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmJvbmRlZFRva2VucyAhPT0gbnVsbCkgewogICAgICBtZXNzYWdlLmJvbmRlZFRva2VucyA9IFN0cmluZyhvYmplY3QuYm9uZGVkVG9rZW5zKTsKICAgIH0gZWxzZSB7CiAgICAgIG1lc3NhZ2UuYm9uZGVkVG9rZW5zID0gIiI7CiAgICB9CgogICAgcmV0dXJuIG1lc3NhZ2U7CiAgfSwKICB0b0pTT046IGZ1bmN0aW9uIHRvSlNPTihtZXNzYWdlKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBtZXNzYWdlLm5vdEJvbmRlZFRva2VucyAhPT0gdW5kZWZpbmVkICYmIChvYmoubm90Qm9uZGVkVG9rZW5zID0gbWVzc2FnZS5ub3RCb25kZWRUb2tlbnMpOwogICAgbWVzc2FnZS5ib25kZWRUb2tlbnMgIT09IHVuZGVmaW5lZCAmJiAob2JqLmJvbmRlZFRva2VucyA9IG1lc3NhZ2UuYm9uZGVkVG9rZW5zKTsKICAgIHJldHVybiBvYmo7CiAgfSwKICBmcm9tUGFydGlhbDogZnVuY3Rpb24gZnJvbVBhcnRpYWwob2JqZWN0KSB7CiAgICB2YXIgbWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoe30sIGJhc2VQb29sKTsKCiAgICBpZiAob2JqZWN0Lm5vdEJvbmRlZFRva2VucyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5ub3RCb25kZWRUb2tlbnMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5ub3RCb25kZWRUb2tlbnMgPSBvYmplY3Qubm90Qm9uZGVkVG9rZW5zOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5ub3RCb25kZWRUb2tlbnMgPSAiIjsKICAgIH0KCiAgICBpZiAob2JqZWN0LmJvbmRlZFRva2VucyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5ib25kZWRUb2tlbnMgIT09IG51bGwpIHsKICAgICAgbWVzc2FnZS5ib25kZWRUb2tlbnMgPSBvYmplY3QuYm9uZGVkVG9rZW5zOwogICAgfSBlbHNlIHsKICAgICAgbWVzc2FnZS5ib25kZWRUb2tlbnMgPSAiIjsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZTsKICB9Cn07Cgp2YXIgZ2xvYmFsVGhpcyA9IGZ1bmN0aW9uICgpIHsKICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09ICJ1bmRlZmluZWQiKSByZXR1cm4gZ2xvYmFsVGhpczsKICBpZiAodHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiKSByZXR1cm4gc2VsZjsKICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIpIHJldHVybiB3aW5kb3c7CiAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiKSByZXR1cm4gZ2xvYmFsOwogIHRocm93ICJVbmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QiOwp9KCk7CgpmdW5jdGlvbiB0b1RpbWVzdGFtcChkYXRlKSB7CiAgdmFyIHNlY29uZHMgPSBkYXRlLmdldFRpbWUoKSAvIDEwMDA7CiAgdmFyIG5hbm9zID0gZGF0ZS5nZXRUaW1lKCkgJSAxMDAwICogMTAwMDAwMDsKICByZXR1cm4gewogICAgc2Vjb25kczogc2Vjb25kcywKICAgIG5hbm9zOiBuYW5vcwogIH07Cn0KCmZ1bmN0aW9uIGZyb21UaW1lc3RhbXAodCkgewogIHZhciBtaWxsaXMgPSB0LnNlY29uZHMgKiAxMDAwOwogIG1pbGxpcyArPSB0Lm5hbm9zIC8gMTAwMDAwMDsKICByZXR1cm4gbmV3IERhdGUobWlsbGlzKTsKfQoKZnVuY3Rpb24gZnJvbUpzb25UaW1lc3RhbXAobykgewogIGlmIChvIGluc3RhbmNlb2YgRGF0ZSkgewogICAgcmV0dXJuIG87CiAgfSBlbHNlIGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHsKICAgIHJldHVybiBuZXcgRGF0ZShvKTsKICB9IGVsc2UgewogICAgcmV0dXJuIGZyb21UaW1lc3RhbXAoVGltZXN0YW1wLmZyb21KU09OKG8pKTsKICB9Cn0KCmZ1bmN0aW9uIGxvbmdUb051bWJlcihfbG9uZykgewogIGlmIChfbG9uZy5ndChOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikpIHsKICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKCJWYWx1ZSBpcyBsYXJnZXIgdGhhbiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiIpOwogIH0KCiAgcmV0dXJuIF9sb25nLnRvTnVtYmVyKCk7Cn0KCmlmICh1dGlsLkxvbmcgIT09IExvbmcpIHsKICB1dGlsLkxvbmcgPSBMb25nOwogIGNvbmZpZ3VyZSgpOwp9"},{"version":3,"sources":["/home/ubuntu/starport-gravity/vue/src/store/generated/cosmos/cosmos-sdk/cosmos.staking.v1beta1/module/types/cosmos/staking/v1beta1/staking.js"],"names":["Timestamp","Long","util","configure","Writer","Reader","Header","Any","Duration","Coin","protobufPackage","BondStatus","bondStatusFromJSON","object","BOND_STATUS_UNSPECIFIED","BOND_STATUS_UNBONDED","BOND_STATUS_UNBONDING","BOND_STATUS_BONDED","UNRECOGNIZED","bondStatusToJSON","baseHistoricalInfo","HistoricalInfo","encode","message","writer","create","header","undefined","uint32","fork","ldelim","valset","v","Validator","decode","input","length","reader","Uint8Array","end","len","pos","tag","push","skipType","fromJSON","e","toJSON","obj","map","fromPartial","baseCommissionRates","rate","maxRate","maxChangeRate","CommissionRates","string","String","baseCommission","Commission","commissionRates","updateTime","toTimestamp","fromTimestamp","fromJsonTimestamp","toISOString","baseDescription","moniker","identity","website","securityContact","details","Description","baseValidator","operatorAddress","jailed","status","tokens","delegatorShares","unbondingHeight","minSelfDelegation","consensusPubkey","bool","int32","description","int64","unbondingTime","commission","longToNumber","Boolean","Number","baseValAddresses","addresses","ValAddresses","baseDVPair","delegatorAddress","validatorAddress","DVPair","baseDVPairs","DVPairs","pairs","baseDVVTriplet","validatorSrcAddress","validatorDstAddress","DVVTriplet","baseDVVTriplets","DVVTriplets","triplets","baseDelegation","shares","Delegation","baseUnbondingDelegation","UnbondingDelegation","entries","UnbondingDelegationEntry","baseUnbondingDelegationEntry","creationHeight","initialBalance","balance","completionTime","baseRedelegationEntry","sharesDst","RedelegationEntry","baseRedelegation","Redelegation","baseParams","maxValidators","maxEntries","historicalEntries","bondDenom","Params","baseDelegationResponse","DelegationResponse","delegation","baseRedelegationEntryResponse","RedelegationEntryResponse","redelegationEntry","baseRedelegationResponse","RedelegationResponse","redelegation","basePool","notBondedTokens","bondedTokens","Pool","globalThis","self","window","global","date","seconds","getTime","nanos","t","millis","Date","o","long","gt","MAX_SAFE_INTEGER","Error","toNumber"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA,SAASA,SAAT,QAA0B,oCAA1B;AACA,OAAO,KAAKC,IAAZ,MAAsB,MAAtB;AACA,SAASC,IAAT,EAAeC,SAAf,EAA0BC,MAA1B,EAAkCC,MAAlC,QAAgD,oBAAhD;AACA,SAASC,MAAT,QAAuB,iCAAvB;AACA,SAASC,GAAT,QAAoB,8BAApB;AACA,SAASC,QAAT,QAAyB,mCAAzB;AACA,SAASC,IAAT,QAAqB,mCAArB;AACA,OAAO,IAAMC,eAAe,GAAG,wBAAxB;AACP;;AACA,OAAO,IAAIC,UAAJ;;AACP,CAAC,UAAUA,UAAV,EAAsB;AACnB;AACAA,EAAAA,UAAU,CAACA,UAAU,CAAC,yBAAD,CAAV,GAAwC,CAAzC,CAAV,GAAwD,yBAAxD;AACA;;AACAA,EAAAA,UAAU,CAACA,UAAU,CAAC,sBAAD,CAAV,GAAqC,CAAtC,CAAV,GAAqD,sBAArD;AACA;;AACAA,EAAAA,UAAU,CAACA,UAAU,CAAC,uBAAD,CAAV,GAAsC,CAAvC,CAAV,GAAsD,uBAAtD;AACA;;AACAA,EAAAA,UAAU,CAACA,UAAU,CAAC,oBAAD,CAAV,GAAmC,CAApC,CAAV,GAAmD,oBAAnD;AACAA,EAAAA,UAAU,CAACA,UAAU,CAAC,cAAD,CAAV,GAA6B,CAAC,CAA/B,CAAV,GAA8C,cAA9C;AACH,CAVD,EAUGA,UAAU,KAAKA,UAAU,GAAG,EAAlB,CAVb;;AAWA,OAAO,SAASC,kBAAT,CAA4BC,MAA5B,EAAoC;AACvC,UAAQA,MAAR;AACI,SAAK,CAAL;AACA,SAAK,yBAAL;AACI,aAAOF,UAAU,CAACG,uBAAlB;;AACJ,SAAK,CAAL;AACA,SAAK,sBAAL;AACI,aAAOH,UAAU,CAACI,oBAAlB;;AACJ,SAAK,CAAL;AACA,SAAK,uBAAL;AACI,aAAOJ,UAAU,CAACK,qBAAlB;;AACJ,SAAK,CAAL;AACA,SAAK,oBAAL;AACI,aAAOL,UAAU,CAACM,kBAAlB;;AACJ,SAAK,CAAC,CAAN;AACA,SAAK,cAAL;AACA;AACI,aAAON,UAAU,CAACO,YAAlB;AAhBR;AAkBH;AACD,OAAO,SAASC,gBAAT,CAA0BN,MAA1B,EAAkC;AACrC,UAAQA,MAAR;AACI,SAAKF,UAAU,CAACG,uBAAhB;AACI,aAAO,yBAAP;;AACJ,SAAKH,UAAU,CAACI,oBAAhB;AACI,aAAO,sBAAP;;AACJ,SAAKJ,UAAU,CAACK,qBAAhB;AACI,aAAO,uBAAP;;AACJ,SAAKL,UAAU,CAACM,kBAAhB;AACI,aAAO,oBAAP;;AACJ;AACI,aAAO,SAAP;AAVR;AAYH;AACD,IAAMG,kBAAkB,GAAG,EAA3B;AACA,OAAO,IAAMC,cAAc,GAAG;AAC1BC,EAAAA,MAD0B,kBACnBC,OADmB,EACgB;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACG,MAAR,KAAmBC,SAAvB,EAAkC;AAC9BrB,MAAAA,MAAM,CAACgB,MAAP,CAAcC,OAAO,CAACG,MAAtB,EAA8BF,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA9B,EAAwDC,MAAxD;AACH;;AAHqC,+CAItBP,OAAO,CAACQ,MAJc;AAAA;;AAAA;AAItC,0DAAgC;AAAA,YAArBC,CAAqB;AAC5BC,QAAAA,SAAS,CAACX,MAAV,CAAiBU,CAAjB,EAAoBR,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAApB,EAA8CC,MAA9C;AACH;AANqC;AAAA;AAAA;AAAA;AAAA;;AAOtC,WAAON,MAAP;AACH,GATyB;AAU1BU,EAAAA,MAV0B,kBAUnBC,KAVmB,EAUZC,MAVY,EAUJ;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQH,kBAAR,CAAb;;AACAG,IAAAA,OAAO,CAACQ,MAAR,GAAiB,EAAjB;;AACA,WAAOM,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAACG,MAAR,GAAiBpB,MAAM,CAAC4B,MAAP,CAAcG,MAAd,EAAsBA,MAAM,CAACT,MAAP,EAAtB,CAAjB;AACA;;AACJ,aAAK,CAAL;AACIL,UAAAA,OAAO,CAACQ,MAAR,CAAeY,IAAf,CAAoBV,SAAS,CAACC,MAAV,CAAiBG,MAAjB,EAAyBA,MAAM,CAACT,MAAP,EAAzB,CAApB;AACA;;AACJ;AACIS,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AATR;AAWH;;AACD,WAAOnB,OAAP;AACH,GA9ByB;AA+B1BsB,EAAAA,QA/B0B,oBA+BjBhC,MA/BiB,EA+BT;AACb,QAAMU,OAAO,qBAAQH,kBAAR,CAAb;;AACAG,IAAAA,OAAO,CAACQ,MAAR,GAAiB,EAAjB;;AACA,QAAIlB,MAAM,CAACa,MAAP,KAAkBC,SAAlB,IAA+Bd,MAAM,CAACa,MAAP,KAAkB,IAArD,EAA2D;AACvDH,MAAAA,OAAO,CAACG,MAAR,GAAiBpB,MAAM,CAACuC,QAAP,CAAgBhC,MAAM,CAACa,MAAvB,CAAjB;AACH,KAFD,MAGK;AACDH,MAAAA,OAAO,CAACG,MAAR,GAAiBC,SAAjB;AACH;;AACD,QAAId,MAAM,CAACkB,MAAP,KAAkBJ,SAAlB,IAA+Bd,MAAM,CAACkB,MAAP,KAAkB,IAArD,EAA2D;AAAA,kDACvClB,MAAM,CAACkB,MADgC;AAAA;;AAAA;AACvD,+DAA+B;AAAA,cAApBe,CAAoB;AAC3BvB,UAAAA,OAAO,CAACQ,MAAR,CAAeY,IAAf,CAAoBV,SAAS,CAACY,QAAV,CAAmBC,CAAnB,CAApB;AACH;AAHsD;AAAA;AAAA;AAAA;AAAA;AAI1D;;AACD,WAAOvB,OAAP;AACH,GA9CyB;AA+C1BwB,EAAAA,MA/C0B,kBA+CnBxB,OA/CmB,EA+CV;AACZ,QAAMyB,GAAG,GAAG,EAAZ;AACAzB,IAAAA,OAAO,CAACG,MAAR,KAAmBC,SAAnB,KACKqB,GAAG,CAACtB,MAAJ,GAAaH,OAAO,CAACG,MAAR,GAAiBpB,MAAM,CAACyC,MAAP,CAAcxB,OAAO,CAACG,MAAtB,CAAjB,GAAiDC,SADnE;;AAEA,QAAIJ,OAAO,CAACQ,MAAZ,EAAoB;AAChBiB,MAAAA,GAAG,CAACjB,MAAJ,GAAaR,OAAO,CAACQ,MAAR,CAAekB,GAAf,CAAmB,UAACH,CAAD;AAAA,eAAOA,CAAC,GAAGb,SAAS,CAACc,MAAV,CAAiBD,CAAjB,CAAH,GAAyBnB,SAAjC;AAAA,OAAnB,CAAb;AACH,KAFD,MAGK;AACDqB,MAAAA,GAAG,CAACjB,MAAJ,GAAa,EAAb;AACH;;AACD,WAAOiB,GAAP;AACH,GA1DyB;AA2D1BE,EAAAA,WA3D0B,uBA2DdrC,MA3Dc,EA2DN;AAChB,QAAMU,OAAO,qBAAQH,kBAAR,CAAb;;AACAG,IAAAA,OAAO,CAACQ,MAAR,GAAiB,EAAjB;;AACA,QAAIlB,MAAM,CAACa,MAAP,KAAkBC,SAAlB,IAA+Bd,MAAM,CAACa,MAAP,KAAkB,IAArD,EAA2D;AACvDH,MAAAA,OAAO,CAACG,MAAR,GAAiBpB,MAAM,CAAC4C,WAAP,CAAmBrC,MAAM,CAACa,MAA1B,CAAjB;AACH,KAFD,MAGK;AACDH,MAAAA,OAAO,CAACG,MAAR,GAAiBC,SAAjB;AACH;;AACD,QAAId,MAAM,CAACkB,MAAP,KAAkBJ,SAAlB,IAA+Bd,MAAM,CAACkB,MAAP,KAAkB,IAArD,EAA2D;AAAA,kDACvClB,MAAM,CAACkB,MADgC;AAAA;;AAAA;AACvD,+DAA+B;AAAA,cAApBe,CAAoB;AAC3BvB,UAAAA,OAAO,CAACQ,MAAR,CAAeY,IAAf,CAAoBV,SAAS,CAACiB,WAAV,CAAsBJ,CAAtB,CAApB;AACH;AAHsD;AAAA;AAAA;AAAA;AAAA;AAI1D;;AACD,WAAOvB,OAAP;AACH;AA1EyB,CAAvB;AA4EP,IAAM4B,mBAAmB,GAAG;AACxBC,EAAAA,IAAI,EAAE,EADkB;AAExBC,EAAAA,OAAO,EAAE,EAFe;AAGxBC,EAAAA,aAAa,EAAE;AAHS,CAA5B;AAKA,OAAO,IAAMC,eAAe,GAAG;AAC3BjC,EAAAA,MAD2B,kBACpBC,OADoB,EACe;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAAC6B,IAAR,KAAiB,EAArB,EAAyB;AACrB5B,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAAC6B,IAAjC;AACH;;AACD,QAAI7B,OAAO,CAAC8B,OAAR,KAAoB,EAAxB,EAA4B;AACxB7B,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAAC8B,OAAjC;AACH;;AACD,QAAI9B,OAAO,CAAC+B,aAAR,KAA0B,EAA9B,EAAkC;AAC9B9B,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAAC+B,aAAjC;AACH;;AACD,WAAO9B,MAAP;AACH,GAZ0B;AAa3BU,EAAAA,MAb2B,kBAapBC,KAboB,EAabC,MAba,EAaL;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQ4B,mBAAR,CAAb;;AACA,WAAOd,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAAC6B,IAAR,GAAef,MAAM,CAACmB,MAAP,EAAf;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAAC8B,OAAR,GAAkBhB,MAAM,CAACmB,MAAP,EAAlB;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAAC+B,aAAR,GAAwBjB,MAAM,CAACmB,MAAP,EAAxB;AACA;;AACJ;AACInB,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AAZR;AAcH;;AACD,WAAOnB,OAAP;AACH,GAnC0B;AAoC3BsB,EAAAA,QApC2B,oBAoClBhC,MApCkB,EAoCV;AACb,QAAMU,OAAO,qBAAQ4B,mBAAR,CAAb;;AACA,QAAItC,MAAM,CAACuC,IAAP,KAAgBzB,SAAhB,IAA6Bd,MAAM,CAACuC,IAAP,KAAgB,IAAjD,EAAuD;AACnD7B,MAAAA,OAAO,CAAC6B,IAAR,GAAeK,MAAM,CAAC5C,MAAM,CAACuC,IAAR,CAArB;AACH,KAFD,MAGK;AACD7B,MAAAA,OAAO,CAAC6B,IAAR,GAAe,EAAf;AACH;;AACD,QAAIvC,MAAM,CAACwC,OAAP,KAAmB1B,SAAnB,IAAgCd,MAAM,CAACwC,OAAP,KAAmB,IAAvD,EAA6D;AACzD9B,MAAAA,OAAO,CAAC8B,OAAR,GAAkBI,MAAM,CAAC5C,MAAM,CAACwC,OAAR,CAAxB;AACH,KAFD,MAGK;AACD9B,MAAAA,OAAO,CAAC8B,OAAR,GAAkB,EAAlB;AACH;;AACD,QAAIxC,MAAM,CAACyC,aAAP,KAAyB3B,SAAzB,IAAsCd,MAAM,CAACyC,aAAP,KAAyB,IAAnE,EAAyE;AACrE/B,MAAAA,OAAO,CAAC+B,aAAR,GAAwBG,MAAM,CAAC5C,MAAM,CAACyC,aAAR,CAA9B;AACH,KAFD,MAGK;AACD/B,MAAAA,OAAO,CAAC+B,aAAR,GAAwB,EAAxB;AACH;;AACD,WAAO/B,OAAP;AACH,GAzD0B;AA0D3BwB,EAAAA,MA1D2B,kBA0DpBxB,OA1DoB,EA0DX;AACZ,QAAMyB,GAAG,GAAG,EAAZ;AACAzB,IAAAA,OAAO,CAAC6B,IAAR,KAAiBzB,SAAjB,KAA+BqB,GAAG,CAACI,IAAJ,GAAW7B,OAAO,CAAC6B,IAAlD;AACA7B,IAAAA,OAAO,CAAC8B,OAAR,KAAoB1B,SAApB,KAAkCqB,GAAG,CAACK,OAAJ,GAAc9B,OAAO,CAAC8B,OAAxD;AACA9B,IAAAA,OAAO,CAAC+B,aAAR,KAA0B3B,SAA1B,KACKqB,GAAG,CAACM,aAAJ,GAAoB/B,OAAO,CAAC+B,aADjC;AAEA,WAAON,GAAP;AACH,GAjE0B;AAkE3BE,EAAAA,WAlE2B,uBAkEfrC,MAlEe,EAkEP;AAChB,QAAMU,OAAO,qBAAQ4B,mBAAR,CAAb;;AACA,QAAItC,MAAM,CAACuC,IAAP,KAAgBzB,SAAhB,IAA6Bd,MAAM,CAACuC,IAAP,KAAgB,IAAjD,EAAuD;AACnD7B,MAAAA,OAAO,CAAC6B,IAAR,GAAevC,MAAM,CAACuC,IAAtB;AACH,KAFD,MAGK;AACD7B,MAAAA,OAAO,CAAC6B,IAAR,GAAe,EAAf;AACH;;AACD,QAAIvC,MAAM,CAACwC,OAAP,KAAmB1B,SAAnB,IAAgCd,MAAM,CAACwC,OAAP,KAAmB,IAAvD,EAA6D;AACzD9B,MAAAA,OAAO,CAAC8B,OAAR,GAAkBxC,MAAM,CAACwC,OAAzB;AACH,KAFD,MAGK;AACD9B,MAAAA,OAAO,CAAC8B,OAAR,GAAkB,EAAlB;AACH;;AACD,QAAIxC,MAAM,CAACyC,aAAP,KAAyB3B,SAAzB,IAAsCd,MAAM,CAACyC,aAAP,KAAyB,IAAnE,EAAyE;AACrE/B,MAAAA,OAAO,CAAC+B,aAAR,GAAwBzC,MAAM,CAACyC,aAA/B;AACH,KAFD,MAGK;AACD/B,MAAAA,OAAO,CAAC+B,aAAR,GAAwB,EAAxB;AACH;;AACD,WAAO/B,OAAP;AACH;AAvF0B,CAAxB;AAyFP,IAAMmC,cAAc,GAAG,EAAvB;AACA,OAAO,IAAMC,UAAU,GAAG;AACtBrC,EAAAA,MADsB,kBACfC,OADe,EACoB;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACqC,eAAR,KAA4BjC,SAAhC,EAA2C;AACvC4B,MAAAA,eAAe,CAACjC,MAAhB,CAAuBC,OAAO,CAACqC,eAA/B,EAAgDpC,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAhD,EAA0EC,MAA1E;AACH;;AACD,QAAIP,OAAO,CAACsC,UAAR,KAAuBlC,SAA3B,EAAsC;AAClC3B,MAAAA,SAAS,CAACsB,MAAV,CAAiBwC,WAAW,CAACvC,OAAO,CAACsC,UAAT,CAA5B,EAAkDrC,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAlD,EAA4EC,MAA5E;AACH;;AACD,WAAON,MAAP;AACH,GATqB;AAUtBU,EAAAA,MAVsB,kBAUfC,KAVe,EAURC,MAVQ,EAUA;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQmC,cAAR,CAAb;;AACA,WAAOrB,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAACqC,eAAR,GAA0BL,eAAe,CAACrB,MAAhB,CAAuBG,MAAvB,EAA+BA,MAAM,CAACT,MAAP,EAA/B,CAA1B;AACA;;AACJ,aAAK,CAAL;AACIL,UAAAA,OAAO,CAACsC,UAAR,GAAqBE,aAAa,CAAC/D,SAAS,CAACkC,MAAV,CAAiBG,MAAjB,EAAyBA,MAAM,CAACT,MAAP,EAAzB,CAAD,CAAlC;AACA;;AACJ;AACIS,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AATR;AAWH;;AACD,WAAOnB,OAAP;AACH,GA7BqB;AA8BtBsB,EAAAA,QA9BsB,oBA8BbhC,MA9Ba,EA8BL;AACb,QAAMU,OAAO,qBAAQmC,cAAR,CAAb;;AACA,QAAI7C,MAAM,CAAC+C,eAAP,KAA2BjC,SAA3B,IACAd,MAAM,CAAC+C,eAAP,KAA2B,IAD/B,EACqC;AACjCrC,MAAAA,OAAO,CAACqC,eAAR,GAA0BL,eAAe,CAACV,QAAhB,CAAyBhC,MAAM,CAAC+C,eAAhC,CAA1B;AACH,KAHD,MAIK;AACDrC,MAAAA,OAAO,CAACqC,eAAR,GAA0BjC,SAA1B;AACH;;AACD,QAAId,MAAM,CAACgD,UAAP,KAAsBlC,SAAtB,IAAmCd,MAAM,CAACgD,UAAP,KAAsB,IAA7D,EAAmE;AAC/DtC,MAAAA,OAAO,CAACsC,UAAR,GAAqBG,iBAAiB,CAACnD,MAAM,CAACgD,UAAR,CAAtC;AACH,KAFD,MAGK;AACDtC,MAAAA,OAAO,CAACsC,UAAR,GAAqBlC,SAArB;AACH;;AACD,WAAOJ,OAAP;AACH,GA9CqB;AA+CtBwB,EAAAA,MA/CsB,kBA+CfxB,OA/Ce,EA+CN;AACZ,QAAMyB,GAAG,GAAG,EAAZ;AACAzB,IAAAA,OAAO,CAACqC,eAAR,KAA4BjC,SAA5B,KACKqB,GAAG,CAACY,eAAJ,GAAsBrC,OAAO,CAACqC,eAAR,GACjBL,eAAe,CAACR,MAAhB,CAAuBxB,OAAO,CAACqC,eAA/B,CADiB,GAEjBjC,SAHV;AAIAJ,IAAAA,OAAO,CAACsC,UAAR,KAAuBlC,SAAvB,KACKqB,GAAG,CAACa,UAAJ,GACGtC,OAAO,CAACsC,UAAR,KAAuBlC,SAAvB,GACMJ,OAAO,CAACsC,UAAR,CAAmBI,WAAnB,EADN,GAEM,IAJd;AAKA,WAAOjB,GAAP;AACH,GA3DqB;AA4DtBE,EAAAA,WA5DsB,uBA4DVrC,MA5DU,EA4DF;AAChB,QAAMU,OAAO,qBAAQmC,cAAR,CAAb;;AACA,QAAI7C,MAAM,CAAC+C,eAAP,KAA2BjC,SAA3B,IACAd,MAAM,CAAC+C,eAAP,KAA2B,IAD/B,EACqC;AACjCrC,MAAAA,OAAO,CAACqC,eAAR,GAA0BL,eAAe,CAACL,WAAhB,CAA4BrC,MAAM,CAAC+C,eAAnC,CAA1B;AACH,KAHD,MAIK;AACDrC,MAAAA,OAAO,CAACqC,eAAR,GAA0BjC,SAA1B;AACH;;AACD,QAAId,MAAM,CAACgD,UAAP,KAAsBlC,SAAtB,IAAmCd,MAAM,CAACgD,UAAP,KAAsB,IAA7D,EAAmE;AAC/DtC,MAAAA,OAAO,CAACsC,UAAR,GAAqBhD,MAAM,CAACgD,UAA5B;AACH,KAFD,MAGK;AACDtC,MAAAA,OAAO,CAACsC,UAAR,GAAqBlC,SAArB;AACH;;AACD,WAAOJ,OAAP;AACH;AA5EqB,CAAnB;AA8EP,IAAM2C,eAAe,GAAG;AACpBC,EAAAA,OAAO,EAAE,EADW;AAEpBC,EAAAA,QAAQ,EAAE,EAFU;AAGpBC,EAAAA,OAAO,EAAE,EAHW;AAIpBC,EAAAA,eAAe,EAAE,EAJG;AAKpBC,EAAAA,OAAO,EAAE;AALW,CAAxB;AAOA,OAAO,IAAMC,WAAW,GAAG;AACvBlD,EAAAA,MADuB,kBAChBC,OADgB,EACmB;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAAC4C,OAAR,KAAoB,EAAxB,EAA4B;AACxB3C,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAAC4C,OAAjC;AACH;;AACD,QAAI5C,OAAO,CAAC6C,QAAR,KAAqB,EAAzB,EAA6B;AACzB5C,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAAC6C,QAAjC;AACH;;AACD,QAAI7C,OAAO,CAAC8C,OAAR,KAAoB,EAAxB,EAA4B;AACxB7C,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAAC8C,OAAjC;AACH;;AACD,QAAI9C,OAAO,CAAC+C,eAAR,KAA4B,EAAhC,EAAoC;AAChC9C,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAAC+C,eAAjC;AACH;;AACD,QAAI/C,OAAO,CAACgD,OAAR,KAAoB,EAAxB,EAA4B;AACxB/C,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACgD,OAAjC;AACH;;AACD,WAAO/C,MAAP;AACH,GAlBsB;AAmBvBU,EAAAA,MAnBuB,kBAmBhBC,KAnBgB,EAmBTC,MAnBS,EAmBD;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQ2C,eAAR,CAAb;;AACA,WAAO7B,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAAC4C,OAAR,GAAkB9B,MAAM,CAACmB,MAAP,EAAlB;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAAC6C,QAAR,GAAmB/B,MAAM,CAACmB,MAAP,EAAnB;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAAC8C,OAAR,GAAkBhC,MAAM,CAACmB,MAAP,EAAlB;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAAC+C,eAAR,GAA0BjC,MAAM,CAACmB,MAAP,EAA1B;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAACgD,OAAR,GAAkBlC,MAAM,CAACmB,MAAP,EAAlB;AACA;;AACJ;AACInB,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AAlBR;AAoBH;;AACD,WAAOnB,OAAP;AACH,GA/CsB;AAgDvBsB,EAAAA,QAhDuB,oBAgDdhC,MAhDc,EAgDN;AACb,QAAMU,OAAO,qBAAQ2C,eAAR,CAAb;;AACA,QAAIrD,MAAM,CAACsD,OAAP,KAAmBxC,SAAnB,IAAgCd,MAAM,CAACsD,OAAP,KAAmB,IAAvD,EAA6D;AACzD5C,MAAAA,OAAO,CAAC4C,OAAR,GAAkBV,MAAM,CAAC5C,MAAM,CAACsD,OAAR,CAAxB;AACH,KAFD,MAGK;AACD5C,MAAAA,OAAO,CAAC4C,OAAR,GAAkB,EAAlB;AACH;;AACD,QAAItD,MAAM,CAACuD,QAAP,KAAoBzC,SAApB,IAAiCd,MAAM,CAACuD,QAAP,KAAoB,IAAzD,EAA+D;AAC3D7C,MAAAA,OAAO,CAAC6C,QAAR,GAAmBX,MAAM,CAAC5C,MAAM,CAACuD,QAAR,CAAzB;AACH,KAFD,MAGK;AACD7C,MAAAA,OAAO,CAAC6C,QAAR,GAAmB,EAAnB;AACH;;AACD,QAAIvD,MAAM,CAACwD,OAAP,KAAmB1C,SAAnB,IAAgCd,MAAM,CAACwD,OAAP,KAAmB,IAAvD,EAA6D;AACzD9C,MAAAA,OAAO,CAAC8C,OAAR,GAAkBZ,MAAM,CAAC5C,MAAM,CAACwD,OAAR,CAAxB;AACH,KAFD,MAGK;AACD9C,MAAAA,OAAO,CAAC8C,OAAR,GAAkB,EAAlB;AACH;;AACD,QAAIxD,MAAM,CAACyD,eAAP,KAA2B3C,SAA3B,IACAd,MAAM,CAACyD,eAAP,KAA2B,IAD/B,EACqC;AACjC/C,MAAAA,OAAO,CAAC+C,eAAR,GAA0Bb,MAAM,CAAC5C,MAAM,CAACyD,eAAR,CAAhC;AACH,KAHD,MAIK;AACD/C,MAAAA,OAAO,CAAC+C,eAAR,GAA0B,EAA1B;AACH;;AACD,QAAIzD,MAAM,CAAC0D,OAAP,KAAmB5C,SAAnB,IAAgCd,MAAM,CAAC0D,OAAP,KAAmB,IAAvD,EAA6D;AACzDhD,MAAAA,OAAO,CAACgD,OAAR,GAAkBd,MAAM,CAAC5C,MAAM,CAAC0D,OAAR,CAAxB;AACH,KAFD,MAGK;AACDhD,MAAAA,OAAO,CAACgD,OAAR,GAAkB,EAAlB;AACH;;AACD,WAAOhD,OAAP;AACH,GAlFsB;AAmFvBwB,EAAAA,MAnFuB,kBAmFhBxB,OAnFgB,EAmFP;AACZ,QAAMyB,GAAG,GAAG,EAAZ;AACAzB,IAAAA,OAAO,CAAC4C,OAAR,KAAoBxC,SAApB,KAAkCqB,GAAG,CAACmB,OAAJ,GAAc5C,OAAO,CAAC4C,OAAxD;AACA5C,IAAAA,OAAO,CAAC6C,QAAR,KAAqBzC,SAArB,KAAmCqB,GAAG,CAACoB,QAAJ,GAAe7C,OAAO,CAAC6C,QAA1D;AACA7C,IAAAA,OAAO,CAAC8C,OAAR,KAAoB1C,SAApB,KAAkCqB,GAAG,CAACqB,OAAJ,GAAc9C,OAAO,CAAC8C,OAAxD;AACA9C,IAAAA,OAAO,CAAC+C,eAAR,KAA4B3C,SAA5B,KACKqB,GAAG,CAACsB,eAAJ,GAAsB/C,OAAO,CAAC+C,eADnC;AAEA/C,IAAAA,OAAO,CAACgD,OAAR,KAAoB5C,SAApB,KAAkCqB,GAAG,CAACuB,OAAJ,GAAchD,OAAO,CAACgD,OAAxD;AACA,WAAOvB,GAAP;AACH,GA5FsB;AA6FvBE,EAAAA,WA7FuB,uBA6FXrC,MA7FW,EA6FH;AAChB,QAAMU,OAAO,qBAAQ2C,eAAR,CAAb;;AACA,QAAIrD,MAAM,CAACsD,OAAP,KAAmBxC,SAAnB,IAAgCd,MAAM,CAACsD,OAAP,KAAmB,IAAvD,EAA6D;AACzD5C,MAAAA,OAAO,CAAC4C,OAAR,GAAkBtD,MAAM,CAACsD,OAAzB;AACH,KAFD,MAGK;AACD5C,MAAAA,OAAO,CAAC4C,OAAR,GAAkB,EAAlB;AACH;;AACD,QAAItD,MAAM,CAACuD,QAAP,KAAoBzC,SAApB,IAAiCd,MAAM,CAACuD,QAAP,KAAoB,IAAzD,EAA+D;AAC3D7C,MAAAA,OAAO,CAAC6C,QAAR,GAAmBvD,MAAM,CAACuD,QAA1B;AACH,KAFD,MAGK;AACD7C,MAAAA,OAAO,CAAC6C,QAAR,GAAmB,EAAnB;AACH;;AACD,QAAIvD,MAAM,CAACwD,OAAP,KAAmB1C,SAAnB,IAAgCd,MAAM,CAACwD,OAAP,KAAmB,IAAvD,EAA6D;AACzD9C,MAAAA,OAAO,CAAC8C,OAAR,GAAkBxD,MAAM,CAACwD,OAAzB;AACH,KAFD,MAGK;AACD9C,MAAAA,OAAO,CAAC8C,OAAR,GAAkB,EAAlB;AACH;;AACD,QAAIxD,MAAM,CAACyD,eAAP,KAA2B3C,SAA3B,IACAd,MAAM,CAACyD,eAAP,KAA2B,IAD/B,EACqC;AACjC/C,MAAAA,OAAO,CAAC+C,eAAR,GAA0BzD,MAAM,CAACyD,eAAjC;AACH,KAHD,MAIK;AACD/C,MAAAA,OAAO,CAAC+C,eAAR,GAA0B,EAA1B;AACH;;AACD,QAAIzD,MAAM,CAAC0D,OAAP,KAAmB5C,SAAnB,IAAgCd,MAAM,CAAC0D,OAAP,KAAmB,IAAvD,EAA6D;AACzDhD,MAAAA,OAAO,CAACgD,OAAR,GAAkB1D,MAAM,CAAC0D,OAAzB;AACH,KAFD,MAGK;AACDhD,MAAAA,OAAO,CAACgD,OAAR,GAAkB,EAAlB;AACH;;AACD,WAAOhD,OAAP;AACH;AA/HsB,CAApB;AAiIP,IAAMkD,aAAa,GAAG;AAClBC,EAAAA,eAAe,EAAE,EADC;AAElBC,EAAAA,MAAM,EAAE,KAFU;AAGlBC,EAAAA,MAAM,EAAE,CAHU;AAIlBC,EAAAA,MAAM,EAAE,EAJU;AAKlBC,EAAAA,eAAe,EAAE,EALC;AAMlBC,EAAAA,eAAe,EAAE,CANC;AAOlBC,EAAAA,iBAAiB,EAAE;AAPD,CAAtB;AASA,OAAO,IAAM/C,SAAS,GAAG;AACrBX,EAAAA,MADqB,kBACdC,OADc,EACqB;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACmD,eAAR,KAA4B,EAAhC,EAAoC;AAChClD,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACmD,eAAjC;AACH;;AACD,QAAInD,OAAO,CAAC0D,eAAR,KAA4BtD,SAAhC,EAA2C;AACvCpB,MAAAA,GAAG,CAACe,MAAJ,CAAWC,OAAO,CAAC0D,eAAnB,EAAoCzD,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAApC,EAA8DC,MAA9D;AACH;;AACD,QAAIP,OAAO,CAACoD,MAAR,KAAmB,IAAvB,EAA6B;AACzBnD,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBsD,IAAlB,CAAuB3D,OAAO,CAACoD,MAA/B;AACH;;AACD,QAAIpD,OAAO,CAACqD,MAAR,KAAmB,CAAvB,EAA0B;AACtBpD,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBuD,KAAlB,CAAwB5D,OAAO,CAACqD,MAAhC;AACH;;AACD,QAAIrD,OAAO,CAACsD,MAAR,KAAmB,EAAvB,EAA2B;AACvBrD,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACsD,MAAjC;AACH;;AACD,QAAItD,OAAO,CAACuD,eAAR,KAA4B,EAAhC,EAAoC;AAChCtD,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACuD,eAAjC;AACH;;AACD,QAAIvD,OAAO,CAAC6D,WAAR,KAAwBzD,SAA5B,EAAuC;AACnC6C,MAAAA,WAAW,CAAClD,MAAZ,CAAmBC,OAAO,CAAC6D,WAA3B,EAAwC5D,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAxC,EAAkEC,MAAlE;AACH;;AACD,QAAIP,OAAO,CAACwD,eAAR,KAA4B,CAAhC,EAAmC;AAC/BvD,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkByD,KAAlB,CAAwB9D,OAAO,CAACwD,eAAhC;AACH;;AACD,QAAIxD,OAAO,CAAC+D,aAAR,KAA0B3D,SAA9B,EAAyC;AACrC3B,MAAAA,SAAS,CAACsB,MAAV,CAAiBwC,WAAW,CAACvC,OAAO,CAAC+D,aAAT,CAA5B,EAAqD9D,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAArD,EAA+EC,MAA/E;AACH;;AACD,QAAIP,OAAO,CAACgE,UAAR,KAAuB5D,SAA3B,EAAsC;AAClCgC,MAAAA,UAAU,CAACrC,MAAX,CAAkBC,OAAO,CAACgE,UAA1B,EAAsC/D,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAtC,EAAgEC,MAAhE;AACH;;AACD,QAAIP,OAAO,CAACyD,iBAAR,KAA8B,EAAlC,EAAsC;AAClCxD,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACyD,iBAAjC;AACH;;AACD,WAAOxD,MAAP;AACH,GApCoB;AAqCrBU,EAAAA,MArCqB,kBAqCdC,KArCc,EAqCPC,MArCO,EAqCC;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQkD,aAAR,CAAb;;AACA,WAAOpC,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAACmD,eAAR,GAA0BrC,MAAM,CAACmB,MAAP,EAA1B;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAAC0D,eAAR,GAA0B1E,GAAG,CAAC2B,MAAJ,CAAWG,MAAX,EAAmBA,MAAM,CAACT,MAAP,EAAnB,CAA1B;AACA;;AACJ,aAAK,CAAL;AACIL,UAAAA,OAAO,CAACoD,MAAR,GAAiBtC,MAAM,CAAC6C,IAAP,EAAjB;AACA;;AACJ,aAAK,CAAL;AACI3D,UAAAA,OAAO,CAACqD,MAAR,GAAiBvC,MAAM,CAAC8C,KAAP,EAAjB;AACA;;AACJ,aAAK,CAAL;AACI5D,UAAAA,OAAO,CAACsD,MAAR,GAAiBxC,MAAM,CAACmB,MAAP,EAAjB;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAACuD,eAAR,GAA0BzC,MAAM,CAACmB,MAAP,EAA1B;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAAC6D,WAAR,GAAsBZ,WAAW,CAACtC,MAAZ,CAAmBG,MAAnB,EAA2BA,MAAM,CAACT,MAAP,EAA3B,CAAtB;AACA;;AACJ,aAAK,CAAL;AACIL,UAAAA,OAAO,CAACwD,eAAR,GAA0BS,YAAY,CAACnD,MAAM,CAACgD,KAAP,EAAD,CAAtC;AACA;;AACJ,aAAK,CAAL;AACI9D,UAAAA,OAAO,CAAC+D,aAAR,GAAwBvB,aAAa,CAAC/D,SAAS,CAACkC,MAAV,CAAiBG,MAAjB,EAAyBA,MAAM,CAACT,MAAP,EAAzB,CAAD,CAArC;AACA;;AACJ,aAAK,EAAL;AACIL,UAAAA,OAAO,CAACgE,UAAR,GAAqB5B,UAAU,CAACzB,MAAX,CAAkBG,MAAlB,EAA0BA,MAAM,CAACT,MAAP,EAA1B,CAArB;AACA;;AACJ,aAAK,EAAL;AACIL,UAAAA,OAAO,CAACyD,iBAAR,GAA4B3C,MAAM,CAACmB,MAAP,EAA5B;AACA;;AACJ;AACInB,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AApCR;AAsCH;;AACD,WAAOnB,OAAP;AACH,GAnFoB;AAoFrBsB,EAAAA,QApFqB,oBAoFZhC,MApFY,EAoFJ;AACb,QAAMU,OAAO,qBAAQkD,aAAR,CAAb;;AACA,QAAI5D,MAAM,CAAC6D,eAAP,KAA2B/C,SAA3B,IACAd,MAAM,CAAC6D,eAAP,KAA2B,IAD/B,EACqC;AACjCnD,MAAAA,OAAO,CAACmD,eAAR,GAA0BjB,MAAM,CAAC5C,MAAM,CAAC6D,eAAR,CAAhC;AACH,KAHD,MAIK;AACDnD,MAAAA,OAAO,CAACmD,eAAR,GAA0B,EAA1B;AACH;;AACD,QAAI7D,MAAM,CAACoE,eAAP,KAA2BtD,SAA3B,IACAd,MAAM,CAACoE,eAAP,KAA2B,IAD/B,EACqC;AACjC1D,MAAAA,OAAO,CAAC0D,eAAR,GAA0B1E,GAAG,CAACsC,QAAJ,CAAahC,MAAM,CAACoE,eAApB,CAA1B;AACH,KAHD,MAIK;AACD1D,MAAAA,OAAO,CAAC0D,eAAR,GAA0BtD,SAA1B;AACH;;AACD,QAAId,MAAM,CAAC8D,MAAP,KAAkBhD,SAAlB,IAA+Bd,MAAM,CAAC8D,MAAP,KAAkB,IAArD,EAA2D;AACvDpD,MAAAA,OAAO,CAACoD,MAAR,GAAiBc,OAAO,CAAC5E,MAAM,CAAC8D,MAAR,CAAxB;AACH,KAFD,MAGK;AACDpD,MAAAA,OAAO,CAACoD,MAAR,GAAiB,KAAjB;AACH;;AACD,QAAI9D,MAAM,CAAC+D,MAAP,KAAkBjD,SAAlB,IAA+Bd,MAAM,CAAC+D,MAAP,KAAkB,IAArD,EAA2D;AACvDrD,MAAAA,OAAO,CAACqD,MAAR,GAAiBhE,kBAAkB,CAACC,MAAM,CAAC+D,MAAR,CAAnC;AACH,KAFD,MAGK;AACDrD,MAAAA,OAAO,CAACqD,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAI/D,MAAM,CAACgE,MAAP,KAAkBlD,SAAlB,IAA+Bd,MAAM,CAACgE,MAAP,KAAkB,IAArD,EAA2D;AACvDtD,MAAAA,OAAO,CAACsD,MAAR,GAAiBpB,MAAM,CAAC5C,MAAM,CAACgE,MAAR,CAAvB;AACH,KAFD,MAGK;AACDtD,MAAAA,OAAO,CAACsD,MAAR,GAAiB,EAAjB;AACH;;AACD,QAAIhE,MAAM,CAACiE,eAAP,KAA2BnD,SAA3B,IACAd,MAAM,CAACiE,eAAP,KAA2B,IAD/B,EACqC;AACjCvD,MAAAA,OAAO,CAACuD,eAAR,GAA0BrB,MAAM,CAAC5C,MAAM,CAACiE,eAAR,CAAhC;AACH,KAHD,MAIK;AACDvD,MAAAA,OAAO,CAACuD,eAAR,GAA0B,EAA1B;AACH;;AACD,QAAIjE,MAAM,CAACuE,WAAP,KAAuBzD,SAAvB,IAAoCd,MAAM,CAACuE,WAAP,KAAuB,IAA/D,EAAqE;AACjE7D,MAAAA,OAAO,CAAC6D,WAAR,GAAsBZ,WAAW,CAAC3B,QAAZ,CAAqBhC,MAAM,CAACuE,WAA5B,CAAtB;AACH,KAFD,MAGK;AACD7D,MAAAA,OAAO,CAAC6D,WAAR,GAAsBzD,SAAtB;AACH;;AACD,QAAId,MAAM,CAACkE,eAAP,KAA2BpD,SAA3B,IACAd,MAAM,CAACkE,eAAP,KAA2B,IAD/B,EACqC;AACjCxD,MAAAA,OAAO,CAACwD,eAAR,GAA0BW,MAAM,CAAC7E,MAAM,CAACkE,eAAR,CAAhC;AACH,KAHD,MAIK;AACDxD,MAAAA,OAAO,CAACwD,eAAR,GAA0B,CAA1B;AACH;;AACD,QAAIlE,MAAM,CAACyE,aAAP,KAAyB3D,SAAzB,IAAsCd,MAAM,CAACyE,aAAP,KAAyB,IAAnE,EAAyE;AACrE/D,MAAAA,OAAO,CAAC+D,aAAR,GAAwBtB,iBAAiB,CAACnD,MAAM,CAACyE,aAAR,CAAzC;AACH,KAFD,MAGK;AACD/D,MAAAA,OAAO,CAAC+D,aAAR,GAAwB3D,SAAxB;AACH;;AACD,QAAId,MAAM,CAAC0E,UAAP,KAAsB5D,SAAtB,IAAmCd,MAAM,CAAC0E,UAAP,KAAsB,IAA7D,EAAmE;AAC/DhE,MAAAA,OAAO,CAACgE,UAAR,GAAqB5B,UAAU,CAACd,QAAX,CAAoBhC,MAAM,CAAC0E,UAA3B,CAArB;AACH,KAFD,MAGK;AACDhE,MAAAA,OAAO,CAACgE,UAAR,GAAqB5D,SAArB;AACH;;AACD,QAAId,MAAM,CAACmE,iBAAP,KAA6BrD,SAA7B,IACAd,MAAM,CAACmE,iBAAP,KAA6B,IADjC,EACuC;AACnCzD,MAAAA,OAAO,CAACyD,iBAAR,GAA4BvB,MAAM,CAAC5C,MAAM,CAACmE,iBAAR,CAAlC;AACH,KAHD,MAIK;AACDzD,MAAAA,OAAO,CAACyD,iBAAR,GAA4B,EAA5B;AACH;;AACD,WAAOzD,OAAP;AACH,GA9JoB;AA+JrBwB,EAAAA,MA/JqB,kBA+JdxB,OA/Jc,EA+JL;AACZ,QAAMyB,GAAG,GAAG,EAAZ;AACAzB,IAAAA,OAAO,CAACmD,eAAR,KAA4B/C,SAA5B,KACKqB,GAAG,CAAC0B,eAAJ,GAAsBnD,OAAO,CAACmD,eADnC;AAEAnD,IAAAA,OAAO,CAAC0D,eAAR,KAA4BtD,SAA5B,KACKqB,GAAG,CAACiC,eAAJ,GAAsB1D,OAAO,CAAC0D,eAAR,GACjB1E,GAAG,CAACwC,MAAJ,CAAWxB,OAAO,CAAC0D,eAAnB,CADiB,GAEjBtD,SAHV;AAIAJ,IAAAA,OAAO,CAACoD,MAAR,KAAmBhD,SAAnB,KAAiCqB,GAAG,CAAC2B,MAAJ,GAAapD,OAAO,CAACoD,MAAtD;AACApD,IAAAA,OAAO,CAACqD,MAAR,KAAmBjD,SAAnB,KACKqB,GAAG,CAAC4B,MAAJ,GAAazD,gBAAgB,CAACI,OAAO,CAACqD,MAAT,CADlC;AAEArD,IAAAA,OAAO,CAACsD,MAAR,KAAmBlD,SAAnB,KAAiCqB,GAAG,CAAC6B,MAAJ,GAAatD,OAAO,CAACsD,MAAtD;AACAtD,IAAAA,OAAO,CAACuD,eAAR,KAA4BnD,SAA5B,KACKqB,GAAG,CAAC8B,eAAJ,GAAsBvD,OAAO,CAACuD,eADnC;AAEAvD,IAAAA,OAAO,CAAC6D,WAAR,KAAwBzD,SAAxB,KACKqB,GAAG,CAACoC,WAAJ,GAAkB7D,OAAO,CAAC6D,WAAR,GACbZ,WAAW,CAACzB,MAAZ,CAAmBxB,OAAO,CAAC6D,WAA3B,CADa,GAEbzD,SAHV;AAIAJ,IAAAA,OAAO,CAACwD,eAAR,KAA4BpD,SAA5B,KACKqB,GAAG,CAAC+B,eAAJ,GAAsBxD,OAAO,CAACwD,eADnC;AAEAxD,IAAAA,OAAO,CAAC+D,aAAR,KAA0B3D,SAA1B,KACKqB,GAAG,CAACsC,aAAJ,GACG/D,OAAO,CAAC+D,aAAR,KAA0B3D,SAA1B,GACMJ,OAAO,CAAC+D,aAAR,CAAsBrB,WAAtB,EADN,GAEM,IAJd;AAKA1C,IAAAA,OAAO,CAACgE,UAAR,KAAuB5D,SAAvB,KACKqB,GAAG,CAACuC,UAAJ,GAAiBhE,OAAO,CAACgE,UAAR,GACZ5B,UAAU,CAACZ,MAAX,CAAkBxB,OAAO,CAACgE,UAA1B,CADY,GAEZ5D,SAHV;AAIAJ,IAAAA,OAAO,CAACyD,iBAAR,KAA8BrD,SAA9B,KACKqB,GAAG,CAACgC,iBAAJ,GAAwBzD,OAAO,CAACyD,iBADrC;AAEA,WAAOhC,GAAP;AACH,GA/LoB;AAgMrBE,EAAAA,WAhMqB,uBAgMTrC,MAhMS,EAgMD;AAChB,QAAMU,OAAO,qBAAQkD,aAAR,CAAb;;AACA,QAAI5D,MAAM,CAAC6D,eAAP,KAA2B/C,SAA3B,IACAd,MAAM,CAAC6D,eAAP,KAA2B,IAD/B,EACqC;AACjCnD,MAAAA,OAAO,CAACmD,eAAR,GAA0B7D,MAAM,CAAC6D,eAAjC;AACH,KAHD,MAIK;AACDnD,MAAAA,OAAO,CAACmD,eAAR,GAA0B,EAA1B;AACH;;AACD,QAAI7D,MAAM,CAACoE,eAAP,KAA2BtD,SAA3B,IACAd,MAAM,CAACoE,eAAP,KAA2B,IAD/B,EACqC;AACjC1D,MAAAA,OAAO,CAAC0D,eAAR,GAA0B1E,GAAG,CAAC2C,WAAJ,CAAgBrC,MAAM,CAACoE,eAAvB,CAA1B;AACH,KAHD,MAIK;AACD1D,MAAAA,OAAO,CAAC0D,eAAR,GAA0BtD,SAA1B;AACH;;AACD,QAAId,MAAM,CAAC8D,MAAP,KAAkBhD,SAAlB,IAA+Bd,MAAM,CAAC8D,MAAP,KAAkB,IAArD,EAA2D;AACvDpD,MAAAA,OAAO,CAACoD,MAAR,GAAiB9D,MAAM,CAAC8D,MAAxB;AACH,KAFD,MAGK;AACDpD,MAAAA,OAAO,CAACoD,MAAR,GAAiB,KAAjB;AACH;;AACD,QAAI9D,MAAM,CAAC+D,MAAP,KAAkBjD,SAAlB,IAA+Bd,MAAM,CAAC+D,MAAP,KAAkB,IAArD,EAA2D;AACvDrD,MAAAA,OAAO,CAACqD,MAAR,GAAiB/D,MAAM,CAAC+D,MAAxB;AACH,KAFD,MAGK;AACDrD,MAAAA,OAAO,CAACqD,MAAR,GAAiB,CAAjB;AACH;;AACD,QAAI/D,MAAM,CAACgE,MAAP,KAAkBlD,SAAlB,IAA+Bd,MAAM,CAACgE,MAAP,KAAkB,IAArD,EAA2D;AACvDtD,MAAAA,OAAO,CAACsD,MAAR,GAAiBhE,MAAM,CAACgE,MAAxB;AACH,KAFD,MAGK;AACDtD,MAAAA,OAAO,CAACsD,MAAR,GAAiB,EAAjB;AACH;;AACD,QAAIhE,MAAM,CAACiE,eAAP,KAA2BnD,SAA3B,IACAd,MAAM,CAACiE,eAAP,KAA2B,IAD/B,EACqC;AACjCvD,MAAAA,OAAO,CAACuD,eAAR,GAA0BjE,MAAM,CAACiE,eAAjC;AACH,KAHD,MAIK;AACDvD,MAAAA,OAAO,CAACuD,eAAR,GAA0B,EAA1B;AACH;;AACD,QAAIjE,MAAM,CAACuE,WAAP,KAAuBzD,SAAvB,IAAoCd,MAAM,CAACuE,WAAP,KAAuB,IAA/D,EAAqE;AACjE7D,MAAAA,OAAO,CAAC6D,WAAR,GAAsBZ,WAAW,CAACtB,WAAZ,CAAwBrC,MAAM,CAACuE,WAA/B,CAAtB;AACH,KAFD,MAGK;AACD7D,MAAAA,OAAO,CAAC6D,WAAR,GAAsBzD,SAAtB;AACH;;AACD,QAAId,MAAM,CAACkE,eAAP,KAA2BpD,SAA3B,IACAd,MAAM,CAACkE,eAAP,KAA2B,IAD/B,EACqC;AACjCxD,MAAAA,OAAO,CAACwD,eAAR,GAA0BlE,MAAM,CAACkE,eAAjC;AACH,KAHD,MAIK;AACDxD,MAAAA,OAAO,CAACwD,eAAR,GAA0B,CAA1B;AACH;;AACD,QAAIlE,MAAM,CAACyE,aAAP,KAAyB3D,SAAzB,IAAsCd,MAAM,CAACyE,aAAP,KAAyB,IAAnE,EAAyE;AACrE/D,MAAAA,OAAO,CAAC+D,aAAR,GAAwBzE,MAAM,CAACyE,aAA/B;AACH,KAFD,MAGK;AACD/D,MAAAA,OAAO,CAAC+D,aAAR,GAAwB3D,SAAxB;AACH;;AACD,QAAId,MAAM,CAAC0E,UAAP,KAAsB5D,SAAtB,IAAmCd,MAAM,CAAC0E,UAAP,KAAsB,IAA7D,EAAmE;AAC/DhE,MAAAA,OAAO,CAACgE,UAAR,GAAqB5B,UAAU,CAACT,WAAX,CAAuBrC,MAAM,CAAC0E,UAA9B,CAArB;AACH,KAFD,MAGK;AACDhE,MAAAA,OAAO,CAACgE,UAAR,GAAqB5D,SAArB;AACH;;AACD,QAAId,MAAM,CAACmE,iBAAP,KAA6BrD,SAA7B,IACAd,MAAM,CAACmE,iBAAP,KAA6B,IADjC,EACuC;AACnCzD,MAAAA,OAAO,CAACyD,iBAAR,GAA4BnE,MAAM,CAACmE,iBAAnC;AACH,KAHD,MAIK;AACDzD,MAAAA,OAAO,CAACyD,iBAAR,GAA4B,EAA5B;AACH;;AACD,WAAOzD,OAAP;AACH;AA1QoB,CAAlB;AA4QP,IAAMoE,gBAAgB,GAAG;AAAEC,EAAAA,SAAS,EAAE;AAAb,CAAzB;AACA,OAAO,IAAMC,YAAY,GAAG;AACxBvE,EAAAA,MADwB,kBACjBC,OADiB,EACkB;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AAAA,gDACtBF,OAAO,CAACqE,SADc;AAAA;;AAAA;AACtC,6DAAmC;AAAA,YAAxB5D,CAAwB;AAC/BR,QAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBxB,CAAzB;AACH;AAHqC;AAAA;AAAA;AAAA;AAAA;;AAItC,WAAOR,MAAP;AACH,GANuB;AAOxBU,EAAAA,MAPwB,kBAOjBC,KAPiB,EAOVC,MAPU,EAOF;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQoE,gBAAR,CAAb;;AACApE,IAAAA,OAAO,CAACqE,SAAR,GAAoB,EAApB;;AACA,WAAOvD,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAACqE,SAAR,CAAkBjD,IAAlB,CAAuBN,MAAM,CAACmB,MAAP,EAAvB;AACA;;AACJ;AACInB,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AANR;AAQH;;AACD,WAAOnB,OAAP;AACH,GAxBuB;AAyBxBsB,EAAAA,QAzBwB,oBAyBfhC,MAzBe,EAyBP;AACb,QAAMU,OAAO,qBAAQoE,gBAAR,CAAb;;AACApE,IAAAA,OAAO,CAACqE,SAAR,GAAoB,EAApB;;AACA,QAAI/E,MAAM,CAAC+E,SAAP,KAAqBjE,SAArB,IAAkCd,MAAM,CAAC+E,SAAP,KAAqB,IAA3D,EAAiE;AAAA,kDAC7C/E,MAAM,CAAC+E,SADsC;AAAA;;AAAA;AAC7D,+DAAkC;AAAA,cAAvB9C,CAAuB;AAC9BvB,UAAAA,OAAO,CAACqE,SAAR,CAAkBjD,IAAlB,CAAuBc,MAAM,CAACX,CAAD,CAA7B;AACH;AAH4D;AAAA;AAAA;AAAA;AAAA;AAIhE;;AACD,WAAOvB,OAAP;AACH,GAlCuB;AAmCxBwB,EAAAA,MAnCwB,kBAmCjBxB,OAnCiB,EAmCR;AACZ,QAAMyB,GAAG,GAAG,EAAZ;;AACA,QAAIzB,OAAO,CAACqE,SAAZ,EAAuB;AACnB5C,MAAAA,GAAG,CAAC4C,SAAJ,GAAgBrE,OAAO,CAACqE,SAAR,CAAkB3C,GAAlB,CAAsB,UAACH,CAAD;AAAA,eAAOA,CAAP;AAAA,OAAtB,CAAhB;AACH,KAFD,MAGK;AACDE,MAAAA,GAAG,CAAC4C,SAAJ,GAAgB,EAAhB;AACH;;AACD,WAAO5C,GAAP;AACH,GA5CuB;AA6CxBE,EAAAA,WA7CwB,uBA6CZrC,MA7CY,EA6CJ;AAChB,QAAMU,OAAO,qBAAQoE,gBAAR,CAAb;;AACApE,IAAAA,OAAO,CAACqE,SAAR,GAAoB,EAApB;;AACA,QAAI/E,MAAM,CAAC+E,SAAP,KAAqBjE,SAArB,IAAkCd,MAAM,CAAC+E,SAAP,KAAqB,IAA3D,EAAiE;AAAA,kDAC7C/E,MAAM,CAAC+E,SADsC;AAAA;;AAAA;AAC7D,+DAAkC;AAAA,cAAvB9C,CAAuB;AAC9BvB,UAAAA,OAAO,CAACqE,SAAR,CAAkBjD,IAAlB,CAAuBG,CAAvB;AACH;AAH4D;AAAA;AAAA;AAAA;AAAA;AAIhE;;AACD,WAAOvB,OAAP;AACH;AAtDuB,CAArB;AAwDP,IAAMuE,UAAU,GAAG;AAAEC,EAAAA,gBAAgB,EAAE,EAApB;AAAwBC,EAAAA,gBAAgB,EAAE;AAA1C,CAAnB;AACA,OAAO,IAAMC,MAAM,GAAG;AAClB3E,EAAAA,MADkB,kBACXC,OADW,EACwB;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACwE,gBAAR,KAA6B,EAAjC,EAAqC;AACjCvE,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACwE,gBAAjC;AACH;;AACD,QAAIxE,OAAO,CAACyE,gBAAR,KAA6B,EAAjC,EAAqC;AACjCxE,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACyE,gBAAjC;AACH;;AACD,WAAOxE,MAAP;AACH,GATiB;AAUlBU,EAAAA,MAVkB,kBAUXC,KAVW,EAUJC,MAVI,EAUI;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQuE,UAAR,CAAb;;AACA,WAAOzD,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAACwE,gBAAR,GAA2B1D,MAAM,CAACmB,MAAP,EAA3B;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAACyE,gBAAR,GAA2B3D,MAAM,CAACmB,MAAP,EAA3B;AACA;;AACJ;AACInB,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AATR;AAWH;;AACD,WAAOnB,OAAP;AACH,GA7BiB;AA8BlBsB,EAAAA,QA9BkB,oBA8BThC,MA9BS,EA8BD;AACb,QAAMU,OAAO,qBAAQuE,UAAR,CAAb;;AACA,QAAIjF,MAAM,CAACkF,gBAAP,KAA4BpE,SAA5B,IACAd,MAAM,CAACkF,gBAAP,KAA4B,IADhC,EACsC;AAClCxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2BtC,MAAM,CAAC5C,MAAM,CAACkF,gBAAR,CAAjC;AACH,KAHD,MAIK;AACDxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2B,EAA3B;AACH;;AACD,QAAIlF,MAAM,CAACmF,gBAAP,KAA4BrE,SAA5B,IACAd,MAAM,CAACmF,gBAAP,KAA4B,IADhC,EACsC;AAClCzE,MAAAA,OAAO,CAACyE,gBAAR,GAA2BvC,MAAM,CAAC5C,MAAM,CAACmF,gBAAR,CAAjC;AACH,KAHD,MAIK;AACDzE,MAAAA,OAAO,CAACyE,gBAAR,GAA2B,EAA3B;AACH;;AACD,WAAOzE,OAAP;AACH,GA/CiB;AAgDlBwB,EAAAA,MAhDkB,kBAgDXxB,OAhDW,EAgDF;AACZ,QAAMyB,GAAG,GAAG,EAAZ;AACAzB,IAAAA,OAAO,CAACwE,gBAAR,KAA6BpE,SAA7B,KACKqB,GAAG,CAAC+C,gBAAJ,GAAuBxE,OAAO,CAACwE,gBADpC;AAEAxE,IAAAA,OAAO,CAACyE,gBAAR,KAA6BrE,SAA7B,KACKqB,GAAG,CAACgD,gBAAJ,GAAuBzE,OAAO,CAACyE,gBADpC;AAEA,WAAOhD,GAAP;AACH,GAvDiB;AAwDlBE,EAAAA,WAxDkB,uBAwDNrC,MAxDM,EAwDE;AAChB,QAAMU,OAAO,qBAAQuE,UAAR,CAAb;;AACA,QAAIjF,MAAM,CAACkF,gBAAP,KAA4BpE,SAA5B,IACAd,MAAM,CAACkF,gBAAP,KAA4B,IADhC,EACsC;AAClCxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2BlF,MAAM,CAACkF,gBAAlC;AACH,KAHD,MAIK;AACDxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2B,EAA3B;AACH;;AACD,QAAIlF,MAAM,CAACmF,gBAAP,KAA4BrE,SAA5B,IACAd,MAAM,CAACmF,gBAAP,KAA4B,IADhC,EACsC;AAClCzE,MAAAA,OAAO,CAACyE,gBAAR,GAA2BnF,MAAM,CAACmF,gBAAlC;AACH,KAHD,MAIK;AACDzE,MAAAA,OAAO,CAACyE,gBAAR,GAA2B,EAA3B;AACH;;AACD,WAAOzE,OAAP;AACH;AAzEiB,CAAf;AA2EP,IAAM2E,WAAW,GAAG,EAApB;AACA,OAAO,IAAMC,OAAO,GAAG;AACnB7E,EAAAA,MADmB,kBACZC,OADY,EACuB;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AAAA,gDACtBF,OAAO,CAAC6E,KADc;AAAA;;AAAA;AACtC,6DAA+B;AAAA,YAApBpE,CAAoB;AAC3BiE,QAAAA,MAAM,CAAC3E,MAAP,CAAcU,CAAd,EAAiBR,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAjB,EAA2CC,MAA3C;AACH;AAHqC;AAAA;AAAA;AAAA;AAAA;;AAItC,WAAON,MAAP;AACH,GANkB;AAOnBU,EAAAA,MAPmB,kBAOZC,KAPY,EAOLC,MAPK,EAOG;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQ2E,WAAR,CAAb;;AACA3E,IAAAA,OAAO,CAAC6E,KAAR,GAAgB,EAAhB;;AACA,WAAO/D,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAAC6E,KAAR,CAAczD,IAAd,CAAmBsD,MAAM,CAAC/D,MAAP,CAAcG,MAAd,EAAsBA,MAAM,CAACT,MAAP,EAAtB,CAAnB;AACA;;AACJ;AACIS,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AANR;AAQH;;AACD,WAAOnB,OAAP;AACH,GAxBkB;AAyBnBsB,EAAAA,QAzBmB,oBAyBVhC,MAzBU,EAyBF;AACb,QAAMU,OAAO,qBAAQ2E,WAAR,CAAb;;AACA3E,IAAAA,OAAO,CAAC6E,KAAR,GAAgB,EAAhB;;AACA,QAAIvF,MAAM,CAACuF,KAAP,KAAiBzE,SAAjB,IAA8Bd,MAAM,CAACuF,KAAP,KAAiB,IAAnD,EAAyD;AAAA,kDACrCvF,MAAM,CAACuF,KAD8B;AAAA;;AAAA;AACrD,+DAA8B;AAAA,cAAnBtD,CAAmB;AAC1BvB,UAAAA,OAAO,CAAC6E,KAAR,CAAczD,IAAd,CAAmBsD,MAAM,CAACpD,QAAP,CAAgBC,CAAhB,CAAnB;AACH;AAHoD;AAAA;AAAA;AAAA;AAAA;AAIxD;;AACD,WAAOvB,OAAP;AACH,GAlCkB;AAmCnBwB,EAAAA,MAnCmB,kBAmCZxB,OAnCY,EAmCH;AACZ,QAAMyB,GAAG,GAAG,EAAZ;;AACA,QAAIzB,OAAO,CAAC6E,KAAZ,EAAmB;AACfpD,MAAAA,GAAG,CAACoD,KAAJ,GAAY7E,OAAO,CAAC6E,KAAR,CAAcnD,GAAd,CAAkB,UAACH,CAAD;AAAA,eAAQA,CAAC,GAAGmD,MAAM,CAAClD,MAAP,CAAcD,CAAd,CAAH,GAAsBnB,SAA/B;AAAA,OAAlB,CAAZ;AACH,KAFD,MAGK;AACDqB,MAAAA,GAAG,CAACoD,KAAJ,GAAY,EAAZ;AACH;;AACD,WAAOpD,GAAP;AACH,GA5CkB;AA6CnBE,EAAAA,WA7CmB,uBA6CPrC,MA7CO,EA6CC;AAChB,QAAMU,OAAO,qBAAQ2E,WAAR,CAAb;;AACA3E,IAAAA,OAAO,CAAC6E,KAAR,GAAgB,EAAhB;;AACA,QAAIvF,MAAM,CAACuF,KAAP,KAAiBzE,SAAjB,IAA8Bd,MAAM,CAACuF,KAAP,KAAiB,IAAnD,EAAyD;AAAA,kDACrCvF,MAAM,CAACuF,KAD8B;AAAA;;AAAA;AACrD,+DAA8B;AAAA,cAAnBtD,CAAmB;AAC1BvB,UAAAA,OAAO,CAAC6E,KAAR,CAAczD,IAAd,CAAmBsD,MAAM,CAAC/C,WAAP,CAAmBJ,CAAnB,CAAnB;AACH;AAHoD;AAAA;AAAA;AAAA;AAAA;AAIxD;;AACD,WAAOvB,OAAP;AACH;AAtDkB,CAAhB;AAwDP,IAAM8E,cAAc,GAAG;AACnBN,EAAAA,gBAAgB,EAAE,EADC;AAEnBO,EAAAA,mBAAmB,EAAE,EAFF;AAGnBC,EAAAA,mBAAmB,EAAE;AAHF,CAAvB;AAKA,OAAO,IAAMC,UAAU,GAAG;AACtBlF,EAAAA,MADsB,kBACfC,OADe,EACoB;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACwE,gBAAR,KAA6B,EAAjC,EAAqC;AACjCvE,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACwE,gBAAjC;AACH;;AACD,QAAIxE,OAAO,CAAC+E,mBAAR,KAAgC,EAApC,EAAwC;AACpC9E,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAAC+E,mBAAjC;AACH;;AACD,QAAI/E,OAAO,CAACgF,mBAAR,KAAgC,EAApC,EAAwC;AACpC/E,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACgF,mBAAjC;AACH;;AACD,WAAO/E,MAAP;AACH,GAZqB;AAatBU,EAAAA,MAbsB,kBAafC,KAbe,EAaRC,MAbQ,EAaA;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQ8E,cAAR,CAAb;;AACA,WAAOhE,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAACwE,gBAAR,GAA2B1D,MAAM,CAACmB,MAAP,EAA3B;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAAC+E,mBAAR,GAA8BjE,MAAM,CAACmB,MAAP,EAA9B;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAACgF,mBAAR,GAA8BlE,MAAM,CAACmB,MAAP,EAA9B;AACA;;AACJ;AACInB,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AAZR;AAcH;;AACD,WAAOnB,OAAP;AACH,GAnCqB;AAoCtBsB,EAAAA,QApCsB,oBAoCbhC,MApCa,EAoCL;AACb,QAAMU,OAAO,qBAAQ8E,cAAR,CAAb;;AACA,QAAIxF,MAAM,CAACkF,gBAAP,KAA4BpE,SAA5B,IACAd,MAAM,CAACkF,gBAAP,KAA4B,IADhC,EACsC;AAClCxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2BtC,MAAM,CAAC5C,MAAM,CAACkF,gBAAR,CAAjC;AACH,KAHD,MAIK;AACDxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2B,EAA3B;AACH;;AACD,QAAIlF,MAAM,CAACyF,mBAAP,KAA+B3E,SAA/B,IACAd,MAAM,CAACyF,mBAAP,KAA+B,IADnC,EACyC;AACrC/E,MAAAA,OAAO,CAAC+E,mBAAR,GAA8B7C,MAAM,CAAC5C,MAAM,CAACyF,mBAAR,CAApC;AACH,KAHD,MAIK;AACD/E,MAAAA,OAAO,CAAC+E,mBAAR,GAA8B,EAA9B;AACH;;AACD,QAAIzF,MAAM,CAAC0F,mBAAP,KAA+B5E,SAA/B,IACAd,MAAM,CAAC0F,mBAAP,KAA+B,IADnC,EACyC;AACrChF,MAAAA,OAAO,CAACgF,mBAAR,GAA8B9C,MAAM,CAAC5C,MAAM,CAAC0F,mBAAR,CAApC;AACH,KAHD,MAIK;AACDhF,MAAAA,OAAO,CAACgF,mBAAR,GAA8B,EAA9B;AACH;;AACD,WAAOhF,OAAP;AACH,GA5DqB;AA6DtBwB,EAAAA,MA7DsB,kBA6DfxB,OA7De,EA6DN;AACZ,QAAMyB,GAAG,GAAG,EAAZ;AACAzB,IAAAA,OAAO,CAACwE,gBAAR,KAA6BpE,SAA7B,KACKqB,GAAG,CAAC+C,gBAAJ,GAAuBxE,OAAO,CAACwE,gBADpC;AAEAxE,IAAAA,OAAO,CAAC+E,mBAAR,KAAgC3E,SAAhC,KACKqB,GAAG,CAACsD,mBAAJ,GAA0B/E,OAAO,CAAC+E,mBADvC;AAEA/E,IAAAA,OAAO,CAACgF,mBAAR,KAAgC5E,SAAhC,KACKqB,GAAG,CAACuD,mBAAJ,GAA0BhF,OAAO,CAACgF,mBADvC;AAEA,WAAOvD,GAAP;AACH,GAtEqB;AAuEtBE,EAAAA,WAvEsB,uBAuEVrC,MAvEU,EAuEF;AAChB,QAAMU,OAAO,qBAAQ8E,cAAR,CAAb;;AACA,QAAIxF,MAAM,CAACkF,gBAAP,KAA4BpE,SAA5B,IACAd,MAAM,CAACkF,gBAAP,KAA4B,IADhC,EACsC;AAClCxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2BlF,MAAM,CAACkF,gBAAlC;AACH,KAHD,MAIK;AACDxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2B,EAA3B;AACH;;AACD,QAAIlF,MAAM,CAACyF,mBAAP,KAA+B3E,SAA/B,IACAd,MAAM,CAACyF,mBAAP,KAA+B,IADnC,EACyC;AACrC/E,MAAAA,OAAO,CAAC+E,mBAAR,GAA8BzF,MAAM,CAACyF,mBAArC;AACH,KAHD,MAIK;AACD/E,MAAAA,OAAO,CAAC+E,mBAAR,GAA8B,EAA9B;AACH;;AACD,QAAIzF,MAAM,CAAC0F,mBAAP,KAA+B5E,SAA/B,IACAd,MAAM,CAAC0F,mBAAP,KAA+B,IADnC,EACyC;AACrChF,MAAAA,OAAO,CAACgF,mBAAR,GAA8B1F,MAAM,CAAC0F,mBAArC;AACH,KAHD,MAIK;AACDhF,MAAAA,OAAO,CAACgF,mBAAR,GAA8B,EAA9B;AACH;;AACD,WAAOhF,OAAP;AACH;AA/FqB,CAAnB;AAiGP,IAAMkF,eAAe,GAAG,EAAxB;AACA,OAAO,IAAMC,WAAW,GAAG;AACvBpF,EAAAA,MADuB,kBAChBC,OADgB,EACmB;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AAAA,iDACtBF,OAAO,CAACoF,QADc;AAAA;;AAAA;AACtC,gEAAkC;AAAA,YAAvB3E,CAAuB;AAC9BwE,QAAAA,UAAU,CAAClF,MAAX,CAAkBU,CAAlB,EAAqBR,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAArB,EAA+CC,MAA/C;AACH;AAHqC;AAAA;AAAA;AAAA;AAAA;;AAItC,WAAON,MAAP;AACH,GANsB;AAOvBU,EAAAA,MAPuB,kBAOhBC,KAPgB,EAOTC,MAPS,EAOD;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQkF,eAAR,CAAb;;AACAlF,IAAAA,OAAO,CAACoF,QAAR,GAAmB,EAAnB;;AACA,WAAOtE,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAACoF,QAAR,CAAiBhE,IAAjB,CAAsB6D,UAAU,CAACtE,MAAX,CAAkBG,MAAlB,EAA0BA,MAAM,CAACT,MAAP,EAA1B,CAAtB;AACA;;AACJ;AACIS,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AANR;AAQH;;AACD,WAAOnB,OAAP;AACH,GAxBsB;AAyBvBsB,EAAAA,QAzBuB,oBAyBdhC,MAzBc,EAyBN;AACb,QAAMU,OAAO,qBAAQkF,eAAR,CAAb;;AACAlF,IAAAA,OAAO,CAACoF,QAAR,GAAmB,EAAnB;;AACA,QAAI9F,MAAM,CAAC8F,QAAP,KAAoBhF,SAApB,IAAiCd,MAAM,CAAC8F,QAAP,KAAoB,IAAzD,EAA+D;AAAA,mDAC3C9F,MAAM,CAAC8F,QADoC;AAAA;;AAAA;AAC3D,kEAAiC;AAAA,cAAtB7D,CAAsB;AAC7BvB,UAAAA,OAAO,CAACoF,QAAR,CAAiBhE,IAAjB,CAAsB6D,UAAU,CAAC3D,QAAX,CAAoBC,CAApB,CAAtB;AACH;AAH0D;AAAA;AAAA;AAAA;AAAA;AAI9D;;AACD,WAAOvB,OAAP;AACH,GAlCsB;AAmCvBwB,EAAAA,MAnCuB,kBAmChBxB,OAnCgB,EAmCP;AACZ,QAAMyB,GAAG,GAAG,EAAZ;;AACA,QAAIzB,OAAO,CAACoF,QAAZ,EAAsB;AAClB3D,MAAAA,GAAG,CAAC2D,QAAJ,GAAepF,OAAO,CAACoF,QAAR,CAAiB1D,GAAjB,CAAqB,UAACH,CAAD;AAAA,eAAOA,CAAC,GAAG0D,UAAU,CAACzD,MAAX,CAAkBD,CAAlB,CAAH,GAA0BnB,SAAlC;AAAA,OAArB,CAAf;AACH,KAFD,MAGK;AACDqB,MAAAA,GAAG,CAAC2D,QAAJ,GAAe,EAAf;AACH;;AACD,WAAO3D,GAAP;AACH,GA5CsB;AA6CvBE,EAAAA,WA7CuB,uBA6CXrC,MA7CW,EA6CH;AAChB,QAAMU,OAAO,qBAAQkF,eAAR,CAAb;;AACAlF,IAAAA,OAAO,CAACoF,QAAR,GAAmB,EAAnB;;AACA,QAAI9F,MAAM,CAAC8F,QAAP,KAAoBhF,SAApB,IAAiCd,MAAM,CAAC8F,QAAP,KAAoB,IAAzD,EAA+D;AAAA,mDAC3C9F,MAAM,CAAC8F,QADoC;AAAA;;AAAA;AAC3D,kEAAiC;AAAA,cAAtB7D,CAAsB;AAC7BvB,UAAAA,OAAO,CAACoF,QAAR,CAAiBhE,IAAjB,CAAsB6D,UAAU,CAACtD,WAAX,CAAuBJ,CAAvB,CAAtB;AACH;AAH0D;AAAA;AAAA;AAAA;AAAA;AAI9D;;AACD,WAAOvB,OAAP;AACH;AAtDsB,CAApB;AAwDP,IAAMqF,cAAc,GAAG;AACnBb,EAAAA,gBAAgB,EAAE,EADC;AAEnBC,EAAAA,gBAAgB,EAAE,EAFC;AAGnBa,EAAAA,MAAM,EAAE;AAHW,CAAvB;AAKA,OAAO,IAAMC,UAAU,GAAG;AACtBxF,EAAAA,MADsB,kBACfC,OADe,EACoB;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACwE,gBAAR,KAA6B,EAAjC,EAAqC;AACjCvE,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACwE,gBAAjC;AACH;;AACD,QAAIxE,OAAO,CAACyE,gBAAR,KAA6B,EAAjC,EAAqC;AACjCxE,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACyE,gBAAjC;AACH;;AACD,QAAIzE,OAAO,CAACsF,MAAR,KAAmB,EAAvB,EAA2B;AACvBrF,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACsF,MAAjC;AACH;;AACD,WAAOrF,MAAP;AACH,GAZqB;AAatBU,EAAAA,MAbsB,kBAafC,KAbe,EAaRC,MAbQ,EAaA;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQqF,cAAR,CAAb;;AACA,WAAOvE,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAACwE,gBAAR,GAA2B1D,MAAM,CAACmB,MAAP,EAA3B;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAACyE,gBAAR,GAA2B3D,MAAM,CAACmB,MAAP,EAA3B;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAACsF,MAAR,GAAiBxE,MAAM,CAACmB,MAAP,EAAjB;AACA;;AACJ;AACInB,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AAZR;AAcH;;AACD,WAAOnB,OAAP;AACH,GAnCqB;AAoCtBsB,EAAAA,QApCsB,oBAoCbhC,MApCa,EAoCL;AACb,QAAMU,OAAO,qBAAQqF,cAAR,CAAb;;AACA,QAAI/F,MAAM,CAACkF,gBAAP,KAA4BpE,SAA5B,IACAd,MAAM,CAACkF,gBAAP,KAA4B,IADhC,EACsC;AAClCxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2BtC,MAAM,CAAC5C,MAAM,CAACkF,gBAAR,CAAjC;AACH,KAHD,MAIK;AACDxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2B,EAA3B;AACH;;AACD,QAAIlF,MAAM,CAACmF,gBAAP,KAA4BrE,SAA5B,IACAd,MAAM,CAACmF,gBAAP,KAA4B,IADhC,EACsC;AAClCzE,MAAAA,OAAO,CAACyE,gBAAR,GAA2BvC,MAAM,CAAC5C,MAAM,CAACmF,gBAAR,CAAjC;AACH,KAHD,MAIK;AACDzE,MAAAA,OAAO,CAACyE,gBAAR,GAA2B,EAA3B;AACH;;AACD,QAAInF,MAAM,CAACgG,MAAP,KAAkBlF,SAAlB,IAA+Bd,MAAM,CAACgG,MAAP,KAAkB,IAArD,EAA2D;AACvDtF,MAAAA,OAAO,CAACsF,MAAR,GAAiBpD,MAAM,CAAC5C,MAAM,CAACgG,MAAR,CAAvB;AACH,KAFD,MAGK;AACDtF,MAAAA,OAAO,CAACsF,MAAR,GAAiB,EAAjB;AACH;;AACD,WAAOtF,OAAP;AACH,GA3DqB;AA4DtBwB,EAAAA,MA5DsB,kBA4DfxB,OA5De,EA4DN;AACZ,QAAMyB,GAAG,GAAG,EAAZ;AACAzB,IAAAA,OAAO,CAACwE,gBAAR,KAA6BpE,SAA7B,KACKqB,GAAG,CAAC+C,gBAAJ,GAAuBxE,OAAO,CAACwE,gBADpC;AAEAxE,IAAAA,OAAO,CAACyE,gBAAR,KAA6BrE,SAA7B,KACKqB,GAAG,CAACgD,gBAAJ,GAAuBzE,OAAO,CAACyE,gBADpC;AAEAzE,IAAAA,OAAO,CAACsF,MAAR,KAAmBlF,SAAnB,KAAiCqB,GAAG,CAAC6D,MAAJ,GAAatF,OAAO,CAACsF,MAAtD;AACA,WAAO7D,GAAP;AACH,GApEqB;AAqEtBE,EAAAA,WArEsB,uBAqEVrC,MArEU,EAqEF;AAChB,QAAMU,OAAO,qBAAQqF,cAAR,CAAb;;AACA,QAAI/F,MAAM,CAACkF,gBAAP,KAA4BpE,SAA5B,IACAd,MAAM,CAACkF,gBAAP,KAA4B,IADhC,EACsC;AAClCxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2BlF,MAAM,CAACkF,gBAAlC;AACH,KAHD,MAIK;AACDxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2B,EAA3B;AACH;;AACD,QAAIlF,MAAM,CAACmF,gBAAP,KAA4BrE,SAA5B,IACAd,MAAM,CAACmF,gBAAP,KAA4B,IADhC,EACsC;AAClCzE,MAAAA,OAAO,CAACyE,gBAAR,GAA2BnF,MAAM,CAACmF,gBAAlC;AACH,KAHD,MAIK;AACDzE,MAAAA,OAAO,CAACyE,gBAAR,GAA2B,EAA3B;AACH;;AACD,QAAInF,MAAM,CAACgG,MAAP,KAAkBlF,SAAlB,IAA+Bd,MAAM,CAACgG,MAAP,KAAkB,IAArD,EAA2D;AACvDtF,MAAAA,OAAO,CAACsF,MAAR,GAAiBhG,MAAM,CAACgG,MAAxB;AACH,KAFD,MAGK;AACDtF,MAAAA,OAAO,CAACsF,MAAR,GAAiB,EAAjB;AACH;;AACD,WAAOtF,OAAP;AACH;AA5FqB,CAAnB;AA8FP,IAAMwF,uBAAuB,GAAG;AAC5BhB,EAAAA,gBAAgB,EAAE,EADU;AAE5BC,EAAAA,gBAAgB,EAAE;AAFU,CAAhC;AAIA,OAAO,IAAMgB,mBAAmB,GAAG;AAC/B1F,EAAAA,MAD+B,kBACxBC,OADwB,EACW;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACwE,gBAAR,KAA6B,EAAjC,EAAqC;AACjCvE,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACwE,gBAAjC;AACH;;AACD,QAAIxE,OAAO,CAACyE,gBAAR,KAA6B,EAAjC,EAAqC;AACjCxE,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACyE,gBAAjC;AACH;;AANqC,iDAOtBzE,OAAO,CAAC0F,OAPc;AAAA;;AAAA;AAOtC,gEAAiC;AAAA,YAAtBjF,CAAsB;AAC7BkF,QAAAA,wBAAwB,CAAC5F,MAAzB,CAAgCU,CAAhC,EAAmCR,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAnC,EAA6DC,MAA7D;AACH;AATqC;AAAA;AAAA;AAAA;AAAA;;AAUtC,WAAON,MAAP;AACH,GAZ8B;AAa/BU,EAAAA,MAb+B,kBAaxBC,KAbwB,EAajBC,MAbiB,EAaT;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQwF,uBAAR,CAAb;;AACAxF,IAAAA,OAAO,CAAC0F,OAAR,GAAkB,EAAlB;;AACA,WAAO5E,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAACwE,gBAAR,GAA2B1D,MAAM,CAACmB,MAAP,EAA3B;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAACyE,gBAAR,GAA2B3D,MAAM,CAACmB,MAAP,EAA3B;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAAC0F,OAAR,CAAgBtE,IAAhB,CAAqBuE,wBAAwB,CAAChF,MAAzB,CAAgCG,MAAhC,EAAwCA,MAAM,CAACT,MAAP,EAAxC,CAArB;AACA;;AACJ;AACIS,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AAZR;AAcH;;AACD,WAAOnB,OAAP;AACH,GApC8B;AAqC/BsB,EAAAA,QArC+B,oBAqCtBhC,MArCsB,EAqCd;AACb,QAAMU,OAAO,qBAAQwF,uBAAR,CAAb;;AACAxF,IAAAA,OAAO,CAAC0F,OAAR,GAAkB,EAAlB;;AACA,QAAIpG,MAAM,CAACkF,gBAAP,KAA4BpE,SAA5B,IACAd,MAAM,CAACkF,gBAAP,KAA4B,IADhC,EACsC;AAClCxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2BtC,MAAM,CAAC5C,MAAM,CAACkF,gBAAR,CAAjC;AACH,KAHD,MAIK;AACDxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2B,EAA3B;AACH;;AACD,QAAIlF,MAAM,CAACmF,gBAAP,KAA4BrE,SAA5B,IACAd,MAAM,CAACmF,gBAAP,KAA4B,IADhC,EACsC;AAClCzE,MAAAA,OAAO,CAACyE,gBAAR,GAA2BvC,MAAM,CAAC5C,MAAM,CAACmF,gBAAR,CAAjC;AACH,KAHD,MAIK;AACDzE,MAAAA,OAAO,CAACyE,gBAAR,GAA2B,EAA3B;AACH;;AACD,QAAInF,MAAM,CAACoG,OAAP,KAAmBtF,SAAnB,IAAgCd,MAAM,CAACoG,OAAP,KAAmB,IAAvD,EAA6D;AAAA,mDACzCpG,MAAM,CAACoG,OADkC;AAAA;;AAAA;AACzD,kEAAgC;AAAA,cAArBnE,CAAqB;AAC5BvB,UAAAA,OAAO,CAAC0F,OAAR,CAAgBtE,IAAhB,CAAqBuE,wBAAwB,CAACrE,QAAzB,CAAkCC,CAAlC,CAArB;AACH;AAHwD;AAAA;AAAA;AAAA;AAAA;AAI5D;;AACD,WAAOvB,OAAP;AACH,GA5D8B;AA6D/BwB,EAAAA,MA7D+B,kBA6DxBxB,OA7DwB,EA6Df;AACZ,QAAMyB,GAAG,GAAG,EAAZ;AACAzB,IAAAA,OAAO,CAACwE,gBAAR,KAA6BpE,SAA7B,KACKqB,GAAG,CAAC+C,gBAAJ,GAAuBxE,OAAO,CAACwE,gBADpC;AAEAxE,IAAAA,OAAO,CAACyE,gBAAR,KAA6BrE,SAA7B,KACKqB,GAAG,CAACgD,gBAAJ,GAAuBzE,OAAO,CAACyE,gBADpC;;AAEA,QAAIzE,OAAO,CAAC0F,OAAZ,EAAqB;AACjBjE,MAAAA,GAAG,CAACiE,OAAJ,GAAc1F,OAAO,CAAC0F,OAAR,CAAgBhE,GAAhB,CAAoB,UAACH,CAAD;AAAA,eAAOA,CAAC,GAAGoE,wBAAwB,CAACnE,MAAzB,CAAgCD,CAAhC,CAAH,GAAwCnB,SAAhD;AAAA,OAApB,CAAd;AACH,KAFD,MAGK;AACDqB,MAAAA,GAAG,CAACiE,OAAJ,GAAc,EAAd;AACH;;AACD,WAAOjE,GAAP;AACH,GA1E8B;AA2E/BE,EAAAA,WA3E+B,uBA2EnBrC,MA3EmB,EA2EX;AAChB,QAAMU,OAAO,qBAAQwF,uBAAR,CAAb;;AACAxF,IAAAA,OAAO,CAAC0F,OAAR,GAAkB,EAAlB;;AACA,QAAIpG,MAAM,CAACkF,gBAAP,KAA4BpE,SAA5B,IACAd,MAAM,CAACkF,gBAAP,KAA4B,IADhC,EACsC;AAClCxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2BlF,MAAM,CAACkF,gBAAlC;AACH,KAHD,MAIK;AACDxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2B,EAA3B;AACH;;AACD,QAAIlF,MAAM,CAACmF,gBAAP,KAA4BrE,SAA5B,IACAd,MAAM,CAACmF,gBAAP,KAA4B,IADhC,EACsC;AAClCzE,MAAAA,OAAO,CAACyE,gBAAR,GAA2BnF,MAAM,CAACmF,gBAAlC;AACH,KAHD,MAIK;AACDzE,MAAAA,OAAO,CAACyE,gBAAR,GAA2B,EAA3B;AACH;;AACD,QAAInF,MAAM,CAACoG,OAAP,KAAmBtF,SAAnB,IAAgCd,MAAM,CAACoG,OAAP,KAAmB,IAAvD,EAA6D;AAAA,mDACzCpG,MAAM,CAACoG,OADkC;AAAA;;AAAA;AACzD,kEAAgC;AAAA,cAArBnE,CAAqB;AAC5BvB,UAAAA,OAAO,CAAC0F,OAAR,CAAgBtE,IAAhB,CAAqBuE,wBAAwB,CAAChE,WAAzB,CAAqCJ,CAArC,CAArB;AACH;AAHwD;AAAA;AAAA;AAAA;AAAA;AAI5D;;AACD,WAAOvB,OAAP;AACH;AAlG8B,CAA5B;AAoGP,IAAM4F,4BAA4B,GAAG;AACjCC,EAAAA,cAAc,EAAE,CADiB;AAEjCC,EAAAA,cAAc,EAAE,EAFiB;AAGjCC,EAAAA,OAAO,EAAE;AAHwB,CAArC;AAKA,OAAO,IAAMJ,wBAAwB,GAAG;AACpC5F,EAAAA,MADoC,kBAC7BC,OAD6B,EACM;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAAC6F,cAAR,KAA2B,CAA/B,EAAkC;AAC9B5F,MAAAA,MAAM,CAACI,MAAP,CAAc,CAAd,EAAiByD,KAAjB,CAAuB9D,OAAO,CAAC6F,cAA/B;AACH;;AACD,QAAI7F,OAAO,CAACgG,cAAR,KAA2B5F,SAA/B,EAA0C;AACtC3B,MAAAA,SAAS,CAACsB,MAAV,CAAiBwC,WAAW,CAACvC,OAAO,CAACgG,cAAT,CAA5B,EAAsD/F,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAtD,EAAgFC,MAAhF;AACH;;AACD,QAAIP,OAAO,CAAC8F,cAAR,KAA2B,EAA/B,EAAmC;AAC/B7F,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAAC8F,cAAjC;AACH;;AACD,QAAI9F,OAAO,CAAC+F,OAAR,KAAoB,EAAxB,EAA4B;AACxB9F,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAAC+F,OAAjC;AACH;;AACD,WAAO9F,MAAP;AACH,GAfmC;AAgBpCU,EAAAA,MAhBoC,kBAgB7BC,KAhB6B,EAgBtBC,MAhBsB,EAgBd;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBACN4F,4BADM,CAAb;;AAGA,WAAO9E,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAAC6F,cAAR,GAAyB5B,YAAY,CAACnD,MAAM,CAACgD,KAAP,EAAD,CAArC;AACA;;AACJ,aAAK,CAAL;AACI9D,UAAAA,OAAO,CAACgG,cAAR,GAAyBxD,aAAa,CAAC/D,SAAS,CAACkC,MAAV,CAAiBG,MAAjB,EAAyBA,MAAM,CAACT,MAAP,EAAzB,CAAD,CAAtC;AACA;;AACJ,aAAK,CAAL;AACIL,UAAAA,OAAO,CAAC8F,cAAR,GAAyBhF,MAAM,CAACmB,MAAP,EAAzB;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAAC+F,OAAR,GAAkBjF,MAAM,CAACmB,MAAP,EAAlB;AACA;;AACJ;AACInB,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AAfR;AAiBH;;AACD,WAAOnB,OAAP;AACH,GA3CmC;AA4CpCsB,EAAAA,QA5CoC,oBA4C3BhC,MA5C2B,EA4CnB;AACb,QAAMU,OAAO,qBACN4F,4BADM,CAAb;;AAGA,QAAItG,MAAM,CAACuG,cAAP,KAA0BzF,SAA1B,IAAuCd,MAAM,CAACuG,cAAP,KAA0B,IAArE,EAA2E;AACvE7F,MAAAA,OAAO,CAAC6F,cAAR,GAAyB1B,MAAM,CAAC7E,MAAM,CAACuG,cAAR,CAA/B;AACH,KAFD,MAGK;AACD7F,MAAAA,OAAO,CAAC6F,cAAR,GAAyB,CAAzB;AACH;;AACD,QAAIvG,MAAM,CAAC0G,cAAP,KAA0B5F,SAA1B,IAAuCd,MAAM,CAAC0G,cAAP,KAA0B,IAArE,EAA2E;AACvEhG,MAAAA,OAAO,CAACgG,cAAR,GAAyBvD,iBAAiB,CAACnD,MAAM,CAAC0G,cAAR,CAA1C;AACH,KAFD,MAGK;AACDhG,MAAAA,OAAO,CAACgG,cAAR,GAAyB5F,SAAzB;AACH;;AACD,QAAId,MAAM,CAACwG,cAAP,KAA0B1F,SAA1B,IAAuCd,MAAM,CAACwG,cAAP,KAA0B,IAArE,EAA2E;AACvE9F,MAAAA,OAAO,CAAC8F,cAAR,GAAyB5D,MAAM,CAAC5C,MAAM,CAACwG,cAAR,CAA/B;AACH,KAFD,MAGK;AACD9F,MAAAA,OAAO,CAAC8F,cAAR,GAAyB,EAAzB;AACH;;AACD,QAAIxG,MAAM,CAACyG,OAAP,KAAmB3F,SAAnB,IAAgCd,MAAM,CAACyG,OAAP,KAAmB,IAAvD,EAA6D;AACzD/F,MAAAA,OAAO,CAAC+F,OAAR,GAAkB7D,MAAM,CAAC5C,MAAM,CAACyG,OAAR,CAAxB;AACH,KAFD,MAGK;AACD/F,MAAAA,OAAO,CAAC+F,OAAR,GAAkB,EAAlB;AACH;;AACD,WAAO/F,OAAP;AACH,GAzEmC;AA0EpCwB,EAAAA,MA1EoC,kBA0E7BxB,OA1E6B,EA0EpB;AACZ,QAAMyB,GAAG,GAAG,EAAZ;AACAzB,IAAAA,OAAO,CAAC6F,cAAR,KAA2BzF,SAA3B,KACKqB,GAAG,CAACoE,cAAJ,GAAqB7F,OAAO,CAAC6F,cADlC;AAEA7F,IAAAA,OAAO,CAACgG,cAAR,KAA2B5F,SAA3B,KACKqB,GAAG,CAACuE,cAAJ,GACGhG,OAAO,CAACgG,cAAR,KAA2B5F,SAA3B,GACMJ,OAAO,CAACgG,cAAR,CAAuBtD,WAAvB,EADN,GAEM,IAJd;AAKA1C,IAAAA,OAAO,CAAC8F,cAAR,KAA2B1F,SAA3B,KACKqB,GAAG,CAACqE,cAAJ,GAAqB9F,OAAO,CAAC8F,cADlC;AAEA9F,IAAAA,OAAO,CAAC+F,OAAR,KAAoB3F,SAApB,KAAkCqB,GAAG,CAACsE,OAAJ,GAAc/F,OAAO,CAAC+F,OAAxD;AACA,WAAOtE,GAAP;AACH,GAvFmC;AAwFpCE,EAAAA,WAxFoC,uBAwFxBrC,MAxFwB,EAwFhB;AAChB,QAAMU,OAAO,qBACN4F,4BADM,CAAb;;AAGA,QAAItG,MAAM,CAACuG,cAAP,KAA0BzF,SAA1B,IAAuCd,MAAM,CAACuG,cAAP,KAA0B,IAArE,EAA2E;AACvE7F,MAAAA,OAAO,CAAC6F,cAAR,GAAyBvG,MAAM,CAACuG,cAAhC;AACH,KAFD,MAGK;AACD7F,MAAAA,OAAO,CAAC6F,cAAR,GAAyB,CAAzB;AACH;;AACD,QAAIvG,MAAM,CAAC0G,cAAP,KAA0B5F,SAA1B,IAAuCd,MAAM,CAAC0G,cAAP,KAA0B,IAArE,EAA2E;AACvEhG,MAAAA,OAAO,CAACgG,cAAR,GAAyB1G,MAAM,CAAC0G,cAAhC;AACH,KAFD,MAGK;AACDhG,MAAAA,OAAO,CAACgG,cAAR,GAAyB5F,SAAzB;AACH;;AACD,QAAId,MAAM,CAACwG,cAAP,KAA0B1F,SAA1B,IAAuCd,MAAM,CAACwG,cAAP,KAA0B,IAArE,EAA2E;AACvE9F,MAAAA,OAAO,CAAC8F,cAAR,GAAyBxG,MAAM,CAACwG,cAAhC;AACH,KAFD,MAGK;AACD9F,MAAAA,OAAO,CAAC8F,cAAR,GAAyB,EAAzB;AACH;;AACD,QAAIxG,MAAM,CAACyG,OAAP,KAAmB3F,SAAnB,IAAgCd,MAAM,CAACyG,OAAP,KAAmB,IAAvD,EAA6D;AACzD/F,MAAAA,OAAO,CAAC+F,OAAR,GAAkBzG,MAAM,CAACyG,OAAzB;AACH,KAFD,MAGK;AACD/F,MAAAA,OAAO,CAAC+F,OAAR,GAAkB,EAAlB;AACH;;AACD,WAAO/F,OAAP;AACH;AArHmC,CAAjC;AAuHP,IAAMiG,qBAAqB,GAAG;AAC1BJ,EAAAA,cAAc,EAAE,CADU;AAE1BC,EAAAA,cAAc,EAAE,EAFU;AAG1BI,EAAAA,SAAS,EAAE;AAHe,CAA9B;AAKA,OAAO,IAAMC,iBAAiB,GAAG;AAC7BpG,EAAAA,MAD6B,kBACtBC,OADsB,EACa;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAAC6F,cAAR,KAA2B,CAA/B,EAAkC;AAC9B5F,MAAAA,MAAM,CAACI,MAAP,CAAc,CAAd,EAAiByD,KAAjB,CAAuB9D,OAAO,CAAC6F,cAA/B;AACH;;AACD,QAAI7F,OAAO,CAACgG,cAAR,KAA2B5F,SAA/B,EAA0C;AACtC3B,MAAAA,SAAS,CAACsB,MAAV,CAAiBwC,WAAW,CAACvC,OAAO,CAACgG,cAAT,CAA5B,EAAsD/F,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAtD,EAAgFC,MAAhF;AACH;;AACD,QAAIP,OAAO,CAAC8F,cAAR,KAA2B,EAA/B,EAAmC;AAC/B7F,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAAC8F,cAAjC;AACH;;AACD,QAAI9F,OAAO,CAACkG,SAAR,KAAsB,EAA1B,EAA8B;AAC1BjG,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACkG,SAAjC;AACH;;AACD,WAAOjG,MAAP;AACH,GAf4B;AAgB7BU,EAAAA,MAhB6B,kBAgBtBC,KAhBsB,EAgBfC,MAhBe,EAgBP;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQiG,qBAAR,CAAb;;AACA,WAAOnF,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAAC6F,cAAR,GAAyB5B,YAAY,CAACnD,MAAM,CAACgD,KAAP,EAAD,CAArC;AACA;;AACJ,aAAK,CAAL;AACI9D,UAAAA,OAAO,CAACgG,cAAR,GAAyBxD,aAAa,CAAC/D,SAAS,CAACkC,MAAV,CAAiBG,MAAjB,EAAyBA,MAAM,CAACT,MAAP,EAAzB,CAAD,CAAtC;AACA;;AACJ,aAAK,CAAL;AACIL,UAAAA,OAAO,CAAC8F,cAAR,GAAyBhF,MAAM,CAACmB,MAAP,EAAzB;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAACkG,SAAR,GAAoBpF,MAAM,CAACmB,MAAP,EAApB;AACA;;AACJ;AACInB,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AAfR;AAiBH;;AACD,WAAOnB,OAAP;AACH,GAzC4B;AA0C7BsB,EAAAA,QA1C6B,oBA0CpBhC,MA1CoB,EA0CZ;AACb,QAAMU,OAAO,qBAAQiG,qBAAR,CAAb;;AACA,QAAI3G,MAAM,CAACuG,cAAP,KAA0BzF,SAA1B,IAAuCd,MAAM,CAACuG,cAAP,KAA0B,IAArE,EAA2E;AACvE7F,MAAAA,OAAO,CAAC6F,cAAR,GAAyB1B,MAAM,CAAC7E,MAAM,CAACuG,cAAR,CAA/B;AACH,KAFD,MAGK;AACD7F,MAAAA,OAAO,CAAC6F,cAAR,GAAyB,CAAzB;AACH;;AACD,QAAIvG,MAAM,CAAC0G,cAAP,KAA0B5F,SAA1B,IAAuCd,MAAM,CAAC0G,cAAP,KAA0B,IAArE,EAA2E;AACvEhG,MAAAA,OAAO,CAACgG,cAAR,GAAyBvD,iBAAiB,CAACnD,MAAM,CAAC0G,cAAR,CAA1C;AACH,KAFD,MAGK;AACDhG,MAAAA,OAAO,CAACgG,cAAR,GAAyB5F,SAAzB;AACH;;AACD,QAAId,MAAM,CAACwG,cAAP,KAA0B1F,SAA1B,IAAuCd,MAAM,CAACwG,cAAP,KAA0B,IAArE,EAA2E;AACvE9F,MAAAA,OAAO,CAAC8F,cAAR,GAAyB5D,MAAM,CAAC5C,MAAM,CAACwG,cAAR,CAA/B;AACH,KAFD,MAGK;AACD9F,MAAAA,OAAO,CAAC8F,cAAR,GAAyB,EAAzB;AACH;;AACD,QAAIxG,MAAM,CAAC4G,SAAP,KAAqB9F,SAArB,IAAkCd,MAAM,CAAC4G,SAAP,KAAqB,IAA3D,EAAiE;AAC7DlG,MAAAA,OAAO,CAACkG,SAAR,GAAoBhE,MAAM,CAAC5C,MAAM,CAAC4G,SAAR,CAA1B;AACH,KAFD,MAGK;AACDlG,MAAAA,OAAO,CAACkG,SAAR,GAAoB,EAApB;AACH;;AACD,WAAOlG,OAAP;AACH,GArE4B;AAsE7BwB,EAAAA,MAtE6B,kBAsEtBxB,OAtEsB,EAsEb;AACZ,QAAMyB,GAAG,GAAG,EAAZ;AACAzB,IAAAA,OAAO,CAAC6F,cAAR,KAA2BzF,SAA3B,KACKqB,GAAG,CAACoE,cAAJ,GAAqB7F,OAAO,CAAC6F,cADlC;AAEA7F,IAAAA,OAAO,CAACgG,cAAR,KAA2B5F,SAA3B,KACKqB,GAAG,CAACuE,cAAJ,GACGhG,OAAO,CAACgG,cAAR,KAA2B5F,SAA3B,GACMJ,OAAO,CAACgG,cAAR,CAAuBtD,WAAvB,EADN,GAEM,IAJd;AAKA1C,IAAAA,OAAO,CAAC8F,cAAR,KAA2B1F,SAA3B,KACKqB,GAAG,CAACqE,cAAJ,GAAqB9F,OAAO,CAAC8F,cADlC;AAEA9F,IAAAA,OAAO,CAACkG,SAAR,KAAsB9F,SAAtB,KAAoCqB,GAAG,CAACyE,SAAJ,GAAgBlG,OAAO,CAACkG,SAA5D;AACA,WAAOzE,GAAP;AACH,GAnF4B;AAoF7BE,EAAAA,WApF6B,uBAoFjBrC,MApFiB,EAoFT;AAChB,QAAMU,OAAO,qBAAQiG,qBAAR,CAAb;;AACA,QAAI3G,MAAM,CAACuG,cAAP,KAA0BzF,SAA1B,IAAuCd,MAAM,CAACuG,cAAP,KAA0B,IAArE,EAA2E;AACvE7F,MAAAA,OAAO,CAAC6F,cAAR,GAAyBvG,MAAM,CAACuG,cAAhC;AACH,KAFD,MAGK;AACD7F,MAAAA,OAAO,CAAC6F,cAAR,GAAyB,CAAzB;AACH;;AACD,QAAIvG,MAAM,CAAC0G,cAAP,KAA0B5F,SAA1B,IAAuCd,MAAM,CAAC0G,cAAP,KAA0B,IAArE,EAA2E;AACvEhG,MAAAA,OAAO,CAACgG,cAAR,GAAyB1G,MAAM,CAAC0G,cAAhC;AACH,KAFD,MAGK;AACDhG,MAAAA,OAAO,CAACgG,cAAR,GAAyB5F,SAAzB;AACH;;AACD,QAAId,MAAM,CAACwG,cAAP,KAA0B1F,SAA1B,IAAuCd,MAAM,CAACwG,cAAP,KAA0B,IAArE,EAA2E;AACvE9F,MAAAA,OAAO,CAAC8F,cAAR,GAAyBxG,MAAM,CAACwG,cAAhC;AACH,KAFD,MAGK;AACD9F,MAAAA,OAAO,CAAC8F,cAAR,GAAyB,EAAzB;AACH;;AACD,QAAIxG,MAAM,CAAC4G,SAAP,KAAqB9F,SAArB,IAAkCd,MAAM,CAAC4G,SAAP,KAAqB,IAA3D,EAAiE;AAC7DlG,MAAAA,OAAO,CAACkG,SAAR,GAAoB5G,MAAM,CAAC4G,SAA3B;AACH,KAFD,MAGK;AACDlG,MAAAA,OAAO,CAACkG,SAAR,GAAoB,EAApB;AACH;;AACD,WAAOlG,OAAP;AACH;AA/G4B,CAA1B;AAiHP,IAAMoG,gBAAgB,GAAG;AACrB5B,EAAAA,gBAAgB,EAAE,EADG;AAErBO,EAAAA,mBAAmB,EAAE,EAFA;AAGrBC,EAAAA,mBAAmB,EAAE;AAHA,CAAzB;AAKA,OAAO,IAAMqB,YAAY,GAAG;AACxBtG,EAAAA,MADwB,kBACjBC,OADiB,EACkB;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACwE,gBAAR,KAA6B,EAAjC,EAAqC;AACjCvE,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACwE,gBAAjC;AACH;;AACD,QAAIxE,OAAO,CAAC+E,mBAAR,KAAgC,EAApC,EAAwC;AACpC9E,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAAC+E,mBAAjC;AACH;;AACD,QAAI/E,OAAO,CAACgF,mBAAR,KAAgC,EAApC,EAAwC;AACpC/E,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACgF,mBAAjC;AACH;;AATqC,iDAUtBhF,OAAO,CAAC0F,OAVc;AAAA;;AAAA;AAUtC,gEAAiC;AAAA,YAAtBjF,CAAsB;AAC7B0F,QAAAA,iBAAiB,CAACpG,MAAlB,CAAyBU,CAAzB,EAA4BR,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA5B,EAAsDC,MAAtD;AACH;AAZqC;AAAA;AAAA;AAAA;AAAA;;AAatC,WAAON,MAAP;AACH,GAfuB;AAgBxBU,EAAAA,MAhBwB,kBAgBjBC,KAhBiB,EAgBVC,MAhBU,EAgBF;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQoG,gBAAR,CAAb;;AACApG,IAAAA,OAAO,CAAC0F,OAAR,GAAkB,EAAlB;;AACA,WAAO5E,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAACwE,gBAAR,GAA2B1D,MAAM,CAACmB,MAAP,EAA3B;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAAC+E,mBAAR,GAA8BjE,MAAM,CAACmB,MAAP,EAA9B;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAACgF,mBAAR,GAA8BlE,MAAM,CAACmB,MAAP,EAA9B;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAAC0F,OAAR,CAAgBtE,IAAhB,CAAqB+E,iBAAiB,CAACxF,MAAlB,CAAyBG,MAAzB,EAAiCA,MAAM,CAACT,MAAP,EAAjC,CAArB;AACA;;AACJ;AACIS,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AAfR;AAiBH;;AACD,WAAOnB,OAAP;AACH,GA1CuB;AA2CxBsB,EAAAA,QA3CwB,oBA2CfhC,MA3Ce,EA2CP;AACb,QAAMU,OAAO,qBAAQoG,gBAAR,CAAb;;AACApG,IAAAA,OAAO,CAAC0F,OAAR,GAAkB,EAAlB;;AACA,QAAIpG,MAAM,CAACkF,gBAAP,KAA4BpE,SAA5B,IACAd,MAAM,CAACkF,gBAAP,KAA4B,IADhC,EACsC;AAClCxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2BtC,MAAM,CAAC5C,MAAM,CAACkF,gBAAR,CAAjC;AACH,KAHD,MAIK;AACDxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2B,EAA3B;AACH;;AACD,QAAIlF,MAAM,CAACyF,mBAAP,KAA+B3E,SAA/B,IACAd,MAAM,CAACyF,mBAAP,KAA+B,IADnC,EACyC;AACrC/E,MAAAA,OAAO,CAAC+E,mBAAR,GAA8B7C,MAAM,CAAC5C,MAAM,CAACyF,mBAAR,CAApC;AACH,KAHD,MAIK;AACD/E,MAAAA,OAAO,CAAC+E,mBAAR,GAA8B,EAA9B;AACH;;AACD,QAAIzF,MAAM,CAAC0F,mBAAP,KAA+B5E,SAA/B,IACAd,MAAM,CAAC0F,mBAAP,KAA+B,IADnC,EACyC;AACrChF,MAAAA,OAAO,CAACgF,mBAAR,GAA8B9C,MAAM,CAAC5C,MAAM,CAAC0F,mBAAR,CAApC;AACH,KAHD,MAIK;AACDhF,MAAAA,OAAO,CAACgF,mBAAR,GAA8B,EAA9B;AACH;;AACD,QAAI1F,MAAM,CAACoG,OAAP,KAAmBtF,SAAnB,IAAgCd,MAAM,CAACoG,OAAP,KAAmB,IAAvD,EAA6D;AAAA,mDACzCpG,MAAM,CAACoG,OADkC;AAAA;;AAAA;AACzD,kEAAgC;AAAA,cAArBnE,CAAqB;AAC5BvB,UAAAA,OAAO,CAAC0F,OAAR,CAAgBtE,IAAhB,CAAqB+E,iBAAiB,CAAC7E,QAAlB,CAA2BC,CAA3B,CAArB;AACH;AAHwD;AAAA;AAAA;AAAA;AAAA;AAI5D;;AACD,WAAOvB,OAAP;AACH,GAzEuB;AA0ExBwB,EAAAA,MA1EwB,kBA0EjBxB,OA1EiB,EA0ER;AACZ,QAAMyB,GAAG,GAAG,EAAZ;AACAzB,IAAAA,OAAO,CAACwE,gBAAR,KAA6BpE,SAA7B,KACKqB,GAAG,CAAC+C,gBAAJ,GAAuBxE,OAAO,CAACwE,gBADpC;AAEAxE,IAAAA,OAAO,CAAC+E,mBAAR,KAAgC3E,SAAhC,KACKqB,GAAG,CAACsD,mBAAJ,GAA0B/E,OAAO,CAAC+E,mBADvC;AAEA/E,IAAAA,OAAO,CAACgF,mBAAR,KAAgC5E,SAAhC,KACKqB,GAAG,CAACuD,mBAAJ,GAA0BhF,OAAO,CAACgF,mBADvC;;AAEA,QAAIhF,OAAO,CAAC0F,OAAZ,EAAqB;AACjBjE,MAAAA,GAAG,CAACiE,OAAJ,GAAc1F,OAAO,CAAC0F,OAAR,CAAgBhE,GAAhB,CAAoB,UAACH,CAAD;AAAA,eAAOA,CAAC,GAAG4E,iBAAiB,CAAC3E,MAAlB,CAAyBD,CAAzB,CAAH,GAAiCnB,SAAzC;AAAA,OAApB,CAAd;AACH,KAFD,MAGK;AACDqB,MAAAA,GAAG,CAACiE,OAAJ,GAAc,EAAd;AACH;;AACD,WAAOjE,GAAP;AACH,GAzFuB;AA0FxBE,EAAAA,WA1FwB,uBA0FZrC,MA1FY,EA0FJ;AAChB,QAAMU,OAAO,qBAAQoG,gBAAR,CAAb;;AACApG,IAAAA,OAAO,CAAC0F,OAAR,GAAkB,EAAlB;;AACA,QAAIpG,MAAM,CAACkF,gBAAP,KAA4BpE,SAA5B,IACAd,MAAM,CAACkF,gBAAP,KAA4B,IADhC,EACsC;AAClCxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2BlF,MAAM,CAACkF,gBAAlC;AACH,KAHD,MAIK;AACDxE,MAAAA,OAAO,CAACwE,gBAAR,GAA2B,EAA3B;AACH;;AACD,QAAIlF,MAAM,CAACyF,mBAAP,KAA+B3E,SAA/B,IACAd,MAAM,CAACyF,mBAAP,KAA+B,IADnC,EACyC;AACrC/E,MAAAA,OAAO,CAAC+E,mBAAR,GAA8BzF,MAAM,CAACyF,mBAArC;AACH,KAHD,MAIK;AACD/E,MAAAA,OAAO,CAAC+E,mBAAR,GAA8B,EAA9B;AACH;;AACD,QAAIzF,MAAM,CAAC0F,mBAAP,KAA+B5E,SAA/B,IACAd,MAAM,CAAC0F,mBAAP,KAA+B,IADnC,EACyC;AACrChF,MAAAA,OAAO,CAACgF,mBAAR,GAA8B1F,MAAM,CAAC0F,mBAArC;AACH,KAHD,MAIK;AACDhF,MAAAA,OAAO,CAACgF,mBAAR,GAA8B,EAA9B;AACH;;AACD,QAAI1F,MAAM,CAACoG,OAAP,KAAmBtF,SAAnB,IAAgCd,MAAM,CAACoG,OAAP,KAAmB,IAAvD,EAA6D;AAAA,mDACzCpG,MAAM,CAACoG,OADkC;AAAA;;AAAA;AACzD,kEAAgC;AAAA,cAArBnE,CAAqB;AAC5BvB,UAAAA,OAAO,CAAC0F,OAAR,CAAgBtE,IAAhB,CAAqB+E,iBAAiB,CAACxE,WAAlB,CAA8BJ,CAA9B,CAArB;AACH;AAHwD;AAAA;AAAA;AAAA;AAAA;AAI5D;;AACD,WAAOvB,OAAP;AACH;AAxHuB,CAArB;AA0HP,IAAMsG,UAAU,GAAG;AACfC,EAAAA,aAAa,EAAE,CADA;AAEfC,EAAAA,UAAU,EAAE,CAFG;AAGfC,EAAAA,iBAAiB,EAAE,CAHJ;AAIfC,EAAAA,SAAS,EAAE;AAJI,CAAnB;AAMA,OAAO,IAAMC,MAAM,GAAG;AAClB5G,EAAAA,MADkB,kBACXC,OADW,EACwB;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAAC+D,aAAR,KAA0B3D,SAA9B,EAAyC;AACrCnB,MAAAA,QAAQ,CAACc,MAAT,CAAgBC,OAAO,CAAC+D,aAAxB,EAAuC9D,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAvC,EAAiEC,MAAjE;AACH;;AACD,QAAIP,OAAO,CAACuG,aAAR,KAA0B,CAA9B,EAAiC;AAC7BtG,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBA,MAAlB,CAAyBL,OAAO,CAACuG,aAAjC;AACH;;AACD,QAAIvG,OAAO,CAACwG,UAAR,KAAuB,CAA3B,EAA8B;AAC1BvG,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBA,MAAlB,CAAyBL,OAAO,CAACwG,UAAjC;AACH;;AACD,QAAIxG,OAAO,CAACyG,iBAAR,KAA8B,CAAlC,EAAqC;AACjCxG,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBA,MAAlB,CAAyBL,OAAO,CAACyG,iBAAjC;AACH;;AACD,QAAIzG,OAAO,CAAC0G,SAAR,KAAsB,EAA1B,EAA8B;AAC1BzG,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAAC0G,SAAjC;AACH;;AACD,WAAOzG,MAAP;AACH,GAlBiB;AAmBlBU,EAAAA,MAnBkB,kBAmBXC,KAnBW,EAmBJC,MAnBI,EAmBI;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQsG,UAAR,CAAb;;AACA,WAAOxF,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAAC+D,aAAR,GAAwB9E,QAAQ,CAAC0B,MAAT,CAAgBG,MAAhB,EAAwBA,MAAM,CAACT,MAAP,EAAxB,CAAxB;AACA;;AACJ,aAAK,CAAL;AACIL,UAAAA,OAAO,CAACuG,aAAR,GAAwBzF,MAAM,CAACT,MAAP,EAAxB;AACA;;AACJ,aAAK,CAAL;AACIL,UAAAA,OAAO,CAACwG,UAAR,GAAqB1F,MAAM,CAACT,MAAP,EAArB;AACA;;AACJ,aAAK,CAAL;AACIL,UAAAA,OAAO,CAACyG,iBAAR,GAA4B3F,MAAM,CAACT,MAAP,EAA5B;AACA;;AACJ,aAAK,CAAL;AACIL,UAAAA,OAAO,CAAC0G,SAAR,GAAoB5F,MAAM,CAACmB,MAAP,EAApB;AACA;;AACJ;AACInB,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AAlBR;AAoBH;;AACD,WAAOnB,OAAP;AACH,GA/CiB;AAgDlBsB,EAAAA,QAhDkB,oBAgDThC,MAhDS,EAgDD;AACb,QAAMU,OAAO,qBAAQsG,UAAR,CAAb;;AACA,QAAIhH,MAAM,CAACyE,aAAP,KAAyB3D,SAAzB,IAAsCd,MAAM,CAACyE,aAAP,KAAyB,IAAnE,EAAyE;AACrE/D,MAAAA,OAAO,CAAC+D,aAAR,GAAwB9E,QAAQ,CAACqC,QAAT,CAAkBhC,MAAM,CAACyE,aAAzB,CAAxB;AACH,KAFD,MAGK;AACD/D,MAAAA,OAAO,CAAC+D,aAAR,GAAwB3D,SAAxB;AACH;;AACD,QAAId,MAAM,CAACiH,aAAP,KAAyBnG,SAAzB,IAAsCd,MAAM,CAACiH,aAAP,KAAyB,IAAnE,EAAyE;AACrEvG,MAAAA,OAAO,CAACuG,aAAR,GAAwBpC,MAAM,CAAC7E,MAAM,CAACiH,aAAR,CAA9B;AACH,KAFD,MAGK;AACDvG,MAAAA,OAAO,CAACuG,aAAR,GAAwB,CAAxB;AACH;;AACD,QAAIjH,MAAM,CAACkH,UAAP,KAAsBpG,SAAtB,IAAmCd,MAAM,CAACkH,UAAP,KAAsB,IAA7D,EAAmE;AAC/DxG,MAAAA,OAAO,CAACwG,UAAR,GAAqBrC,MAAM,CAAC7E,MAAM,CAACkH,UAAR,CAA3B;AACH,KAFD,MAGK;AACDxG,MAAAA,OAAO,CAACwG,UAAR,GAAqB,CAArB;AACH;;AACD,QAAIlH,MAAM,CAACmH,iBAAP,KAA6BrG,SAA7B,IACAd,MAAM,CAACmH,iBAAP,KAA6B,IADjC,EACuC;AACnCzG,MAAAA,OAAO,CAACyG,iBAAR,GAA4BtC,MAAM,CAAC7E,MAAM,CAACmH,iBAAR,CAAlC;AACH,KAHD,MAIK;AACDzG,MAAAA,OAAO,CAACyG,iBAAR,GAA4B,CAA5B;AACH;;AACD,QAAInH,MAAM,CAACoH,SAAP,KAAqBtG,SAArB,IAAkCd,MAAM,CAACoH,SAAP,KAAqB,IAA3D,EAAiE;AAC7D1G,MAAAA,OAAO,CAAC0G,SAAR,GAAoBxE,MAAM,CAAC5C,MAAM,CAACoH,SAAR,CAA1B;AACH,KAFD,MAGK;AACD1G,MAAAA,OAAO,CAAC0G,SAAR,GAAoB,EAApB;AACH;;AACD,WAAO1G,OAAP;AACH,GAlFiB;AAmFlBwB,EAAAA,MAnFkB,kBAmFXxB,OAnFW,EAmFF;AACZ,QAAMyB,GAAG,GAAG,EAAZ;AACAzB,IAAAA,OAAO,CAAC+D,aAAR,KAA0B3D,SAA1B,KACKqB,GAAG,CAACsC,aAAJ,GAAoB/D,OAAO,CAAC+D,aAAR,GACf9E,QAAQ,CAACuC,MAAT,CAAgBxB,OAAO,CAAC+D,aAAxB,CADe,GAEf3D,SAHV;AAIAJ,IAAAA,OAAO,CAACuG,aAAR,KAA0BnG,SAA1B,KACKqB,GAAG,CAAC8E,aAAJ,GAAoBvG,OAAO,CAACuG,aADjC;AAEAvG,IAAAA,OAAO,CAACwG,UAAR,KAAuBpG,SAAvB,KAAqCqB,GAAG,CAAC+E,UAAJ,GAAiBxG,OAAO,CAACwG,UAA9D;AACAxG,IAAAA,OAAO,CAACyG,iBAAR,KAA8BrG,SAA9B,KACKqB,GAAG,CAACgF,iBAAJ,GAAwBzG,OAAO,CAACyG,iBADrC;AAEAzG,IAAAA,OAAO,CAAC0G,SAAR,KAAsBtG,SAAtB,KAAoCqB,GAAG,CAACiF,SAAJ,GAAgB1G,OAAO,CAAC0G,SAA5D;AACA,WAAOjF,GAAP;AACH,GAhGiB;AAiGlBE,EAAAA,WAjGkB,uBAiGNrC,MAjGM,EAiGE;AAChB,QAAMU,OAAO,qBAAQsG,UAAR,CAAb;;AACA,QAAIhH,MAAM,CAACyE,aAAP,KAAyB3D,SAAzB,IAAsCd,MAAM,CAACyE,aAAP,KAAyB,IAAnE,EAAyE;AACrE/D,MAAAA,OAAO,CAAC+D,aAAR,GAAwB9E,QAAQ,CAAC0C,WAAT,CAAqBrC,MAAM,CAACyE,aAA5B,CAAxB;AACH,KAFD,MAGK;AACD/D,MAAAA,OAAO,CAAC+D,aAAR,GAAwB3D,SAAxB;AACH;;AACD,QAAId,MAAM,CAACiH,aAAP,KAAyBnG,SAAzB,IAAsCd,MAAM,CAACiH,aAAP,KAAyB,IAAnE,EAAyE;AACrEvG,MAAAA,OAAO,CAACuG,aAAR,GAAwBjH,MAAM,CAACiH,aAA/B;AACH,KAFD,MAGK;AACDvG,MAAAA,OAAO,CAACuG,aAAR,GAAwB,CAAxB;AACH;;AACD,QAAIjH,MAAM,CAACkH,UAAP,KAAsBpG,SAAtB,IAAmCd,MAAM,CAACkH,UAAP,KAAsB,IAA7D,EAAmE;AAC/DxG,MAAAA,OAAO,CAACwG,UAAR,GAAqBlH,MAAM,CAACkH,UAA5B;AACH,KAFD,MAGK;AACDxG,MAAAA,OAAO,CAACwG,UAAR,GAAqB,CAArB;AACH;;AACD,QAAIlH,MAAM,CAACmH,iBAAP,KAA6BrG,SAA7B,IACAd,MAAM,CAACmH,iBAAP,KAA6B,IADjC,EACuC;AACnCzG,MAAAA,OAAO,CAACyG,iBAAR,GAA4BnH,MAAM,CAACmH,iBAAnC;AACH,KAHD,MAIK;AACDzG,MAAAA,OAAO,CAACyG,iBAAR,GAA4B,CAA5B;AACH;;AACD,QAAInH,MAAM,CAACoH,SAAP,KAAqBtG,SAArB,IAAkCd,MAAM,CAACoH,SAAP,KAAqB,IAA3D,EAAiE;AAC7D1G,MAAAA,OAAO,CAAC0G,SAAR,GAAoBpH,MAAM,CAACoH,SAA3B;AACH,KAFD,MAGK;AACD1G,MAAAA,OAAO,CAAC0G,SAAR,GAAoB,EAApB;AACH;;AACD,WAAO1G,OAAP;AACH;AAnIiB,CAAf;AAqIP,IAAM4G,sBAAsB,GAAG,EAA/B;AACA,OAAO,IAAMC,kBAAkB,GAAG;AAC9B9G,EAAAA,MAD8B,kBACvBC,OADuB,EACY;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAAC8G,UAAR,KAAuB1G,SAA3B,EAAsC;AAClCmF,MAAAA,UAAU,CAACxF,MAAX,CAAkBC,OAAO,CAAC8G,UAA1B,EAAsC7G,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAAtC,EAAgEC,MAAhE;AACH;;AACD,QAAIP,OAAO,CAAC+F,OAAR,KAAoB3F,SAAxB,EAAmC;AAC/BlB,MAAAA,IAAI,CAACa,MAAL,CAAYC,OAAO,CAAC+F,OAApB,EAA6B9F,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA7B,EAAuDC,MAAvD;AACH;;AACD,WAAON,MAAP;AACH,GAT6B;AAU9BU,EAAAA,MAV8B,kBAUvBC,KAVuB,EAUhBC,MAVgB,EAUR;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQ4G,sBAAR,CAAb;;AACA,WAAO9F,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAAC8G,UAAR,GAAqBvB,UAAU,CAAC5E,MAAX,CAAkBG,MAAlB,EAA0BA,MAAM,CAACT,MAAP,EAA1B,CAArB;AACA;;AACJ,aAAK,CAAL;AACIL,UAAAA,OAAO,CAAC+F,OAAR,GAAkB7G,IAAI,CAACyB,MAAL,CAAYG,MAAZ,EAAoBA,MAAM,CAACT,MAAP,EAApB,CAAlB;AACA;;AACJ;AACIS,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AATR;AAWH;;AACD,WAAOnB,OAAP;AACH,GA7B6B;AA8B9BsB,EAAAA,QA9B8B,oBA8BrBhC,MA9BqB,EA8Bb;AACb,QAAMU,OAAO,qBAAQ4G,sBAAR,CAAb;;AACA,QAAItH,MAAM,CAACwH,UAAP,KAAsB1G,SAAtB,IAAmCd,MAAM,CAACwH,UAAP,KAAsB,IAA7D,EAAmE;AAC/D9G,MAAAA,OAAO,CAAC8G,UAAR,GAAqBvB,UAAU,CAACjE,QAAX,CAAoBhC,MAAM,CAACwH,UAA3B,CAArB;AACH,KAFD,MAGK;AACD9G,MAAAA,OAAO,CAAC8G,UAAR,GAAqB1G,SAArB;AACH;;AACD,QAAId,MAAM,CAACyG,OAAP,KAAmB3F,SAAnB,IAAgCd,MAAM,CAACyG,OAAP,KAAmB,IAAvD,EAA6D;AACzD/F,MAAAA,OAAO,CAAC+F,OAAR,GAAkB7G,IAAI,CAACoC,QAAL,CAAchC,MAAM,CAACyG,OAArB,CAAlB;AACH,KAFD,MAGK;AACD/F,MAAAA,OAAO,CAAC+F,OAAR,GAAkB3F,SAAlB;AACH;;AACD,WAAOJ,OAAP;AACH,GA7C6B;AA8C9BwB,EAAAA,MA9C8B,kBA8CvBxB,OA9CuB,EA8Cd;AACZ,QAAMyB,GAAG,GAAG,EAAZ;AACAzB,IAAAA,OAAO,CAAC8G,UAAR,KAAuB1G,SAAvB,KACKqB,GAAG,CAACqF,UAAJ,GAAiB9G,OAAO,CAAC8G,UAAR,GACZvB,UAAU,CAAC/D,MAAX,CAAkBxB,OAAO,CAAC8G,UAA1B,CADY,GAEZ1G,SAHV;AAIAJ,IAAAA,OAAO,CAAC+F,OAAR,KAAoB3F,SAApB,KACKqB,GAAG,CAACsE,OAAJ,GAAc/F,OAAO,CAAC+F,OAAR,GACT7G,IAAI,CAACsC,MAAL,CAAYxB,OAAO,CAAC+F,OAApB,CADS,GAET3F,SAHV;AAIA,WAAOqB,GAAP;AACH,GAzD6B;AA0D9BE,EAAAA,WA1D8B,uBA0DlBrC,MA1DkB,EA0DV;AAChB,QAAMU,OAAO,qBAAQ4G,sBAAR,CAAb;;AACA,QAAItH,MAAM,CAACwH,UAAP,KAAsB1G,SAAtB,IAAmCd,MAAM,CAACwH,UAAP,KAAsB,IAA7D,EAAmE;AAC/D9G,MAAAA,OAAO,CAAC8G,UAAR,GAAqBvB,UAAU,CAAC5D,WAAX,CAAuBrC,MAAM,CAACwH,UAA9B,CAArB;AACH,KAFD,MAGK;AACD9G,MAAAA,OAAO,CAAC8G,UAAR,GAAqB1G,SAArB;AACH;;AACD,QAAId,MAAM,CAACyG,OAAP,KAAmB3F,SAAnB,IAAgCd,MAAM,CAACyG,OAAP,KAAmB,IAAvD,EAA6D;AACzD/F,MAAAA,OAAO,CAAC+F,OAAR,GAAkB7G,IAAI,CAACyC,WAAL,CAAiBrC,MAAM,CAACyG,OAAxB,CAAlB;AACH,KAFD,MAGK;AACD/F,MAAAA,OAAO,CAAC+F,OAAR,GAAkB3F,SAAlB;AACH;;AACD,WAAOJ,OAAP;AACH;AAzE6B,CAA3B;AA2EP,IAAM+G,6BAA6B,GAAG;AAAEhB,EAAAA,OAAO,EAAE;AAAX,CAAtC;AACA,OAAO,IAAMiB,yBAAyB,GAAG;AACrCjH,EAAAA,MADqC,kBAC9BC,OAD8B,EACK;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACiH,iBAAR,KAA8B7G,SAAlC,EAA6C;AACzC+F,MAAAA,iBAAiB,CAACpG,MAAlB,CAAyBC,OAAO,CAACiH,iBAAjC,EAAoDhH,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAApD,EAA8EC,MAA9E;AACH;;AACD,QAAIP,OAAO,CAAC+F,OAAR,KAAoB,EAAxB,EAA4B;AACxB9F,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAAC+F,OAAjC;AACH;;AACD,WAAO9F,MAAP;AACH,GAToC;AAUrCU,EAAAA,MAVqC,kBAU9BC,KAV8B,EAUvBC,MAVuB,EAUf;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBACN+G,6BADM,CAAb;;AAGA,WAAOjG,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAACiH,iBAAR,GAA4Bd,iBAAiB,CAACxF,MAAlB,CAAyBG,MAAzB,EAAiCA,MAAM,CAACT,MAAP,EAAjC,CAA5B;AACA;;AACJ,aAAK,CAAL;AACIL,UAAAA,OAAO,CAAC+F,OAAR,GAAkBjF,MAAM,CAACmB,MAAP,EAAlB;AACA;;AACJ;AACInB,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AATR;AAWH;;AACD,WAAOnB,OAAP;AACH,GA/BoC;AAgCrCsB,EAAAA,QAhCqC,oBAgC5BhC,MAhC4B,EAgCpB;AACb,QAAMU,OAAO,qBACN+G,6BADM,CAAb;;AAGA,QAAIzH,MAAM,CAAC2H,iBAAP,KAA6B7G,SAA7B,IACAd,MAAM,CAAC2H,iBAAP,KAA6B,IADjC,EACuC;AACnCjH,MAAAA,OAAO,CAACiH,iBAAR,GAA4Bd,iBAAiB,CAAC7E,QAAlB,CAA2BhC,MAAM,CAAC2H,iBAAlC,CAA5B;AACH,KAHD,MAIK;AACDjH,MAAAA,OAAO,CAACiH,iBAAR,GAA4B7G,SAA5B;AACH;;AACD,QAAId,MAAM,CAACyG,OAAP,KAAmB3F,SAAnB,IAAgCd,MAAM,CAACyG,OAAP,KAAmB,IAAvD,EAA6D;AACzD/F,MAAAA,OAAO,CAAC+F,OAAR,GAAkB7D,MAAM,CAAC5C,MAAM,CAACyG,OAAR,CAAxB;AACH,KAFD,MAGK;AACD/F,MAAAA,OAAO,CAAC+F,OAAR,GAAkB,EAAlB;AACH;;AACD,WAAO/F,OAAP;AACH,GAlDoC;AAmDrCwB,EAAAA,MAnDqC,kBAmD9BxB,OAnD8B,EAmDrB;AACZ,QAAMyB,GAAG,GAAG,EAAZ;AACAzB,IAAAA,OAAO,CAACiH,iBAAR,KAA8B7G,SAA9B,KACKqB,GAAG,CAACwF,iBAAJ,GAAwBjH,OAAO,CAACiH,iBAAR,GACnBd,iBAAiB,CAAC3E,MAAlB,CAAyBxB,OAAO,CAACiH,iBAAjC,CADmB,GAEnB7G,SAHV;AAIAJ,IAAAA,OAAO,CAAC+F,OAAR,KAAoB3F,SAApB,KAAkCqB,GAAG,CAACsE,OAAJ,GAAc/F,OAAO,CAAC+F,OAAxD;AACA,WAAOtE,GAAP;AACH,GA3DoC;AA4DrCE,EAAAA,WA5DqC,uBA4DzBrC,MA5DyB,EA4DjB;AAChB,QAAMU,OAAO,qBACN+G,6BADM,CAAb;;AAGA,QAAIzH,MAAM,CAAC2H,iBAAP,KAA6B7G,SAA7B,IACAd,MAAM,CAAC2H,iBAAP,KAA6B,IADjC,EACuC;AACnCjH,MAAAA,OAAO,CAACiH,iBAAR,GAA4Bd,iBAAiB,CAACxE,WAAlB,CAA8BrC,MAAM,CAAC2H,iBAArC,CAA5B;AACH,KAHD,MAIK;AACDjH,MAAAA,OAAO,CAACiH,iBAAR,GAA4B7G,SAA5B;AACH;;AACD,QAAId,MAAM,CAACyG,OAAP,KAAmB3F,SAAnB,IAAgCd,MAAM,CAACyG,OAAP,KAAmB,IAAvD,EAA6D;AACzD/F,MAAAA,OAAO,CAAC+F,OAAR,GAAkBzG,MAAM,CAACyG,OAAzB;AACH,KAFD,MAGK;AACD/F,MAAAA,OAAO,CAAC+F,OAAR,GAAkB,EAAlB;AACH;;AACD,WAAO/F,OAAP;AACH;AA9EoC,CAAlC;AAgFP,IAAMkH,wBAAwB,GAAG,EAAjC;AACA,OAAO,IAAMC,oBAAoB,GAAG;AAChCpH,EAAAA,MADgC,kBACzBC,OADyB,EACU;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACoH,YAAR,KAAyBhH,SAA7B,EAAwC;AACpCiG,MAAAA,YAAY,CAACtG,MAAb,CAAoBC,OAAO,CAACoH,YAA5B,EAA0CnH,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAA1C,EAAoEC,MAApE;AACH;;AAHqC,iDAItBP,OAAO,CAAC0F,OAJc;AAAA;;AAAA;AAItC,gEAAiC;AAAA,YAAtBjF,CAAsB;AAC7BuG,QAAAA,yBAAyB,CAACjH,MAA1B,CAAiCU,CAAjC,EAAoCR,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkBC,IAAlB,EAApC,EAA8DC,MAA9D;AACH;AANqC;AAAA;AAAA;AAAA;AAAA;;AAOtC,WAAON,MAAP;AACH,GAT+B;AAUhCU,EAAAA,MAVgC,kBAUzBC,KAVyB,EAUlBC,MAVkB,EAUV;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQkH,wBAAR,CAAb;;AACAlH,IAAAA,OAAO,CAAC0F,OAAR,GAAkB,EAAlB;;AACA,WAAO5E,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAACoH,YAAR,GAAuBf,YAAY,CAAC1F,MAAb,CAAoBG,MAApB,EAA4BA,MAAM,CAACT,MAAP,EAA5B,CAAvB;AACA;;AACJ,aAAK,CAAL;AACIL,UAAAA,OAAO,CAAC0F,OAAR,CAAgBtE,IAAhB,CAAqB4F,yBAAyB,CAACrG,MAA1B,CAAiCG,MAAjC,EAAyCA,MAAM,CAACT,MAAP,EAAzC,CAArB;AACA;;AACJ;AACIS,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AATR;AAWH;;AACD,WAAOnB,OAAP;AACH,GA9B+B;AA+BhCsB,EAAAA,QA/BgC,oBA+BvBhC,MA/BuB,EA+Bf;AACb,QAAMU,OAAO,qBAAQkH,wBAAR,CAAb;;AACAlH,IAAAA,OAAO,CAAC0F,OAAR,GAAkB,EAAlB;;AACA,QAAIpG,MAAM,CAAC8H,YAAP,KAAwBhH,SAAxB,IAAqCd,MAAM,CAAC8H,YAAP,KAAwB,IAAjE,EAAuE;AACnEpH,MAAAA,OAAO,CAACoH,YAAR,GAAuBf,YAAY,CAAC/E,QAAb,CAAsBhC,MAAM,CAAC8H,YAA7B,CAAvB;AACH,KAFD,MAGK;AACDpH,MAAAA,OAAO,CAACoH,YAAR,GAAuBhH,SAAvB;AACH;;AACD,QAAId,MAAM,CAACoG,OAAP,KAAmBtF,SAAnB,IAAgCd,MAAM,CAACoG,OAAP,KAAmB,IAAvD,EAA6D;AAAA,mDACzCpG,MAAM,CAACoG,OADkC;AAAA;;AAAA;AACzD,kEAAgC;AAAA,cAArBnE,CAAqB;AAC5BvB,UAAAA,OAAO,CAAC0F,OAAR,CAAgBtE,IAAhB,CAAqB4F,yBAAyB,CAAC1F,QAA1B,CAAmCC,CAAnC,CAArB;AACH;AAHwD;AAAA;AAAA;AAAA;AAAA;AAI5D;;AACD,WAAOvB,OAAP;AACH,GA9C+B;AA+ChCwB,EAAAA,MA/CgC,kBA+CzBxB,OA/CyB,EA+ChB;AACZ,QAAMyB,GAAG,GAAG,EAAZ;AACAzB,IAAAA,OAAO,CAACoH,YAAR,KAAyBhH,SAAzB,KACKqB,GAAG,CAAC2F,YAAJ,GAAmBpH,OAAO,CAACoH,YAAR,GACdf,YAAY,CAAC7E,MAAb,CAAoBxB,OAAO,CAACoH,YAA5B,CADc,GAEdhH,SAHV;;AAIA,QAAIJ,OAAO,CAAC0F,OAAZ,EAAqB;AACjBjE,MAAAA,GAAG,CAACiE,OAAJ,GAAc1F,OAAO,CAAC0F,OAAR,CAAgBhE,GAAhB,CAAoB,UAACH,CAAD;AAAA,eAAOA,CAAC,GAAGyF,yBAAyB,CAACxF,MAA1B,CAAiCD,CAAjC,CAAH,GAAyCnB,SAAjD;AAAA,OAApB,CAAd;AACH,KAFD,MAGK;AACDqB,MAAAA,GAAG,CAACiE,OAAJ,GAAc,EAAd;AACH;;AACD,WAAOjE,GAAP;AACH,GA5D+B;AA6DhCE,EAAAA,WA7DgC,uBA6DpBrC,MA7DoB,EA6DZ;AAChB,QAAMU,OAAO,qBAAQkH,wBAAR,CAAb;;AACAlH,IAAAA,OAAO,CAAC0F,OAAR,GAAkB,EAAlB;;AACA,QAAIpG,MAAM,CAAC8H,YAAP,KAAwBhH,SAAxB,IAAqCd,MAAM,CAAC8H,YAAP,KAAwB,IAAjE,EAAuE;AACnEpH,MAAAA,OAAO,CAACoH,YAAR,GAAuBf,YAAY,CAAC1E,WAAb,CAAyBrC,MAAM,CAAC8H,YAAhC,CAAvB;AACH,KAFD,MAGK;AACDpH,MAAAA,OAAO,CAACoH,YAAR,GAAuBhH,SAAvB;AACH;;AACD,QAAId,MAAM,CAACoG,OAAP,KAAmBtF,SAAnB,IAAgCd,MAAM,CAACoG,OAAP,KAAmB,IAAvD,EAA6D;AAAA,mDACzCpG,MAAM,CAACoG,OADkC;AAAA;;AAAA;AACzD,kEAAgC;AAAA,cAArBnE,CAAqB;AAC5BvB,UAAAA,OAAO,CAAC0F,OAAR,CAAgBtE,IAAhB,CAAqB4F,yBAAyB,CAACrF,WAA1B,CAAsCJ,CAAtC,CAArB;AACH;AAHwD;AAAA;AAAA;AAAA;AAAA;AAI5D;;AACD,WAAOvB,OAAP;AACH;AA5E+B,CAA7B;AA8EP,IAAMqH,QAAQ,GAAG;AAAEC,EAAAA,eAAe,EAAE,EAAnB;AAAuBC,EAAAA,YAAY,EAAE;AAArC,CAAjB;AACA,OAAO,IAAMC,IAAI,GAAG;AAChBzH,EAAAA,MADgB,kBACTC,OADS,EAC0B;AAAA,QAA1BC,MAA0B,uEAAjBpB,MAAM,CAACqB,MAAP,EAAiB;;AACtC,QAAIF,OAAO,CAACsH,eAAR,KAA4B,EAAhC,EAAoC;AAChCrH,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACsH,eAAjC;AACH;;AACD,QAAItH,OAAO,CAACuH,YAAR,KAAyB,EAA7B,EAAiC;AAC7BtH,MAAAA,MAAM,CAACI,MAAP,CAAc,EAAd,EAAkB4B,MAAlB,CAAyBjC,OAAO,CAACuH,YAAjC;AACH;;AACD,WAAOtH,MAAP;AACH,GATe;AAUhBU,EAAAA,MAVgB,kBAUTC,KAVS,EAUFC,MAVE,EAUM;AAClB,QAAMC,MAAM,GAAGF,KAAK,YAAYG,UAAjB,GAA8B,IAAIjC,MAAJ,CAAW8B,KAAX,CAA9B,GAAkDA,KAAjE;AACA,QAAII,GAAG,GAAGH,MAAM,KAAKT,SAAX,GAAuBU,MAAM,CAACG,GAA9B,GAAoCH,MAAM,CAACI,GAAP,GAAaL,MAA3D;;AACA,QAAMb,OAAO,qBAAQqH,QAAR,CAAb;;AACA,WAAOvG,MAAM,CAACI,GAAP,GAAaF,GAApB,EAAyB;AACrB,UAAMG,GAAG,GAAGL,MAAM,CAACT,MAAP,EAAZ;;AACA,cAAQc,GAAG,KAAK,CAAhB;AACI,aAAK,CAAL;AACInB,UAAAA,OAAO,CAACsH,eAAR,GAA0BxG,MAAM,CAACmB,MAAP,EAA1B;AACA;;AACJ,aAAK,CAAL;AACIjC,UAAAA,OAAO,CAACuH,YAAR,GAAuBzG,MAAM,CAACmB,MAAP,EAAvB;AACA;;AACJ;AACInB,UAAAA,MAAM,CAACO,QAAP,CAAgBF,GAAG,GAAG,CAAtB;AACA;AATR;AAWH;;AACD,WAAOnB,OAAP;AACH,GA7Be;AA8BhBsB,EAAAA,QA9BgB,oBA8BPhC,MA9BO,EA8BC;AACb,QAAMU,OAAO,qBAAQqH,QAAR,CAAb;;AACA,QAAI/H,MAAM,CAACgI,eAAP,KAA2BlH,SAA3B,IACAd,MAAM,CAACgI,eAAP,KAA2B,IAD/B,EACqC;AACjCtH,MAAAA,OAAO,CAACsH,eAAR,GAA0BpF,MAAM,CAAC5C,MAAM,CAACgI,eAAR,CAAhC;AACH,KAHD,MAIK;AACDtH,MAAAA,OAAO,CAACsH,eAAR,GAA0B,EAA1B;AACH;;AACD,QAAIhI,MAAM,CAACiI,YAAP,KAAwBnH,SAAxB,IAAqCd,MAAM,CAACiI,YAAP,KAAwB,IAAjE,EAAuE;AACnEvH,MAAAA,OAAO,CAACuH,YAAR,GAAuBrF,MAAM,CAAC5C,MAAM,CAACiI,YAAR,CAA7B;AACH,KAFD,MAGK;AACDvH,MAAAA,OAAO,CAACuH,YAAR,GAAuB,EAAvB;AACH;;AACD,WAAOvH,OAAP;AACH,GA9Ce;AA+ChBwB,EAAAA,MA/CgB,kBA+CTxB,OA/CS,EA+CA;AACZ,QAAMyB,GAAG,GAAG,EAAZ;AACAzB,IAAAA,OAAO,CAACsH,eAAR,KAA4BlH,SAA5B,KACKqB,GAAG,CAAC6F,eAAJ,GAAsBtH,OAAO,CAACsH,eADnC;AAEAtH,IAAAA,OAAO,CAACuH,YAAR,KAAyBnH,SAAzB,KACKqB,GAAG,CAAC8F,YAAJ,GAAmBvH,OAAO,CAACuH,YADhC;AAEA,WAAO9F,GAAP;AACH,GAtDe;AAuDhBE,EAAAA,WAvDgB,uBAuDJrC,MAvDI,EAuDI;AAChB,QAAMU,OAAO,qBAAQqH,QAAR,CAAb;;AACA,QAAI/H,MAAM,CAACgI,eAAP,KAA2BlH,SAA3B,IACAd,MAAM,CAACgI,eAAP,KAA2B,IAD/B,EACqC;AACjCtH,MAAAA,OAAO,CAACsH,eAAR,GAA0BhI,MAAM,CAACgI,eAAjC;AACH,KAHD,MAIK;AACDtH,MAAAA,OAAO,CAACsH,eAAR,GAA0B,EAA1B;AACH;;AACD,QAAIhI,MAAM,CAACiI,YAAP,KAAwBnH,SAAxB,IAAqCd,MAAM,CAACiI,YAAP,KAAwB,IAAjE,EAAuE;AACnEvH,MAAAA,OAAO,CAACuH,YAAR,GAAuBjI,MAAM,CAACiI,YAA9B;AACH,KAFD,MAGK;AACDvH,MAAAA,OAAO,CAACuH,YAAR,GAAuB,EAAvB;AACH;;AACD,WAAOvH,OAAP;AACH;AAvEe,CAAb;;AAyEP,IAAIyH,UAAU,GAAI,YAAM;AACpB,MAAI,OAAOA,UAAP,KAAsB,WAA1B,EACI,OAAOA,UAAP;AACJ,MAAI,OAAOC,IAAP,KAAgB,WAApB,EACI,OAAOA,IAAP;AACJ,MAAI,OAAOC,MAAP,KAAkB,WAAtB,EACI,OAAOA,MAAP;AACJ,MAAI,OAAOC,MAAP,KAAkB,WAAtB,EACI,OAAOA,MAAP;AACJ,QAAM,gCAAN;AACH,CAVgB,EAAjB;;AAWA,SAASrF,WAAT,CAAqBsF,IAArB,EAA2B;AACvB,MAAMC,OAAO,GAAGD,IAAI,CAACE,OAAL,KAAiB,IAAjC;AACA,MAAMC,KAAK,GAAIH,IAAI,CAACE,OAAL,KAAiB,IAAlB,GAA0B,OAAxC;AACA,SAAO;AAAED,IAAAA,OAAO,EAAPA,OAAF;AAAWE,IAAAA,KAAK,EAALA;AAAX,GAAP;AACH;;AACD,SAASxF,aAAT,CAAuByF,CAAvB,EAA0B;AACtB,MAAIC,MAAM,GAAGD,CAAC,CAACH,OAAF,GAAY,IAAzB;AACAI,EAAAA,MAAM,IAAID,CAAC,CAACD,KAAF,GAAU,OAApB;AACA,SAAO,IAAIG,IAAJ,CAASD,MAAT,CAAP;AACH;;AACD,SAASzF,iBAAT,CAA2B2F,CAA3B,EAA8B;AAC1B,MAAIA,CAAC,YAAYD,IAAjB,EAAuB;AACnB,WAAOC,CAAP;AACH,GAFD,MAGK,IAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B;AAC5B,WAAO,IAAID,IAAJ,CAASC,CAAT,CAAP;AACH,GAFI,MAGA;AACD,WAAO5F,aAAa,CAAC/D,SAAS,CAAC6C,QAAV,CAAmB8G,CAAnB,CAAD,CAApB;AACH;AACJ;;AACD,SAASnE,YAAT,CAAsBoE,KAAtB,EAA4B;AACxB,MAAIA,KAAI,CAACC,EAAL,CAAQnE,MAAM,CAACoE,gBAAf,CAAJ,EAAsC;AAClC,UAAM,IAAId,UAAU,CAACe,KAAf,CAAqB,8CAArB,CAAN;AACH;;AACD,SAAOH,KAAI,CAACI,QAAL,EAAP;AACH;;AACD,IAAI9J,IAAI,CAACD,IAAL,KAAcA,IAAlB,EAAwB;AACpBC,EAAAA,IAAI,CAACD,IAAL,GAAYA,IAAZ;AACAE,EAAAA,SAAS;AACZ","sourcesContent":["/* eslint-disable */\nimport { Timestamp } from \"../../../google/protobuf/timestamp\";\nimport * as Long from \"long\";\nimport { util, configure, Writer, Reader } from \"protobufjs/minimal\";\nimport { Header } from \"../../../tendermint/types/types\";\nimport { Any } from \"../../../google/protobuf/any\";\nimport { Duration } from \"../../../google/protobuf/duration\";\nimport { Coin } from \"../../../cosmos/base/v1beta1/coin\";\nexport const protobufPackage = \"cosmos.staking.v1beta1\";\n/** BondStatus is the status of a validator. */\nexport var BondStatus;\n(function (BondStatus) {\n    /** BOND_STATUS_UNSPECIFIED - UNSPECIFIED defines an invalid validator status. */\n    BondStatus[BondStatus[\"BOND_STATUS_UNSPECIFIED\"] = 0] = \"BOND_STATUS_UNSPECIFIED\";\n    /** BOND_STATUS_UNBONDED - UNBONDED defines a validator that is not bonded. */\n    BondStatus[BondStatus[\"BOND_STATUS_UNBONDED\"] = 1] = \"BOND_STATUS_UNBONDED\";\n    /** BOND_STATUS_UNBONDING - UNBONDING defines a validator that is unbonding. */\n    BondStatus[BondStatus[\"BOND_STATUS_UNBONDING\"] = 2] = \"BOND_STATUS_UNBONDING\";\n    /** BOND_STATUS_BONDED - BONDED defines a validator that is bonded. */\n    BondStatus[BondStatus[\"BOND_STATUS_BONDED\"] = 3] = \"BOND_STATUS_BONDED\";\n    BondStatus[BondStatus[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(BondStatus || (BondStatus = {}));\nexport function bondStatusFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"BOND_STATUS_UNSPECIFIED\":\n            return BondStatus.BOND_STATUS_UNSPECIFIED;\n        case 1:\n        case \"BOND_STATUS_UNBONDED\":\n            return BondStatus.BOND_STATUS_UNBONDED;\n        case 2:\n        case \"BOND_STATUS_UNBONDING\":\n            return BondStatus.BOND_STATUS_UNBONDING;\n        case 3:\n        case \"BOND_STATUS_BONDED\":\n            return BondStatus.BOND_STATUS_BONDED;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return BondStatus.UNRECOGNIZED;\n    }\n}\nexport function bondStatusToJSON(object) {\n    switch (object) {\n        case BondStatus.BOND_STATUS_UNSPECIFIED:\n            return \"BOND_STATUS_UNSPECIFIED\";\n        case BondStatus.BOND_STATUS_UNBONDED:\n            return \"BOND_STATUS_UNBONDED\";\n        case BondStatus.BOND_STATUS_UNBONDING:\n            return \"BOND_STATUS_UNBONDING\";\n        case BondStatus.BOND_STATUS_BONDED:\n            return \"BOND_STATUS_BONDED\";\n        default:\n            return \"UNKNOWN\";\n    }\n}\nconst baseHistoricalInfo = {};\nexport const HistoricalInfo = {\n    encode(message, writer = Writer.create()) {\n        if (message.header !== undefined) {\n            Header.encode(message.header, writer.uint32(10).fork()).ldelim();\n        }\n        for (const v of message.valset) {\n            Validator.encode(v, writer.uint32(18).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseHistoricalInfo };\n        message.valset = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.header = Header.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.valset.push(Validator.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseHistoricalInfo };\n        message.valset = [];\n        if (object.header !== undefined && object.header !== null) {\n            message.header = Header.fromJSON(object.header);\n        }\n        else {\n            message.header = undefined;\n        }\n        if (object.valset !== undefined && object.valset !== null) {\n            for (const e of object.valset) {\n                message.valset.push(Validator.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.header !== undefined &&\n            (obj.header = message.header ? Header.toJSON(message.header) : undefined);\n        if (message.valset) {\n            obj.valset = message.valset.map((e) => e ? Validator.toJSON(e) : undefined);\n        }\n        else {\n            obj.valset = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseHistoricalInfo };\n        message.valset = [];\n        if (object.header !== undefined && object.header !== null) {\n            message.header = Header.fromPartial(object.header);\n        }\n        else {\n            message.header = undefined;\n        }\n        if (object.valset !== undefined && object.valset !== null) {\n            for (const e of object.valset) {\n                message.valset.push(Validator.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst baseCommissionRates = {\n    rate: \"\",\n    maxRate: \"\",\n    maxChangeRate: \"\",\n};\nexport const CommissionRates = {\n    encode(message, writer = Writer.create()) {\n        if (message.rate !== \"\") {\n            writer.uint32(10).string(message.rate);\n        }\n        if (message.maxRate !== \"\") {\n            writer.uint32(18).string(message.maxRate);\n        }\n        if (message.maxChangeRate !== \"\") {\n            writer.uint32(26).string(message.maxChangeRate);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseCommissionRates };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.rate = reader.string();\n                    break;\n                case 2:\n                    message.maxRate = reader.string();\n                    break;\n                case 3:\n                    message.maxChangeRate = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseCommissionRates };\n        if (object.rate !== undefined && object.rate !== null) {\n            message.rate = String(object.rate);\n        }\n        else {\n            message.rate = \"\";\n        }\n        if (object.maxRate !== undefined && object.maxRate !== null) {\n            message.maxRate = String(object.maxRate);\n        }\n        else {\n            message.maxRate = \"\";\n        }\n        if (object.maxChangeRate !== undefined && object.maxChangeRate !== null) {\n            message.maxChangeRate = String(object.maxChangeRate);\n        }\n        else {\n            message.maxChangeRate = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.rate !== undefined && (obj.rate = message.rate);\n        message.maxRate !== undefined && (obj.maxRate = message.maxRate);\n        message.maxChangeRate !== undefined &&\n            (obj.maxChangeRate = message.maxChangeRate);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseCommissionRates };\n        if (object.rate !== undefined && object.rate !== null) {\n            message.rate = object.rate;\n        }\n        else {\n            message.rate = \"\";\n        }\n        if (object.maxRate !== undefined && object.maxRate !== null) {\n            message.maxRate = object.maxRate;\n        }\n        else {\n            message.maxRate = \"\";\n        }\n        if (object.maxChangeRate !== undefined && object.maxChangeRate !== null) {\n            message.maxChangeRate = object.maxChangeRate;\n        }\n        else {\n            message.maxChangeRate = \"\";\n        }\n        return message;\n    },\n};\nconst baseCommission = {};\nexport const Commission = {\n    encode(message, writer = Writer.create()) {\n        if (message.commissionRates !== undefined) {\n            CommissionRates.encode(message.commissionRates, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.updateTime !== undefined) {\n            Timestamp.encode(toTimestamp(message.updateTime), writer.uint32(18).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseCommission };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.commissionRates = CommissionRates.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.updateTime = fromTimestamp(Timestamp.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseCommission };\n        if (object.commissionRates !== undefined &&\n            object.commissionRates !== null) {\n            message.commissionRates = CommissionRates.fromJSON(object.commissionRates);\n        }\n        else {\n            message.commissionRates = undefined;\n        }\n        if (object.updateTime !== undefined && object.updateTime !== null) {\n            message.updateTime = fromJsonTimestamp(object.updateTime);\n        }\n        else {\n            message.updateTime = undefined;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.commissionRates !== undefined &&\n            (obj.commissionRates = message.commissionRates\n                ? CommissionRates.toJSON(message.commissionRates)\n                : undefined);\n        message.updateTime !== undefined &&\n            (obj.updateTime =\n                message.updateTime !== undefined\n                    ? message.updateTime.toISOString()\n                    : null);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseCommission };\n        if (object.commissionRates !== undefined &&\n            object.commissionRates !== null) {\n            message.commissionRates = CommissionRates.fromPartial(object.commissionRates);\n        }\n        else {\n            message.commissionRates = undefined;\n        }\n        if (object.updateTime !== undefined && object.updateTime !== null) {\n            message.updateTime = object.updateTime;\n        }\n        else {\n            message.updateTime = undefined;\n        }\n        return message;\n    },\n};\nconst baseDescription = {\n    moniker: \"\",\n    identity: \"\",\n    website: \"\",\n    securityContact: \"\",\n    details: \"\",\n};\nexport const Description = {\n    encode(message, writer = Writer.create()) {\n        if (message.moniker !== \"\") {\n            writer.uint32(10).string(message.moniker);\n        }\n        if (message.identity !== \"\") {\n            writer.uint32(18).string(message.identity);\n        }\n        if (message.website !== \"\") {\n            writer.uint32(26).string(message.website);\n        }\n        if (message.securityContact !== \"\") {\n            writer.uint32(34).string(message.securityContact);\n        }\n        if (message.details !== \"\") {\n            writer.uint32(42).string(message.details);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseDescription };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.moniker = reader.string();\n                    break;\n                case 2:\n                    message.identity = reader.string();\n                    break;\n                case 3:\n                    message.website = reader.string();\n                    break;\n                case 4:\n                    message.securityContact = reader.string();\n                    break;\n                case 5:\n                    message.details = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseDescription };\n        if (object.moniker !== undefined && object.moniker !== null) {\n            message.moniker = String(object.moniker);\n        }\n        else {\n            message.moniker = \"\";\n        }\n        if (object.identity !== undefined && object.identity !== null) {\n            message.identity = String(object.identity);\n        }\n        else {\n            message.identity = \"\";\n        }\n        if (object.website !== undefined && object.website !== null) {\n            message.website = String(object.website);\n        }\n        else {\n            message.website = \"\";\n        }\n        if (object.securityContact !== undefined &&\n            object.securityContact !== null) {\n            message.securityContact = String(object.securityContact);\n        }\n        else {\n            message.securityContact = \"\";\n        }\n        if (object.details !== undefined && object.details !== null) {\n            message.details = String(object.details);\n        }\n        else {\n            message.details = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.moniker !== undefined && (obj.moniker = message.moniker);\n        message.identity !== undefined && (obj.identity = message.identity);\n        message.website !== undefined && (obj.website = message.website);\n        message.securityContact !== undefined &&\n            (obj.securityContact = message.securityContact);\n        message.details !== undefined && (obj.details = message.details);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseDescription };\n        if (object.moniker !== undefined && object.moniker !== null) {\n            message.moniker = object.moniker;\n        }\n        else {\n            message.moniker = \"\";\n        }\n        if (object.identity !== undefined && object.identity !== null) {\n            message.identity = object.identity;\n        }\n        else {\n            message.identity = \"\";\n        }\n        if (object.website !== undefined && object.website !== null) {\n            message.website = object.website;\n        }\n        else {\n            message.website = \"\";\n        }\n        if (object.securityContact !== undefined &&\n            object.securityContact !== null) {\n            message.securityContact = object.securityContact;\n        }\n        else {\n            message.securityContact = \"\";\n        }\n        if (object.details !== undefined && object.details !== null) {\n            message.details = object.details;\n        }\n        else {\n            message.details = \"\";\n        }\n        return message;\n    },\n};\nconst baseValidator = {\n    operatorAddress: \"\",\n    jailed: false,\n    status: 0,\n    tokens: \"\",\n    delegatorShares: \"\",\n    unbondingHeight: 0,\n    minSelfDelegation: \"\",\n};\nexport const Validator = {\n    encode(message, writer = Writer.create()) {\n        if (message.operatorAddress !== \"\") {\n            writer.uint32(10).string(message.operatorAddress);\n        }\n        if (message.consensusPubkey !== undefined) {\n            Any.encode(message.consensusPubkey, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.jailed === true) {\n            writer.uint32(24).bool(message.jailed);\n        }\n        if (message.status !== 0) {\n            writer.uint32(32).int32(message.status);\n        }\n        if (message.tokens !== \"\") {\n            writer.uint32(42).string(message.tokens);\n        }\n        if (message.delegatorShares !== \"\") {\n            writer.uint32(50).string(message.delegatorShares);\n        }\n        if (message.description !== undefined) {\n            Description.encode(message.description, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.unbondingHeight !== 0) {\n            writer.uint32(64).int64(message.unbondingHeight);\n        }\n        if (message.unbondingTime !== undefined) {\n            Timestamp.encode(toTimestamp(message.unbondingTime), writer.uint32(74).fork()).ldelim();\n        }\n        if (message.commission !== undefined) {\n            Commission.encode(message.commission, writer.uint32(82).fork()).ldelim();\n        }\n        if (message.minSelfDelegation !== \"\") {\n            writer.uint32(90).string(message.minSelfDelegation);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseValidator };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.operatorAddress = reader.string();\n                    break;\n                case 2:\n                    message.consensusPubkey = Any.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.jailed = reader.bool();\n                    break;\n                case 4:\n                    message.status = reader.int32();\n                    break;\n                case 5:\n                    message.tokens = reader.string();\n                    break;\n                case 6:\n                    message.delegatorShares = reader.string();\n                    break;\n                case 7:\n                    message.description = Description.decode(reader, reader.uint32());\n                    break;\n                case 8:\n                    message.unbondingHeight = longToNumber(reader.int64());\n                    break;\n                case 9:\n                    message.unbondingTime = fromTimestamp(Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 10:\n                    message.commission = Commission.decode(reader, reader.uint32());\n                    break;\n                case 11:\n                    message.minSelfDelegation = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseValidator };\n        if (object.operatorAddress !== undefined &&\n            object.operatorAddress !== null) {\n            message.operatorAddress = String(object.operatorAddress);\n        }\n        else {\n            message.operatorAddress = \"\";\n        }\n        if (object.consensusPubkey !== undefined &&\n            object.consensusPubkey !== null) {\n            message.consensusPubkey = Any.fromJSON(object.consensusPubkey);\n        }\n        else {\n            message.consensusPubkey = undefined;\n        }\n        if (object.jailed !== undefined && object.jailed !== null) {\n            message.jailed = Boolean(object.jailed);\n        }\n        else {\n            message.jailed = false;\n        }\n        if (object.status !== undefined && object.status !== null) {\n            message.status = bondStatusFromJSON(object.status);\n        }\n        else {\n            message.status = 0;\n        }\n        if (object.tokens !== undefined && object.tokens !== null) {\n            message.tokens = String(object.tokens);\n        }\n        else {\n            message.tokens = \"\";\n        }\n        if (object.delegatorShares !== undefined &&\n            object.delegatorShares !== null) {\n            message.delegatorShares = String(object.delegatorShares);\n        }\n        else {\n            message.delegatorShares = \"\";\n        }\n        if (object.description !== undefined && object.description !== null) {\n            message.description = Description.fromJSON(object.description);\n        }\n        else {\n            message.description = undefined;\n        }\n        if (object.unbondingHeight !== undefined &&\n            object.unbondingHeight !== null) {\n            message.unbondingHeight = Number(object.unbondingHeight);\n        }\n        else {\n            message.unbondingHeight = 0;\n        }\n        if (object.unbondingTime !== undefined && object.unbondingTime !== null) {\n            message.unbondingTime = fromJsonTimestamp(object.unbondingTime);\n        }\n        else {\n            message.unbondingTime = undefined;\n        }\n        if (object.commission !== undefined && object.commission !== null) {\n            message.commission = Commission.fromJSON(object.commission);\n        }\n        else {\n            message.commission = undefined;\n        }\n        if (object.minSelfDelegation !== undefined &&\n            object.minSelfDelegation !== null) {\n            message.minSelfDelegation = String(object.minSelfDelegation);\n        }\n        else {\n            message.minSelfDelegation = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.operatorAddress !== undefined &&\n            (obj.operatorAddress = message.operatorAddress);\n        message.consensusPubkey !== undefined &&\n            (obj.consensusPubkey = message.consensusPubkey\n                ? Any.toJSON(message.consensusPubkey)\n                : undefined);\n        message.jailed !== undefined && (obj.jailed = message.jailed);\n        message.status !== undefined &&\n            (obj.status = bondStatusToJSON(message.status));\n        message.tokens !== undefined && (obj.tokens = message.tokens);\n        message.delegatorShares !== undefined &&\n            (obj.delegatorShares = message.delegatorShares);\n        message.description !== undefined &&\n            (obj.description = message.description\n                ? Description.toJSON(message.description)\n                : undefined);\n        message.unbondingHeight !== undefined &&\n            (obj.unbondingHeight = message.unbondingHeight);\n        message.unbondingTime !== undefined &&\n            (obj.unbondingTime =\n                message.unbondingTime !== undefined\n                    ? message.unbondingTime.toISOString()\n                    : null);\n        message.commission !== undefined &&\n            (obj.commission = message.commission\n                ? Commission.toJSON(message.commission)\n                : undefined);\n        message.minSelfDelegation !== undefined &&\n            (obj.minSelfDelegation = message.minSelfDelegation);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseValidator };\n        if (object.operatorAddress !== undefined &&\n            object.operatorAddress !== null) {\n            message.operatorAddress = object.operatorAddress;\n        }\n        else {\n            message.operatorAddress = \"\";\n        }\n        if (object.consensusPubkey !== undefined &&\n            object.consensusPubkey !== null) {\n            message.consensusPubkey = Any.fromPartial(object.consensusPubkey);\n        }\n        else {\n            message.consensusPubkey = undefined;\n        }\n        if (object.jailed !== undefined && object.jailed !== null) {\n            message.jailed = object.jailed;\n        }\n        else {\n            message.jailed = false;\n        }\n        if (object.status !== undefined && object.status !== null) {\n            message.status = object.status;\n        }\n        else {\n            message.status = 0;\n        }\n        if (object.tokens !== undefined && object.tokens !== null) {\n            message.tokens = object.tokens;\n        }\n        else {\n            message.tokens = \"\";\n        }\n        if (object.delegatorShares !== undefined &&\n            object.delegatorShares !== null) {\n            message.delegatorShares = object.delegatorShares;\n        }\n        else {\n            message.delegatorShares = \"\";\n        }\n        if (object.description !== undefined && object.description !== null) {\n            message.description = Description.fromPartial(object.description);\n        }\n        else {\n            message.description = undefined;\n        }\n        if (object.unbondingHeight !== undefined &&\n            object.unbondingHeight !== null) {\n            message.unbondingHeight = object.unbondingHeight;\n        }\n        else {\n            message.unbondingHeight = 0;\n        }\n        if (object.unbondingTime !== undefined && object.unbondingTime !== null) {\n            message.unbondingTime = object.unbondingTime;\n        }\n        else {\n            message.unbondingTime = undefined;\n        }\n        if (object.commission !== undefined && object.commission !== null) {\n            message.commission = Commission.fromPartial(object.commission);\n        }\n        else {\n            message.commission = undefined;\n        }\n        if (object.minSelfDelegation !== undefined &&\n            object.minSelfDelegation !== null) {\n            message.minSelfDelegation = object.minSelfDelegation;\n        }\n        else {\n            message.minSelfDelegation = \"\";\n        }\n        return message;\n    },\n};\nconst baseValAddresses = { addresses: \"\" };\nexport const ValAddresses = {\n    encode(message, writer = Writer.create()) {\n        for (const v of message.addresses) {\n            writer.uint32(10).string(v);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseValAddresses };\n        message.addresses = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.addresses.push(reader.string());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseValAddresses };\n        message.addresses = [];\n        if (object.addresses !== undefined && object.addresses !== null) {\n            for (const e of object.addresses) {\n                message.addresses.push(String(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.addresses) {\n            obj.addresses = message.addresses.map((e) => e);\n        }\n        else {\n            obj.addresses = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseValAddresses };\n        message.addresses = [];\n        if (object.addresses !== undefined && object.addresses !== null) {\n            for (const e of object.addresses) {\n                message.addresses.push(e);\n            }\n        }\n        return message;\n    },\n};\nconst baseDVPair = { delegatorAddress: \"\", validatorAddress: \"\" };\nexport const DVPair = {\n    encode(message, writer = Writer.create()) {\n        if (message.delegatorAddress !== \"\") {\n            writer.uint32(10).string(message.delegatorAddress);\n        }\n        if (message.validatorAddress !== \"\") {\n            writer.uint32(18).string(message.validatorAddress);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseDVPair };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.delegatorAddress = reader.string();\n                    break;\n                case 2:\n                    message.validatorAddress = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseDVPair };\n        if (object.delegatorAddress !== undefined &&\n            object.delegatorAddress !== null) {\n            message.delegatorAddress = String(object.delegatorAddress);\n        }\n        else {\n            message.delegatorAddress = \"\";\n        }\n        if (object.validatorAddress !== undefined &&\n            object.validatorAddress !== null) {\n            message.validatorAddress = String(object.validatorAddress);\n        }\n        else {\n            message.validatorAddress = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.delegatorAddress !== undefined &&\n            (obj.delegatorAddress = message.delegatorAddress);\n        message.validatorAddress !== undefined &&\n            (obj.validatorAddress = message.validatorAddress);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseDVPair };\n        if (object.delegatorAddress !== undefined &&\n            object.delegatorAddress !== null) {\n            message.delegatorAddress = object.delegatorAddress;\n        }\n        else {\n            message.delegatorAddress = \"\";\n        }\n        if (object.validatorAddress !== undefined &&\n            object.validatorAddress !== null) {\n            message.validatorAddress = object.validatorAddress;\n        }\n        else {\n            message.validatorAddress = \"\";\n        }\n        return message;\n    },\n};\nconst baseDVPairs = {};\nexport const DVPairs = {\n    encode(message, writer = Writer.create()) {\n        for (const v of message.pairs) {\n            DVPair.encode(v, writer.uint32(10).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseDVPairs };\n        message.pairs = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.pairs.push(DVPair.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseDVPairs };\n        message.pairs = [];\n        if (object.pairs !== undefined && object.pairs !== null) {\n            for (const e of object.pairs) {\n                message.pairs.push(DVPair.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.pairs) {\n            obj.pairs = message.pairs.map((e) => (e ? DVPair.toJSON(e) : undefined));\n        }\n        else {\n            obj.pairs = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseDVPairs };\n        message.pairs = [];\n        if (object.pairs !== undefined && object.pairs !== null) {\n            for (const e of object.pairs) {\n                message.pairs.push(DVPair.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst baseDVVTriplet = {\n    delegatorAddress: \"\",\n    validatorSrcAddress: \"\",\n    validatorDstAddress: \"\",\n};\nexport const DVVTriplet = {\n    encode(message, writer = Writer.create()) {\n        if (message.delegatorAddress !== \"\") {\n            writer.uint32(10).string(message.delegatorAddress);\n        }\n        if (message.validatorSrcAddress !== \"\") {\n            writer.uint32(18).string(message.validatorSrcAddress);\n        }\n        if (message.validatorDstAddress !== \"\") {\n            writer.uint32(26).string(message.validatorDstAddress);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseDVVTriplet };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.delegatorAddress = reader.string();\n                    break;\n                case 2:\n                    message.validatorSrcAddress = reader.string();\n                    break;\n                case 3:\n                    message.validatorDstAddress = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseDVVTriplet };\n        if (object.delegatorAddress !== undefined &&\n            object.delegatorAddress !== null) {\n            message.delegatorAddress = String(object.delegatorAddress);\n        }\n        else {\n            message.delegatorAddress = \"\";\n        }\n        if (object.validatorSrcAddress !== undefined &&\n            object.validatorSrcAddress !== null) {\n            message.validatorSrcAddress = String(object.validatorSrcAddress);\n        }\n        else {\n            message.validatorSrcAddress = \"\";\n        }\n        if (object.validatorDstAddress !== undefined &&\n            object.validatorDstAddress !== null) {\n            message.validatorDstAddress = String(object.validatorDstAddress);\n        }\n        else {\n            message.validatorDstAddress = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.delegatorAddress !== undefined &&\n            (obj.delegatorAddress = message.delegatorAddress);\n        message.validatorSrcAddress !== undefined &&\n            (obj.validatorSrcAddress = message.validatorSrcAddress);\n        message.validatorDstAddress !== undefined &&\n            (obj.validatorDstAddress = message.validatorDstAddress);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseDVVTriplet };\n        if (object.delegatorAddress !== undefined &&\n            object.delegatorAddress !== null) {\n            message.delegatorAddress = object.delegatorAddress;\n        }\n        else {\n            message.delegatorAddress = \"\";\n        }\n        if (object.validatorSrcAddress !== undefined &&\n            object.validatorSrcAddress !== null) {\n            message.validatorSrcAddress = object.validatorSrcAddress;\n        }\n        else {\n            message.validatorSrcAddress = \"\";\n        }\n        if (object.validatorDstAddress !== undefined &&\n            object.validatorDstAddress !== null) {\n            message.validatorDstAddress = object.validatorDstAddress;\n        }\n        else {\n            message.validatorDstAddress = \"\";\n        }\n        return message;\n    },\n};\nconst baseDVVTriplets = {};\nexport const DVVTriplets = {\n    encode(message, writer = Writer.create()) {\n        for (const v of message.triplets) {\n            DVVTriplet.encode(v, writer.uint32(10).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseDVVTriplets };\n        message.triplets = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.triplets.push(DVVTriplet.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseDVVTriplets };\n        message.triplets = [];\n        if (object.triplets !== undefined && object.triplets !== null) {\n            for (const e of object.triplets) {\n                message.triplets.push(DVVTriplet.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.triplets) {\n            obj.triplets = message.triplets.map((e) => e ? DVVTriplet.toJSON(e) : undefined);\n        }\n        else {\n            obj.triplets = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseDVVTriplets };\n        message.triplets = [];\n        if (object.triplets !== undefined && object.triplets !== null) {\n            for (const e of object.triplets) {\n                message.triplets.push(DVVTriplet.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst baseDelegation = {\n    delegatorAddress: \"\",\n    validatorAddress: \"\",\n    shares: \"\",\n};\nexport const Delegation = {\n    encode(message, writer = Writer.create()) {\n        if (message.delegatorAddress !== \"\") {\n            writer.uint32(10).string(message.delegatorAddress);\n        }\n        if (message.validatorAddress !== \"\") {\n            writer.uint32(18).string(message.validatorAddress);\n        }\n        if (message.shares !== \"\") {\n            writer.uint32(26).string(message.shares);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseDelegation };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.delegatorAddress = reader.string();\n                    break;\n                case 2:\n                    message.validatorAddress = reader.string();\n                    break;\n                case 3:\n                    message.shares = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseDelegation };\n        if (object.delegatorAddress !== undefined &&\n            object.delegatorAddress !== null) {\n            message.delegatorAddress = String(object.delegatorAddress);\n        }\n        else {\n            message.delegatorAddress = \"\";\n        }\n        if (object.validatorAddress !== undefined &&\n            object.validatorAddress !== null) {\n            message.validatorAddress = String(object.validatorAddress);\n        }\n        else {\n            message.validatorAddress = \"\";\n        }\n        if (object.shares !== undefined && object.shares !== null) {\n            message.shares = String(object.shares);\n        }\n        else {\n            message.shares = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.delegatorAddress !== undefined &&\n            (obj.delegatorAddress = message.delegatorAddress);\n        message.validatorAddress !== undefined &&\n            (obj.validatorAddress = message.validatorAddress);\n        message.shares !== undefined && (obj.shares = message.shares);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseDelegation };\n        if (object.delegatorAddress !== undefined &&\n            object.delegatorAddress !== null) {\n            message.delegatorAddress = object.delegatorAddress;\n        }\n        else {\n            message.delegatorAddress = \"\";\n        }\n        if (object.validatorAddress !== undefined &&\n            object.validatorAddress !== null) {\n            message.validatorAddress = object.validatorAddress;\n        }\n        else {\n            message.validatorAddress = \"\";\n        }\n        if (object.shares !== undefined && object.shares !== null) {\n            message.shares = object.shares;\n        }\n        else {\n            message.shares = \"\";\n        }\n        return message;\n    },\n};\nconst baseUnbondingDelegation = {\n    delegatorAddress: \"\",\n    validatorAddress: \"\",\n};\nexport const UnbondingDelegation = {\n    encode(message, writer = Writer.create()) {\n        if (message.delegatorAddress !== \"\") {\n            writer.uint32(10).string(message.delegatorAddress);\n        }\n        if (message.validatorAddress !== \"\") {\n            writer.uint32(18).string(message.validatorAddress);\n        }\n        for (const v of message.entries) {\n            UnbondingDelegationEntry.encode(v, writer.uint32(26).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseUnbondingDelegation };\n        message.entries = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.delegatorAddress = reader.string();\n                    break;\n                case 2:\n                    message.validatorAddress = reader.string();\n                    break;\n                case 3:\n                    message.entries.push(UnbondingDelegationEntry.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseUnbondingDelegation };\n        message.entries = [];\n        if (object.delegatorAddress !== undefined &&\n            object.delegatorAddress !== null) {\n            message.delegatorAddress = String(object.delegatorAddress);\n        }\n        else {\n            message.delegatorAddress = \"\";\n        }\n        if (object.validatorAddress !== undefined &&\n            object.validatorAddress !== null) {\n            message.validatorAddress = String(object.validatorAddress);\n        }\n        else {\n            message.validatorAddress = \"\";\n        }\n        if (object.entries !== undefined && object.entries !== null) {\n            for (const e of object.entries) {\n                message.entries.push(UnbondingDelegationEntry.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.delegatorAddress !== undefined &&\n            (obj.delegatorAddress = message.delegatorAddress);\n        message.validatorAddress !== undefined &&\n            (obj.validatorAddress = message.validatorAddress);\n        if (message.entries) {\n            obj.entries = message.entries.map((e) => e ? UnbondingDelegationEntry.toJSON(e) : undefined);\n        }\n        else {\n            obj.entries = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseUnbondingDelegation };\n        message.entries = [];\n        if (object.delegatorAddress !== undefined &&\n            object.delegatorAddress !== null) {\n            message.delegatorAddress = object.delegatorAddress;\n        }\n        else {\n            message.delegatorAddress = \"\";\n        }\n        if (object.validatorAddress !== undefined &&\n            object.validatorAddress !== null) {\n            message.validatorAddress = object.validatorAddress;\n        }\n        else {\n            message.validatorAddress = \"\";\n        }\n        if (object.entries !== undefined && object.entries !== null) {\n            for (const e of object.entries) {\n                message.entries.push(UnbondingDelegationEntry.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst baseUnbondingDelegationEntry = {\n    creationHeight: 0,\n    initialBalance: \"\",\n    balance: \"\",\n};\nexport const UnbondingDelegationEntry = {\n    encode(message, writer = Writer.create()) {\n        if (message.creationHeight !== 0) {\n            writer.uint32(8).int64(message.creationHeight);\n        }\n        if (message.completionTime !== undefined) {\n            Timestamp.encode(toTimestamp(message.completionTime), writer.uint32(18).fork()).ldelim();\n        }\n        if (message.initialBalance !== \"\") {\n            writer.uint32(26).string(message.initialBalance);\n        }\n        if (message.balance !== \"\") {\n            writer.uint32(34).string(message.balance);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = {\n            ...baseUnbondingDelegationEntry,\n        };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.creationHeight = longToNumber(reader.int64());\n                    break;\n                case 2:\n                    message.completionTime = fromTimestamp(Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 3:\n                    message.initialBalance = reader.string();\n                    break;\n                case 4:\n                    message.balance = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = {\n            ...baseUnbondingDelegationEntry,\n        };\n        if (object.creationHeight !== undefined && object.creationHeight !== null) {\n            message.creationHeight = Number(object.creationHeight);\n        }\n        else {\n            message.creationHeight = 0;\n        }\n        if (object.completionTime !== undefined && object.completionTime !== null) {\n            message.completionTime = fromJsonTimestamp(object.completionTime);\n        }\n        else {\n            message.completionTime = undefined;\n        }\n        if (object.initialBalance !== undefined && object.initialBalance !== null) {\n            message.initialBalance = String(object.initialBalance);\n        }\n        else {\n            message.initialBalance = \"\";\n        }\n        if (object.balance !== undefined && object.balance !== null) {\n            message.balance = String(object.balance);\n        }\n        else {\n            message.balance = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.creationHeight !== undefined &&\n            (obj.creationHeight = message.creationHeight);\n        message.completionTime !== undefined &&\n            (obj.completionTime =\n                message.completionTime !== undefined\n                    ? message.completionTime.toISOString()\n                    : null);\n        message.initialBalance !== undefined &&\n            (obj.initialBalance = message.initialBalance);\n        message.balance !== undefined && (obj.balance = message.balance);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = {\n            ...baseUnbondingDelegationEntry,\n        };\n        if (object.creationHeight !== undefined && object.creationHeight !== null) {\n            message.creationHeight = object.creationHeight;\n        }\n        else {\n            message.creationHeight = 0;\n        }\n        if (object.completionTime !== undefined && object.completionTime !== null) {\n            message.completionTime = object.completionTime;\n        }\n        else {\n            message.completionTime = undefined;\n        }\n        if (object.initialBalance !== undefined && object.initialBalance !== null) {\n            message.initialBalance = object.initialBalance;\n        }\n        else {\n            message.initialBalance = \"\";\n        }\n        if (object.balance !== undefined && object.balance !== null) {\n            message.balance = object.balance;\n        }\n        else {\n            message.balance = \"\";\n        }\n        return message;\n    },\n};\nconst baseRedelegationEntry = {\n    creationHeight: 0,\n    initialBalance: \"\",\n    sharesDst: \"\",\n};\nexport const RedelegationEntry = {\n    encode(message, writer = Writer.create()) {\n        if (message.creationHeight !== 0) {\n            writer.uint32(8).int64(message.creationHeight);\n        }\n        if (message.completionTime !== undefined) {\n            Timestamp.encode(toTimestamp(message.completionTime), writer.uint32(18).fork()).ldelim();\n        }\n        if (message.initialBalance !== \"\") {\n            writer.uint32(26).string(message.initialBalance);\n        }\n        if (message.sharesDst !== \"\") {\n            writer.uint32(34).string(message.sharesDst);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRedelegationEntry };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.creationHeight = longToNumber(reader.int64());\n                    break;\n                case 2:\n                    message.completionTime = fromTimestamp(Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 3:\n                    message.initialBalance = reader.string();\n                    break;\n                case 4:\n                    message.sharesDst = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRedelegationEntry };\n        if (object.creationHeight !== undefined && object.creationHeight !== null) {\n            message.creationHeight = Number(object.creationHeight);\n        }\n        else {\n            message.creationHeight = 0;\n        }\n        if (object.completionTime !== undefined && object.completionTime !== null) {\n            message.completionTime = fromJsonTimestamp(object.completionTime);\n        }\n        else {\n            message.completionTime = undefined;\n        }\n        if (object.initialBalance !== undefined && object.initialBalance !== null) {\n            message.initialBalance = String(object.initialBalance);\n        }\n        else {\n            message.initialBalance = \"\";\n        }\n        if (object.sharesDst !== undefined && object.sharesDst !== null) {\n            message.sharesDst = String(object.sharesDst);\n        }\n        else {\n            message.sharesDst = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.creationHeight !== undefined &&\n            (obj.creationHeight = message.creationHeight);\n        message.completionTime !== undefined &&\n            (obj.completionTime =\n                message.completionTime !== undefined\n                    ? message.completionTime.toISOString()\n                    : null);\n        message.initialBalance !== undefined &&\n            (obj.initialBalance = message.initialBalance);\n        message.sharesDst !== undefined && (obj.sharesDst = message.sharesDst);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRedelegationEntry };\n        if (object.creationHeight !== undefined && object.creationHeight !== null) {\n            message.creationHeight = object.creationHeight;\n        }\n        else {\n            message.creationHeight = 0;\n        }\n        if (object.completionTime !== undefined && object.completionTime !== null) {\n            message.completionTime = object.completionTime;\n        }\n        else {\n            message.completionTime = undefined;\n        }\n        if (object.initialBalance !== undefined && object.initialBalance !== null) {\n            message.initialBalance = object.initialBalance;\n        }\n        else {\n            message.initialBalance = \"\";\n        }\n        if (object.sharesDst !== undefined && object.sharesDst !== null) {\n            message.sharesDst = object.sharesDst;\n        }\n        else {\n            message.sharesDst = \"\";\n        }\n        return message;\n    },\n};\nconst baseRedelegation = {\n    delegatorAddress: \"\",\n    validatorSrcAddress: \"\",\n    validatorDstAddress: \"\",\n};\nexport const Redelegation = {\n    encode(message, writer = Writer.create()) {\n        if (message.delegatorAddress !== \"\") {\n            writer.uint32(10).string(message.delegatorAddress);\n        }\n        if (message.validatorSrcAddress !== \"\") {\n            writer.uint32(18).string(message.validatorSrcAddress);\n        }\n        if (message.validatorDstAddress !== \"\") {\n            writer.uint32(26).string(message.validatorDstAddress);\n        }\n        for (const v of message.entries) {\n            RedelegationEntry.encode(v, writer.uint32(34).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRedelegation };\n        message.entries = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.delegatorAddress = reader.string();\n                    break;\n                case 2:\n                    message.validatorSrcAddress = reader.string();\n                    break;\n                case 3:\n                    message.validatorDstAddress = reader.string();\n                    break;\n                case 4:\n                    message.entries.push(RedelegationEntry.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRedelegation };\n        message.entries = [];\n        if (object.delegatorAddress !== undefined &&\n            object.delegatorAddress !== null) {\n            message.delegatorAddress = String(object.delegatorAddress);\n        }\n        else {\n            message.delegatorAddress = \"\";\n        }\n        if (object.validatorSrcAddress !== undefined &&\n            object.validatorSrcAddress !== null) {\n            message.validatorSrcAddress = String(object.validatorSrcAddress);\n        }\n        else {\n            message.validatorSrcAddress = \"\";\n        }\n        if (object.validatorDstAddress !== undefined &&\n            object.validatorDstAddress !== null) {\n            message.validatorDstAddress = String(object.validatorDstAddress);\n        }\n        else {\n            message.validatorDstAddress = \"\";\n        }\n        if (object.entries !== undefined && object.entries !== null) {\n            for (const e of object.entries) {\n                message.entries.push(RedelegationEntry.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.delegatorAddress !== undefined &&\n            (obj.delegatorAddress = message.delegatorAddress);\n        message.validatorSrcAddress !== undefined &&\n            (obj.validatorSrcAddress = message.validatorSrcAddress);\n        message.validatorDstAddress !== undefined &&\n            (obj.validatorDstAddress = message.validatorDstAddress);\n        if (message.entries) {\n            obj.entries = message.entries.map((e) => e ? RedelegationEntry.toJSON(e) : undefined);\n        }\n        else {\n            obj.entries = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRedelegation };\n        message.entries = [];\n        if (object.delegatorAddress !== undefined &&\n            object.delegatorAddress !== null) {\n            message.delegatorAddress = object.delegatorAddress;\n        }\n        else {\n            message.delegatorAddress = \"\";\n        }\n        if (object.validatorSrcAddress !== undefined &&\n            object.validatorSrcAddress !== null) {\n            message.validatorSrcAddress = object.validatorSrcAddress;\n        }\n        else {\n            message.validatorSrcAddress = \"\";\n        }\n        if (object.validatorDstAddress !== undefined &&\n            object.validatorDstAddress !== null) {\n            message.validatorDstAddress = object.validatorDstAddress;\n        }\n        else {\n            message.validatorDstAddress = \"\";\n        }\n        if (object.entries !== undefined && object.entries !== null) {\n            for (const e of object.entries) {\n                message.entries.push(RedelegationEntry.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst baseParams = {\n    maxValidators: 0,\n    maxEntries: 0,\n    historicalEntries: 0,\n    bondDenom: \"\",\n};\nexport const Params = {\n    encode(message, writer = Writer.create()) {\n        if (message.unbondingTime !== undefined) {\n            Duration.encode(message.unbondingTime, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.maxValidators !== 0) {\n            writer.uint32(16).uint32(message.maxValidators);\n        }\n        if (message.maxEntries !== 0) {\n            writer.uint32(24).uint32(message.maxEntries);\n        }\n        if (message.historicalEntries !== 0) {\n            writer.uint32(32).uint32(message.historicalEntries);\n        }\n        if (message.bondDenom !== \"\") {\n            writer.uint32(42).string(message.bondDenom);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseParams };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.unbondingTime = Duration.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.maxValidators = reader.uint32();\n                    break;\n                case 3:\n                    message.maxEntries = reader.uint32();\n                    break;\n                case 4:\n                    message.historicalEntries = reader.uint32();\n                    break;\n                case 5:\n                    message.bondDenom = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseParams };\n        if (object.unbondingTime !== undefined && object.unbondingTime !== null) {\n            message.unbondingTime = Duration.fromJSON(object.unbondingTime);\n        }\n        else {\n            message.unbondingTime = undefined;\n        }\n        if (object.maxValidators !== undefined && object.maxValidators !== null) {\n            message.maxValidators = Number(object.maxValidators);\n        }\n        else {\n            message.maxValidators = 0;\n        }\n        if (object.maxEntries !== undefined && object.maxEntries !== null) {\n            message.maxEntries = Number(object.maxEntries);\n        }\n        else {\n            message.maxEntries = 0;\n        }\n        if (object.historicalEntries !== undefined &&\n            object.historicalEntries !== null) {\n            message.historicalEntries = Number(object.historicalEntries);\n        }\n        else {\n            message.historicalEntries = 0;\n        }\n        if (object.bondDenom !== undefined && object.bondDenom !== null) {\n            message.bondDenom = String(object.bondDenom);\n        }\n        else {\n            message.bondDenom = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.unbondingTime !== undefined &&\n            (obj.unbondingTime = message.unbondingTime\n                ? Duration.toJSON(message.unbondingTime)\n                : undefined);\n        message.maxValidators !== undefined &&\n            (obj.maxValidators = message.maxValidators);\n        message.maxEntries !== undefined && (obj.maxEntries = message.maxEntries);\n        message.historicalEntries !== undefined &&\n            (obj.historicalEntries = message.historicalEntries);\n        message.bondDenom !== undefined && (obj.bondDenom = message.bondDenom);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseParams };\n        if (object.unbondingTime !== undefined && object.unbondingTime !== null) {\n            message.unbondingTime = Duration.fromPartial(object.unbondingTime);\n        }\n        else {\n            message.unbondingTime = undefined;\n        }\n        if (object.maxValidators !== undefined && object.maxValidators !== null) {\n            message.maxValidators = object.maxValidators;\n        }\n        else {\n            message.maxValidators = 0;\n        }\n        if (object.maxEntries !== undefined && object.maxEntries !== null) {\n            message.maxEntries = object.maxEntries;\n        }\n        else {\n            message.maxEntries = 0;\n        }\n        if (object.historicalEntries !== undefined &&\n            object.historicalEntries !== null) {\n            message.historicalEntries = object.historicalEntries;\n        }\n        else {\n            message.historicalEntries = 0;\n        }\n        if (object.bondDenom !== undefined && object.bondDenom !== null) {\n            message.bondDenom = object.bondDenom;\n        }\n        else {\n            message.bondDenom = \"\";\n        }\n        return message;\n    },\n};\nconst baseDelegationResponse = {};\nexport const DelegationResponse = {\n    encode(message, writer = Writer.create()) {\n        if (message.delegation !== undefined) {\n            Delegation.encode(message.delegation, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.balance !== undefined) {\n            Coin.encode(message.balance, writer.uint32(18).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseDelegationResponse };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.delegation = Delegation.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.balance = Coin.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseDelegationResponse };\n        if (object.delegation !== undefined && object.delegation !== null) {\n            message.delegation = Delegation.fromJSON(object.delegation);\n        }\n        else {\n            message.delegation = undefined;\n        }\n        if (object.balance !== undefined && object.balance !== null) {\n            message.balance = Coin.fromJSON(object.balance);\n        }\n        else {\n            message.balance = undefined;\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.delegation !== undefined &&\n            (obj.delegation = message.delegation\n                ? Delegation.toJSON(message.delegation)\n                : undefined);\n        message.balance !== undefined &&\n            (obj.balance = message.balance\n                ? Coin.toJSON(message.balance)\n                : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseDelegationResponse };\n        if (object.delegation !== undefined && object.delegation !== null) {\n            message.delegation = Delegation.fromPartial(object.delegation);\n        }\n        else {\n            message.delegation = undefined;\n        }\n        if (object.balance !== undefined && object.balance !== null) {\n            message.balance = Coin.fromPartial(object.balance);\n        }\n        else {\n            message.balance = undefined;\n        }\n        return message;\n    },\n};\nconst baseRedelegationEntryResponse = { balance: \"\" };\nexport const RedelegationEntryResponse = {\n    encode(message, writer = Writer.create()) {\n        if (message.redelegationEntry !== undefined) {\n            RedelegationEntry.encode(message.redelegationEntry, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.balance !== \"\") {\n            writer.uint32(34).string(message.balance);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = {\n            ...baseRedelegationEntryResponse,\n        };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.redelegationEntry = RedelegationEntry.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.balance = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = {\n            ...baseRedelegationEntryResponse,\n        };\n        if (object.redelegationEntry !== undefined &&\n            object.redelegationEntry !== null) {\n            message.redelegationEntry = RedelegationEntry.fromJSON(object.redelegationEntry);\n        }\n        else {\n            message.redelegationEntry = undefined;\n        }\n        if (object.balance !== undefined && object.balance !== null) {\n            message.balance = String(object.balance);\n        }\n        else {\n            message.balance = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.redelegationEntry !== undefined &&\n            (obj.redelegationEntry = message.redelegationEntry\n                ? RedelegationEntry.toJSON(message.redelegationEntry)\n                : undefined);\n        message.balance !== undefined && (obj.balance = message.balance);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = {\n            ...baseRedelegationEntryResponse,\n        };\n        if (object.redelegationEntry !== undefined &&\n            object.redelegationEntry !== null) {\n            message.redelegationEntry = RedelegationEntry.fromPartial(object.redelegationEntry);\n        }\n        else {\n            message.redelegationEntry = undefined;\n        }\n        if (object.balance !== undefined && object.balance !== null) {\n            message.balance = object.balance;\n        }\n        else {\n            message.balance = \"\";\n        }\n        return message;\n    },\n};\nconst baseRedelegationResponse = {};\nexport const RedelegationResponse = {\n    encode(message, writer = Writer.create()) {\n        if (message.redelegation !== undefined) {\n            Redelegation.encode(message.redelegation, writer.uint32(10).fork()).ldelim();\n        }\n        for (const v of message.entries) {\n            RedelegationEntryResponse.encode(v, writer.uint32(18).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...baseRedelegationResponse };\n        message.entries = [];\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.redelegation = Redelegation.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.entries.push(RedelegationEntryResponse.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...baseRedelegationResponse };\n        message.entries = [];\n        if (object.redelegation !== undefined && object.redelegation !== null) {\n            message.redelegation = Redelegation.fromJSON(object.redelegation);\n        }\n        else {\n            message.redelegation = undefined;\n        }\n        if (object.entries !== undefined && object.entries !== null) {\n            for (const e of object.entries) {\n                message.entries.push(RedelegationEntryResponse.fromJSON(e));\n            }\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.redelegation !== undefined &&\n            (obj.redelegation = message.redelegation\n                ? Redelegation.toJSON(message.redelegation)\n                : undefined);\n        if (message.entries) {\n            obj.entries = message.entries.map((e) => e ? RedelegationEntryResponse.toJSON(e) : undefined);\n        }\n        else {\n            obj.entries = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...baseRedelegationResponse };\n        message.entries = [];\n        if (object.redelegation !== undefined && object.redelegation !== null) {\n            message.redelegation = Redelegation.fromPartial(object.redelegation);\n        }\n        else {\n            message.redelegation = undefined;\n        }\n        if (object.entries !== undefined && object.entries !== null) {\n            for (const e of object.entries) {\n                message.entries.push(RedelegationEntryResponse.fromPartial(e));\n            }\n        }\n        return message;\n    },\n};\nconst basePool = { notBondedTokens: \"\", bondedTokens: \"\" };\nexport const Pool = {\n    encode(message, writer = Writer.create()) {\n        if (message.notBondedTokens !== \"\") {\n            writer.uint32(10).string(message.notBondedTokens);\n        }\n        if (message.bondedTokens !== \"\") {\n            writer.uint32(18).string(message.bondedTokens);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof Uint8Array ? new Reader(input) : input;\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = { ...basePool };\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.notBondedTokens = reader.string();\n                    break;\n                case 2:\n                    message.bondedTokens = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        const message = { ...basePool };\n        if (object.notBondedTokens !== undefined &&\n            object.notBondedTokens !== null) {\n            message.notBondedTokens = String(object.notBondedTokens);\n        }\n        else {\n            message.notBondedTokens = \"\";\n        }\n        if (object.bondedTokens !== undefined && object.bondedTokens !== null) {\n            message.bondedTokens = String(object.bondedTokens);\n        }\n        else {\n            message.bondedTokens = \"\";\n        }\n        return message;\n    },\n    toJSON(message) {\n        const obj = {};\n        message.notBondedTokens !== undefined &&\n            (obj.notBondedTokens = message.notBondedTokens);\n        message.bondedTokens !== undefined &&\n            (obj.bondedTokens = message.bondedTokens);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = { ...basePool };\n        if (object.notBondedTokens !== undefined &&\n            object.notBondedTokens !== null) {\n            message.notBondedTokens = object.notBondedTokens;\n        }\n        else {\n            message.notBondedTokens = \"\";\n        }\n        if (object.bondedTokens !== undefined && object.bondedTokens !== null) {\n            message.bondedTokens = object.bondedTokens;\n        }\n        else {\n            message.bondedTokens = \"\";\n        }\n        return message;\n    },\n};\nvar globalThis = (() => {\n    if (typeof globalThis !== \"undefined\")\n        return globalThis;\n    if (typeof self !== \"undefined\")\n        return self;\n    if (typeof window !== \"undefined\")\n        return window;\n    if (typeof global !== \"undefined\")\n        return global;\n    throw \"Unable to locate global object\";\n})();\nfunction toTimestamp(date) {\n    const seconds = date.getTime() / 1000;\n    const nanos = (date.getTime() % 1000) * 1000000;\n    return { seconds, nanos };\n}\nfunction fromTimestamp(t) {\n    let millis = t.seconds * 1000;\n    millis += t.nanos / 1000000;\n    return new Date(millis);\n}\nfunction fromJsonTimestamp(o) {\n    if (o instanceof Date) {\n        return o;\n    }\n    else if (typeof o === \"string\") {\n        return new Date(o);\n    }\n    else {\n        return fromTimestamp(Timestamp.fromJSON(o));\n    }\n}\nfunction longToNumber(long) {\n    if (long.gt(Number.MAX_SAFE_INTEGER)) {\n        throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n    }\n    return long.toNumber();\n}\nif (util.Long !== Long) {\n    util.Long = Long;\n    configure();\n}\n"]}]}